var Zepto=function(){function t(t){return null==t?String(t):X[$.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function r(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function n(t){return s(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return"number"==typeof t.length}function o(t){return A.call(t,function(t){return null!=t})}function h(t){return t.length>0?w.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in O?O[t]:O[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function c(t,e){return"number"!=typeof e||I[l(t)]?e:e+"px"}function d(t){var e,i;return R[t]||(e=L.createElement(t),L.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),R[t]=i),R[t]}function p(t){return"children"in t?E.call(t.children):w.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function f(t,e,i){for(T in e)i&&(n(e[T])||q(e[T]))?(n(e[T])&&!n(t[T])&&(t[T]={}),q(e[T])&&!q(t[T])&&(t[T]=[]),f(t[T],e[T],i)):e[T]!==b&&(t[T]=e[T])}function g(t,e){return null==e?w(t):w(t).filter(e)}function m(t,i,r,s){return e(i)?i.call(t,r,s):i}function v(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function _(t,e){var i=t.className,r=i&&i.baseVal!==b;return e===b?r?i.baseVal:i:void(r?i.baseVal=e:t.className=e)}function y(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?w.parseJSON(t):t:e):t}catch(i){return t}}function x(t,e){e(t);for(var i=0,r=t.childNodes.length;r>i;i++)x(t.childNodes[i],e)}var b,T,w,S,M,C,P=[],E=P.slice,A=P.filter,L=window.document,R={},O={},I={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},j=/^\s*<(\w+|!)[^>]*>/,k=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,B=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,D=/([A-Z])/g,N=["val","css","html","text","data","width","height","offset"],U=["after","prepend","before","append"],G=L.createElement("table"),J=L.createElement("tr"),W={tr:L.createElement("tbody"),tbody:G,thead:G,tfoot:G,td:J,th:J,"*":L.createElement("div")},V=/complete|loaded|interactive/,H=/^[\w-]*$/,X={},$=X.toString,z={},Y=L.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},q=Array.isArray||function(t){return t instanceof Array};return z.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var r,s=t.parentNode,n=!s;return n&&(s=Y).appendChild(t),r=~z.qsa(s,e).indexOf(t),n&&Y.removeChild(t),r},M=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return A.call(t,function(e,i){return t.indexOf(e)==i})},z.fragment=function(t,e,i){var r,s,a;return k.test(t)&&(r=w(L.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(B,"<$1></$2>")),e===b&&(e=j.test(t)&&RegExp.$1),e in W||(e="*"),a=W[e],a.innerHTML=""+t,r=w.each(E.call(a.childNodes),function(){a.removeChild(this)})),n(i)&&(s=w(r),w.each(i,function(t,e){N.indexOf(t)>-1?s[t](e):s.attr(t,e)})),r},z.Z=function(t,e){return t=t||[],t.__proto__=w.fn,t.selector=e||"",t},z.isZ=function(t){return t instanceof z.Z},z.init=function(t,i){var r;if(!t)return z.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&j.test(t))r=z.fragment(t,RegExp.$1,i),t=null;else{if(i!==b)return w(i).find(t);r=z.qsa(L,t)}else{if(e(t))return w(L).ready(t);if(z.isZ(t))return t;if(q(t))r=o(t);else if(s(t))r=[t],t=null;else if(j.test(t))r=z.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==b)return w(i).find(t);r=z.qsa(L,t)}}return z.Z(r,t)},w=function(t,e){return z.init(t,e)},w.extend=function(t){var e,i=E.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){f(t,i,e)}),t},z.qsa=function(t,e){var i,s="#"==e[0],n=!s&&"."==e[0],a=s||n?e.slice(1):e,o=H.test(a);return r(t)&&o&&s?(i=t.getElementById(a))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:E.call(o&&!s?n?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},w.contains=L.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},w.type=t,w.isFunction=e,w.isWindow=i,w.isArray=q,w.isPlainObject=n,w.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},w.inArray=function(t,e,i){return P.indexOf.call(e,t,i)},w.camelCase=M,w.trim=function(t){return null==t?"":String.prototype.trim.call(t)},w.uuid=0,w.support={},w.expr={},w.map=function(t,e){var i,r,s,n=[];if(a(t))for(r=0;r<t.length;r++)i=e(t[r],r),null!=i&&n.push(i);else for(s in t)i=e(t[s],s),null!=i&&n.push(i);return h(n)},w.each=function(t,e){var i,r;if(a(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(r in t)if(e.call(t[r],r,t[r])===!1)return t;return t},w.grep=function(t,e){return A.call(t,e)},window.JSON&&(w.parseJSON=JSON.parse),w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),w.fn={forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,indexOf:P.indexOf,concat:P.concat,map:function(t){return w(w.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return w(E.apply(this,arguments))},ready:function(t){return V.test(L.readyState)&&L.body?t(w):L.addEventListener("DOMContentLoaded",function(){t(w)},!1),this},get:function(t){return t===b?E.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):w(A.call(this,function(e){return z.matches(e,t)}))},add:function(t,e){return w(C(this.concat(w(t,e))))},is:function(t){return this.length>0&&z.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==b)this.each(function(e){t.call(this,e)||i.push(this)});else{var r="string"==typeof t?this.filter(t):a(t)&&e(t.item)?E.call(t):w(t);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return w(i)},has:function(t){return this.filter(function(){return s(t)?w.contains(this,t):w(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:w(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:w(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?w(t).filter(function(){var t=this;return P.some.call(i,function(e){return w.contains(e,t)})}):1==this.length?w(z.qsa(this[0],t)):this.map(function(){return z.qsa(this,t)}):[]},closest:function(t,e){var i=this[0],s=!1;for("object"==typeof t&&(s=w(t));i&&!(s?s.indexOf(i)>=0:z.matches(i,t));)i=i!==e&&!r(i)&&i.parentNode;return w(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=w.map(i,function(t){return(t=t.parentNode)&&!r(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(C(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return E.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return A.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return w.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=d(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var r=w(t).get(0),s=r.parentNode||this.length>1;return this.each(function(e){w(this).wrapAll(i?t.call(this,e):s?r.cloneNode(!0):r)})},wrapAll:function(t){if(this[0]){w(this[0]).before(t=w(t));for(var e;(e=t.children()).length;)t=e.first();w(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var r=w(this),s=r.contents(),n=i?t.call(this,e):t;s.length?s.wrapAll(n):r.append(n)})},unwrap:function(){return this.parent().each(function(){w(this).replaceWith(w(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=w(this);(t===b?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return w(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return w(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;w(this).empty().append(m(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=m(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this[0].textContent:null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(s(t))for(T in t)v(this,T,t[T]);else v(this,t,m(this,e,i,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:b},removeAttr:function(t){return this.each(function(){1===this.nodeType&&v(this,t)})},prop:function(t,e){return t=Q[t]||t,1 in arguments?this.each(function(i){this[t]=m(this,e,i,this[t])}):this[0]&&this[0][t]},data:function(t,e){var i="data-"+t.replace(D,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,e):this.attr(i);return null!==r?y(r):b},val:function(t){return 0 in arguments?this.each(function(e){this.value=m(this,t,e,this.value)}):this[0]&&(this[0].multiple?w(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=w(this),r=m(this,t,e,i.offset()),s=i.offsetParent().offset(),n={top:r.top-s.top,left:r.left-s.left};"static"==i.css("position")&&(n.position="relative"),i.css(n)});if(!this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var r=this[0],s=getComputedStyle(r,"");if(!r)return;if("string"==typeof e)return r.style[M(e)]||s.getPropertyValue(e);if(q(e)){var n={};return w.each(q(e)?e:[e],function(t,e){n[e]=r.style[M(e)]||s.getPropertyValue(e)}),n}}var a="";if("string"==t(e))i||0===i?a=l(e)+":"+c(e,i):this.each(function(){this.style.removeProperty(l(e))});else for(T in e)e[T]||0===e[T]?a+=l(T)+":"+c(T,e[T])+";":this.each(function(){this.style.removeProperty(l(T))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(w(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?P.some.call(this,function(t){return this.test(_(t))},u(t)):!1},addClass:function(t){return t?this.each(function(e){S=[];var i=_(this),r=m(this,t,e,i);r.split(/\s+/g).forEach(function(t){w(this).hasClass(t)||S.push(t)},this),S.length&&_(this,i+(i?" ":"")+S.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===b?_(this,""):(S=_(this),m(this,t,e,S).split(/\s+/g).forEach(function(t){S=S.replace(u(t)," ")}),void _(this,S.trim()))})},toggleClass:function(t,e){return t?this.each(function(i){var r=w(this),s=m(this,t,i,_(this));s.split(/\s+/g).forEach(function(t){(e===b?!r.hasClass(t):e)?r.addClass(t):r.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===b?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===b?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),r=F.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(w(t).css("margin-top"))||0,i.left-=parseFloat(w(t).css("margin-left"))||0,r.top+=parseFloat(w(e[0]).css("border-top-width"))||0,r.left+=parseFloat(w(e[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||L.body;t&&!F.test(t.nodeName)&&"static"==w(t).css("position");)t=t.offsetParent;return t})}},w.fn.detach=w.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});w.fn[t]=function(s){var n,a=this[0];return s===b?i(a)?a["inner"+e]:r(a)?a.documentElement["scroll"+e]:(n=this.offset())&&n[t]:this.each(function(e){a=w(this),a.css(t,m(this,s,e,a[t]()))})}}),U.forEach(function(e,i){var r=i%2;w.fn[e]=function(){var e,s,n=w.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:z.fragment(i)}),a=this.length>1;return n.length<1?this:this.each(function(t,e){s=r?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var o=w.contains(L.documentElement,s);n.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!s)return w(t).remove();s.insertBefore(t,e),o&&x(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},w.fn[r?e+"To":"insert"+(i?"Before":"After")]=function(t){return w(t)[e](this),this}}),z.Z.prototype=w.fn,z.uniq=C,z.deserializeValue=y,w.zepto=z,w}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(t){return t._zid||(t._zid=d++)}function i(t,i,n,a){if(i=r(i),i.ns)var o=s(i.ns);return(m[e(t)]||[]).filter(function(t){return!(!t||i.e&&t.e!=i.e||i.ns&&!o.test(t.ns)||n&&e(t.fn)!==e(n)||a&&t.sel!=a)})}function r(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function n(t,e){return t.del&&!_&&t.e in y||!!e}function a(t){return x[t]||_&&y[t]||t}function o(i,s,o,h,u,d,p){var f=e(i),g=m[f]||(m[f]=[]);s.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(o);var s=r(e);s.fn=o,s.sel=u,s.e in x&&(o=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?s.fn.apply(this,arguments):void 0}),s.del=d;var f=d||o;s.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=h;var e=f.apply(i,t._args==c?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},s.i=g.length,g.push(s),"addEventListener"in i&&i.addEventListener(a(s.e),s.proxy,n(s,p))})}function h(t,r,s,o,h){var l=e(t);(r||"").split(/\s/).forEach(function(e){i(t,e,s,o).forEach(function(e){delete m[l][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,n(e,h))})})}function l(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(S,function(t,r){var s=i[t];e[t]=function(){return this[r]=b,s&&s.apply(i,arguments)},e[r]=T}),(i.defaultPrevented!==c?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=b)),e}function u(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===c||(i[e]=t[e]);return l(i,t)}var c,d=1,p=Array.prototype.slice,f=t.isFunction,g=function(t){return"string"==typeof t},m={},v={},_="onfocusin"in window,y={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:o,remove:h},t.proxy=function(i,r){var s=2 in arguments&&p.call(arguments,2);if(f(i)){var n=function(){return i.apply(r,s?s.concat(p.call(arguments)):arguments)};return n._zid=e(i),n}if(g(r))return s?(s.unshift(i[r],i),t.proxy.apply(null,s)):t.proxy(i[r],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,r){return this.on(t,e,i,r,1)};var b=function(){return!0},T=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,r,s,n){var a,l,d=this;return e&&!g(e)?(t.each(e,function(t,e){d.on(t,i,r,e,n)}),d):(g(i)||f(s)||s===!1||(s=r,r=i,i=c),(f(r)||r===!1)&&(s=r,r=c),s===!1&&(s=T),d.each(function(c,d){n&&(a=function(t){return h(d,t.type,s),s.apply(this,arguments)}),i&&(l=function(e){var r,n=t(e.target).closest(i,d).get(0);return n&&n!==d?(r=t.extend(u(e),{currentTarget:n,liveFired:d}),(a||s).apply(n,[r].concat(p.call(arguments,1)))):void 0}),o(d,e,s,r,i,l||a)}))},t.fn.off=function(e,i,r){var s=this;return e&&!g(e)?(t.each(e,function(t,e){s.off(t,i,e)}),s):(g(i)||f(r)||r===!1||(r=i,i=c),r===!1&&(r=T),s.each(function(){h(this,e,r,i)}))},t.fn.trigger=function(e,i){return e=g(e)||t.isPlainObject(e)?t.Event(e):l(e),e._args=i,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,r){var s,n;return this.each(function(a,o){s=u(g(e)?t.Event(e):e),s._args=r,s.target=o,t.each(i(o,e.type||e),function(t,e){return n=e.proxy(s),s.isImmediatePropagationStopped()?!1:void 0})}),n},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){g(t)||(e=t,t=e.type);var i=document.createEvent(v[t]||"Events"),r=!0;if(e)for(var s in e)"bubbles"==s?r=!!e[s]:i[s]=e[s];return i.initEvent(t,r,!0),l(i)}}(Zepto),function(t){function e(e,i,r){var s=t.Event(i);return t(e).trigger(s,r),!s.isDefaultPrevented()}function i(t,i,r,s){return t.global?e(i||_,r,s):void 0}function r(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function s(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function n(t,e){var r=e.context;return e.beforeSend.call(r,t,e)===!1||i(e,r,"ajaxBeforeSend",[t,e])===!1?!1:void i(e,r,"ajaxSend",[t,e])}function a(t,e,r,s){var n=r.context,a="success";r.success.call(n,t,a,e),s&&s.resolveWith(n,[t,a,e]),i(r,n,"ajaxSuccess",[e,r,t]),h(a,e,r)}function o(t,e,r,s,n){var a=s.context;s.error.call(a,r,e,t),n&&n.rejectWith(a,[r,e,t]),i(s,a,"ajaxError",[r,s,t||e]),h(e,r,s)}function h(t,e,r){var n=r.context;r.complete.call(n,e,t),i(r,n,"ajaxComplete",[e,r]),s(r)}function l(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==w?"html":t==T?"json":x.test(t)?"script":b.test(t)&&"xml")||"text"}function c(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function d(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=c(e.url,e.data),e.data=void 0)}function p(e,i,r,s){return t.isFunction(i)&&(s=r,r=i,i=void 0),t.isFunction(r)||(s=r,r=void 0),{url:e,data:i,success:r,dataType:s}}function f(e,i,r,s){var n,a=t.isArray(i),o=t.isPlainObject(i);t.each(i,function(i,h){n=t.type(h),s&&(i=r?s:s+"["+(o||"object"==n||"array"==n?i:"")+"]"),!s&&a?e.add(h.name,h.value):"array"==n||!r&&"object"==n?f(e,h,r,i):e.add(i,h)})}var g,m,v=0,_=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,T="application/json",w="text/html",S=/^\s*$/;t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var r,s,h=e.jsonpCallback,l=(t.isFunction(h)?h():h)||"jsonp"+ ++v,u=_.createElement("script"),c=window[l],d=function(e){t(u).triggerHandler("error",e||"abort")},p={abort:d};return i&&i.promise(p),t(u).on("load error",function(n,h){clearTimeout(s),t(u).off().remove(),"error"!=n.type&&r?a(r[0],p,e,i):o(null,h||"error",p,e,i),window[l]=c,r&&t.isFunction(c)&&c(r[0]),c=r=void 0}),n(p,e)===!1?(d("abort"),p):(window[l]=function(){r=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),_.head.appendChild(u),e.timeout>0&&(s=setTimeout(function(){d("timeout")},e.timeout)),p)},t.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===i[g]&&(i[g]=t.ajaxSettings[g]);r(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),d(i);var h=i.dataType,p=/\?.+=\?/.test(i.url);if(p&&(h="jsonp"),i.cache!==!1&&(e&&e.cache===!0||"script"!=h&&"jsonp"!=h)||(i.url=c(i.url,"_="+Date.now())),"jsonp"==h)return p||(i.url=c(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),t.ajaxJSONP(i,s);var f,v=i.accepts[h],_={},y=function(t,e){_[t.toLowerCase()]=[t,e]},x=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,b=i.xhr(),T=b.setRequestHeader;if(s&&s.promise(b),i.crossDomain||y("X-Requested-With","XMLHttpRequest"),y("Accept",v||"*/*"),(v=i.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(v)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&y("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(m in i.headers)y(m,i.headers[m]);if(b.setRequestHeader=y,b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=l,clearTimeout(f);var e,r=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==x){h=h||u(i.mimeType||b.getResponseHeader("content-type")),e=b.responseText;try{"script"==h?(1,eval)(e):"xml"==h?e=b.responseXML:"json"==h&&(e=S.test(e)?null:t.parseJSON(e))}catch(n){r=n}r?o(r,"parsererror",b,i,s):a(e,b,i,s)}else o(b.statusText||null,b.status?"error":"abort",b,i,s)}},n(b,i)===!1)return b.abort(),o(null,"abort",b,i,s),b;if(i.xhrFields)for(m in i.xhrFields)b[m]=i.xhrFields[m];var w="async"in i?i.async:!0;b.open(i.type,i.url,w,i.username,i.password);for(m in _)T.apply(b,_[m]);return i.timeout>0&&(f=setTimeout(function(){b.onreadystatechange=l,b.abort(),o(null,"timeout",b,i,s)},i.timeout)),b.send(i.data?i.data:null),b},t.get=function(){return t.ajax(p.apply(null,arguments))},t.post=function(){var e=p.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=p.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,r){if(!this.length)return this;var s,n=this,a=e.split(/\s/),o=p(e,i,r),h=o.success;return a.length>1&&(o.url=a[0],s=a[1]),o.success=function(e){n.html(s?t("<div>").html(e.replace(y,"")).find(s):e),h&&h.apply(n,arguments)},t.ajax(o),this};var M=encodeURIComponent;t.param=function(t,e){var i=[];return i.add=function(t,e){this.push(M(t)+"="+M(e))},f(i,t,e),i.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,i=[];return t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var r=e.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&("radio"!=r&&"checkbox"!=r||this.checked)&&i.push({name:e.attr("name"),value:e.val()})}),i},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,i){return e=e||[],t.extend(e,t.fn),e.selector=i||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var i=getComputedStyle;window.getComputedStyle=function(t){try{return i(t)}catch(e){return null}}}}(Zepto);var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},s=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},n=1e-10,a=i._internals,o=a.isSelector,h=a.isArray,l=s.prototype=i.to({},.1,{}),u=[];s.version="1.13.1",l.constructor=s,l.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.lagSmoothing=i.lagSmoothing,s.ticker=i.ticker,s.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(t,e){var r,s=this.ratio;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(r in t)this.vars[r]=t[r];if(this._initted)if(e)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var n=this._time;this.render(0,!0,!1),this._initted=!1,this.render(n,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var a,o=1/(1-s),h=this._firstPT;h;)a=h.s+h.c,h.c*=o,h.s=a-h.c,h=h._next}return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,s,o,h,l,c,d,p,f=this._dirty?this.totalDuration():this._totalDuration,g=this._time,m=this._totalTime,v=this._cycle,_=this._duration,y=this._rawPrevTime;if(t>=f?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=_,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,s="onComplete"),0===_&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>y||y===n)&&y!==t&&(i=!0,y>n&&(s="onReverseComplete")),this._rawPrevTime=p=!e||t||y===t?t:n)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===_&&y>0&&y!==n)&&(s="onReverseComplete",r=this._reversed),0>t?(this._active=!1,0===_&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=p=!e||t||y===t?t:n)):this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(h=_+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=_-this._time),this._time>_?this._time=_:0>this._time&&(this._time=0)),this._easeType?(l=this._time/_,c=this._easeType,d=this._easePower,(1===c||3===c&&l>=.5)&&(l=1-l),3===c&&(l*=2),1===d?l*=l:2===d?l*=l*l:3===d?l*=l*l*l:4===d&&(l*=l*l*l*l),this.ratio=1===c?1-l:2===c?l:.5>this._time/_?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/_)),g===this._time&&!i&&v===this._cycle)return m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u)),void 0;if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=m,this._rawPrevTime=y,this._cycle=v,a.lazyTweens.push(this),this._lazy=t,void 0;this._time&&!r?this.ratio=this._ease.getRatio(this._time/_):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,i):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===_)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==m||r)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u)),this._cycle!==v&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||u)),s&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||u),0===_&&this._rawPrevTime===n&&p!==n&&(this._rawPrevTime=0))},s.to=function(t,e,i){return new s(t,e,i)},s.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(t,e,i)},s.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new s(t,e,r)},s.staggerTo=s.allTo=function(t,e,n,a,l,c,d){a=a||0;var p,f,g,m,v=n.delay||0,_=[],y=function(){n.onComplete&&n.onComplete.apply(n.onCompleteScope||this,arguments),l.apply(d||this,c||u)};for(h(t)||("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=r(t))),p=t.length,g=0;p>g;g++){f={};for(m in n)f[m]=n[m];f.delay=v,g===p-1&&l&&(f.onComplete=y),_[g]=new s(t[g],e,f),v+=a}return _},s.staggerFrom=s.allFrom=function(t,e,i,r,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(t,e,i,r,n,a,o)},s.staggerFromTo=s.allFromTo=function(t,e,i,r,n,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,s.staggerTo(t,e,r,n,a,o,h)},s.delayedCall=function(t,e,i,r,n){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:r,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:r,immediateRender:!1,useFrames:n,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var c=function(t,e){for(var r=[],s=0,n=t._first;n;)n instanceof i?r[s++]=n:(e&&(r[s++]=n),r=r.concat(c(n,e)),s=r.length),n=n._next;return r},d=s.getAllTweens=function(e){return c(t._rootTimeline,e).concat(c(t._rootFramesTimeline,e))};s.killAll=function(t,i,r,s){null==i&&(i=!0),null==r&&(r=!0);var n,a,o,h=d(0!=s),l=h.length,u=i&&r&&s;for(o=0;l>o;o++)a=h[o],(u||a instanceof e||(n=a.target===a.vars.onComplete)&&r||i&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var n,l,u,c,d,p=a.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),o(t)&&(t=r(t)),h(t))for(c=t.length;--c>-1;)s.killChildTweensOf(t[c],e);else{n=[];for(u in p)for(l=p[u].target.parentNode;l;)l===t&&(n=n.concat(p[u].tweens)),l=l.parentNode;for(d=n.length,c=0;d>c;c++)e&&n[c].totalTime(n[c].totalDuration()),n[c]._enabled(!1,!1)
}}};var p=function(t,i,r,s){i=i!==!1,r=r!==!1,s=s!==!1;for(var n,a,o=d(s),h=i&&r&&s,l=o.length;--l>-1;)a=o[l],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&r||i&&!n)&&a.paused(t)};return s.pauseAll=function(t,e,i){p(!0,t,e,i)},s.resumeAll=function(t,e,i){p(!1,t,e,i)},s.globalTimeScale=function(e){var r=t._rootTimeline,s=i.ticker.time;return arguments.length?(e=e||n,r._startTime=s-(s-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,s=i.ticker.frame,r._startTime=s-(s-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},l.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},l.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},l.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,s=this.vars;for(r in s)i=s[r],o(i)&&-1!==i.join("").indexOf("{self}")&&(s[r]=this._swapSelfInParams(i));o(s.tweens)&&this.add(s.tweens,0,s.align,s.stagger)},s=1e-10,n=i._internals,a=n.isSelector,o=n.isArray,h=n.lazyTweens,l=n.lazyRender,u=[],c=_gsScope._gsDefine.globals,d=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p=function(t,e,i,r){t._timeline.pause(t._startTime),e&&e.apply(r||t._timeline,i||u)},f=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},g=r.prototype=new e;return r.version="1.13.1",g.constructor=r,g.kill()._gc=!1,g.to=function(t,e,r,s){var n=r.repeat&&c.TweenMax||i;return e?this.add(new n(t,e,r),s):this.set(t,r,s)},g.from=function(t,e,r,s){return this.add((r.repeat&&c.TweenMax||i).from(t,e,r),s)},g.fromTo=function(t,e,r,s,n){var a=s.repeat&&c.TweenMax||i;return e?this.add(a.fromTo(t,e,r,s),n):this.set(t,s,n)},g.staggerTo=function(t,e,s,n,o,h,l,u){var c,p=new r({onComplete:h,onCompleteParams:l,onCompleteScope:u,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=f(t)),n=n||0,c=0;t.length>c;c++)s.startAt&&(s.startAt=d(s.startAt)),p.to(t[c],e,d(s),c*n);return this.add(p,o)},g.staggerFrom=function(t,e,i,r,s,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,s,n,a,o)},g.staggerFromTo=function(t,e,i,r,s,n,a,o,h){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,s,n,a,o,h)},g.call=function(t,e,r,s){return this.add(i.delayedCall(0,t,e,r),s)},g.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var s,n,a=new r(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,s=o._first;s;)n=s._next,e&&s instanceof i&&s.target===s.vars.onComplete||a.add(s,s._startTime-s._delay),s=n;return o.add(a,0),a},g.add=function(s,n,a,h){var l,u,c,d,p,f;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,s)),!(s instanceof t)){if(s instanceof Array||s&&s.push&&o(s)){for(a=a||"normal",h=h||0,l=n,u=s.length,c=0;u>c;c++)o(d=s[c])&&(d=new r({tweens:d})),this.add(d,l),"string"!=typeof d&&"function"!=typeof d&&("sequence"===a?l=d._startTime+d.totalDuration()/d._timeScale:"start"===a&&(d._startTime-=d.delay())),l+=h;return this._uncache(!0)}if("string"==typeof s)return this.addLabel(s,n);if("function"!=typeof s)throw"Cannot add "+s+" into the timeline; it is not a tween, timeline, function, or string.";s=i.delayedCall(0,s)}if(e.prototype.add.call(this,s,n),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(p=this,f=p.rawTime()>s._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return this},g.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array||e&&e.push&&o(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},g._remove=function(t,i){e.prototype._remove.call(this,t,i);var r=this._last;return r?this._time>r._startTime+r._totalDuration/r._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},g.insert=g.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},g.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},g.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},g.addPause=function(t,e,i,r){return this.call(p,["{self}",e,i,r],this,t)},g.removeLabel=function(t){return delete this._labels[t],this},g.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},g._parseTimeOrLabel=function(e,i,r,s){var n;if(s instanceof t&&s.timeline===this)this.remove(s);else if(s&&(s instanceof Array||s.push&&o(s)))for(n=s.length;--n>-1;)s[n]instanceof t&&s[n].timeline===this&&this.remove(s[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(n=e.indexOf("="),-1===n)return null==this._labels[e]?r?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,r):this.duration()}return Number(e)+i},g.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(t,e){return this.play(t,e)},g.gotoAndStop=function(t,e){return this.pause(t,e)},g.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,a,o,c,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,f=this._startTime,g=this._timeScale,m=this._paused;if(t>=d?(this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime||this._rawPrevTime===s)&&this._rawPrevTime!==t&&this._first&&(c=!0,this._rawPrevTime>s&&(o="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,t=d+1e-4):1e-7>t?(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==s&&(this._rawPrevTime>0||0>t&&this._rawPrevTime>=0))&&(o="onReverseComplete",n=this._reversed),0>t?(this._active=!1,this._rawPrevTime>=0&&this._first&&(c=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,t=0,this._initted||(c=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==p&&this._first||i||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||u)),this._time>=p)for(r=this._first;r&&(a=r._next,!this._paused||m);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;else for(r=this._last;r&&(a=r._prev,!this._paused||m);)(r._active||p>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=a;this._onUpdate&&(e||(h.length&&l(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||u))),o&&(this._gc||(f===this._startTime||g!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(n&&(h.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||u)))}},g._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},g.getChildren=function(t,e,r,s){s=s||-9999999999;for(var n=[],a=this._first,o=0;a;)s>a._startTime||(a instanceof i?e!==!1&&(n[o++]=a):(r!==!1&&(n[o++]=a),t!==!1&&(n=n.concat(a.getChildren(!0,e,r)),o=n.length))),a=a._next;return n},g.getTweensOf=function(t,e){var r,s,n=this._gc,a=[],o=0;for(n&&this._enabled(!0,!0),r=i.getTweensOf(t),s=r.length;--s>-1;)(r[s].timeline===this||e&&this._contains(r[s]))&&(a[o++]=r[s]);return n&&this._enabled(!1,!0),a},g._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},g.shiftChildren=function(t,e,i){i=i||0;for(var r,s=this._first,n=this._labels;s;)s._startTime>=i&&(s._startTime+=t),s=s._next;if(e)for(r in n)n[r]>=i&&(n[r]+=t);return this._uncache(!0)},g._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,s=!1;--r>-1;)i[r]._kill(t,e)&&(s=!0);return s},g.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},g._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},g.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,s=this._last,n=999999999999;s;)e=s._prev,s._dirty&&s.totalDuration(),s._startTime>n&&this._sortChildren&&!s._paused?this.add(s,s._startTime-s._delay):n=s._startTime,0>s._startTime&&!s._paused&&(r-=s._startTime,this._timeline.smoothChildTiming&&(this._startTime+=s._startTime/this._timeScale),this.shiftChildren(-s._startTime,!1,-9999999999),n=0),i=s._startTime+s._totalDuration/s._timeScale,i>r&&(r=i),s=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},g.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},r},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},s=1e-10,n=[],a=e._internals,o=a.lazyTweens,h=a.lazyRender,l=new i(null,null,1,0),u=r.prototype=new t;return u.constructor=r,u.kill()._gc=!1,r.version="1.13.1",u.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},u.addCallback=function(t,i,r,s){return this.add(e.delayedCall(0,t,r,s),i)},u.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,s=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===s&&i[r]._enabled(!1,!1);return this},u.tweenTo=function(t,i){i=i||{};var r,s,a,o={ease:l,overwrite:i.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(s in i)o[s]=i[s];return o.time=this._parseTimeOrLabel(t),r=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,a=new e(this,r,o),o.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&r===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||a,i.onStartParams||n)},a},u.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},u.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,a,l,u,c,d,p=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,g=this._time,m=this._totalTime,v=this._startTime,_=this._timeScale,y=this._rawPrevTime,x=this._paused,b=this._cycle;if(t>=p?(this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,u="onComplete",0===this._duration&&(0===t||0>y||y===s)&&y!==t&&this._first&&(c=!0,y>s&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=f,t=f+1e-4)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==g||0===f&&y!==s&&(y>0||0>t&&y>=0)&&!this._locked)&&(u="onReverseComplete",a=this._reversed),0>t?(this._active=!1,y>=0&&this._first&&(c=!0),this._rawPrevTime=t):(this._rawPrevTime=f||!e||t||this._rawPrevTime===t?t:s,t=0,this._initted||(c=!0))):(0===f&&0>y&&(c=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(d=f+this._repeatDelay,this._cycle=this._totalTime/d>>0,0!==this._cycle&&this._cycle===this._totalTime/d&&this._cycle--,this._time=this._totalTime-this._cycle*d,this._yoyo&&0!==(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,t=f+1e-4):0>this._time?this._time=t=0:t=this._time))),this._cycle!==b&&!this._locked){var T=this._yoyo&&0!==(1&b),w=T===(this._yoyo&&0!==(1&this._cycle)),S=this._totalTime,M=this._cycle,C=this._rawPrevTime,P=this._time;if(this._totalTime=b*f,b>this._cycle?T=!T:this._totalTime+=f,this._time=g,this._rawPrevTime=0===f?y-1e-4:y,this._cycle=b,this._locked=!0,g=T?0:f,this.render(g,e,0===f),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||n),w&&(g=T?f+1e-4:-1e-4,this.render(g,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=P,this._totalTime=S,this._cycle=M,this._rawPrevTime=C}if(!(this._time!==g&&this._first||i||c))return m!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n)),void 0;if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||n)),this._time>=g)for(r=this._first;r&&(l=r._next,!this._paused||x);)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=l;else for(r=this._last;r&&(l=r._prev,!this._paused||x);)(r._active||g>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=l;this._onUpdate&&(e||(o.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||n))),u&&(this._locked||this._gc||(v===this._startTime||_!==this._timeScale)&&(0===this._time||p>=this.totalDuration())&&(a&&(o.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[u]&&this.vars[u].apply(this.vars[u+"Scope"]||this,this.vars[u+"Params"]||n)))},u.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,s,n=[],a=this.getChildren(t,e,i),o=0,h=a.length;for(r=0;h>r;r++)s=a[r],s.isActive()&&(n[o++]=s);return n},u.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;r>e;e++)if(i[e].time>t)return i[e].name;return null},u.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},u.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},u.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},u.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},u.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},u.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],i=[],r=[],s={},n=function(t,e,i,r){this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},a=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",o=function(t,e,i,r){var s={a:t},n={},a={},o={c:r},h=(t+e)/2,l=(e+i)/2,u=(i+r)/2,c=(h+l)/2,d=(l+u)/2,p=(d-c)/8;return s.b=h+(t-h)/4,n.b=c+p,s.c=n.a=(s.b+n.b)/2,n.c=a.a=(c+d)/2,a.b=d-p,o.b=u+(r-u)/4,a.c=o.a=(a.b+o.b)/2,[s,n,a,o]},h=function(t,s,n,a,h){var l,u,c,d,p,f,g,m,v,_,y,x,b,T=t.length-1,w=0,S=t[0].a;for(l=0;T>l;l++)p=t[w],u=p.a,c=p.d,d=t[w+1].d,h?(y=e[l],x=i[l],b=.25*(x+y)*s/(a?.5:r[l]||.5),f=c-(c-u)*(a?.5*s:0!==y?b/y:0),g=c+(d-c)*(a?.5*s:0!==x?b/x:0),m=c-(f+((g-f)*(3*y/(y+x)+.5)/4||0))):(f=c-.5*(c-u)*s,g=c+.5*(d-c)*s,m=c-(f+g)/2),f+=m,g+=m,p.c=v=f,p.b=0!==l?S:S=p.a+.6*(p.c-p.a),p.da=c-u,p.ca=v-u,p.ba=S-u,n?(_=o(u,S,v,c),t.splice(w,1,_[0],_[1],_[2],_[3]),w+=4):w++,S=g;p=t[w],p.b=S,p.c=S+.4*(p.d-S),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=S-p.a,n&&(_=o(p.a,S,p.c,p.d),t.splice(w,1,_[0],_[1],_[2],_[3]))},l=function(t,r,s,a){var o,h,l,u,c,d,p=[];if(a)for(t=[a].concat(t),h=t.length;--h>-1;)"string"==typeof(d=t[h][r])&&"="===d.charAt(1)&&(t[h][r]=a[r]+Number(d.charAt(0)+d.substr(2)));if(o=t.length-2,0>o)return p[0]=new n(t[0][r],0,0,t[-1>o?0:1][r]),p;for(h=0;o>h;h++)l=t[h][r],u=t[h+1][r],p[h]=new n(l,0,0,u),s&&(c=t[h+2][r],e[h]=(e[h]||0)+(u-l)*(u-l),i[h]=(i[h]||0)+(c-u)*(c-u));return p[h]=new n(t[h][r],0,0,t[h+1][r]),p},u=function(t,n,o,u,c,d){var p,f,g,m,v,_,y,x,b={},T=[],w=d||t[0];c="string"==typeof c?","+c+",":a,null==n&&(n=1);for(f in t[0])T.push(f);if(t.length>1){for(x=t[t.length-1],y=!0,p=T.length;--p>-1;)if(f=T[p],Math.abs(w[f]-x[f])>.05){y=!1;break}y&&(t=t.concat(),d&&t.unshift(d),t.push(t[1]),d=t[t.length-3])}for(e.length=i.length=r.length=0,p=T.length;--p>-1;)f=T[p],s[f]=-1!==c.indexOf(","+f+","),b[f]=l(t,f,s[f],d);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!u){for(p=T.length;--p>-1;)if(s[f])for(g=b[T[p]],_=g.length-1,m=0;_>m;m++)v=g[m+1].da/i[m]+g[m].da/e[m],r[m]=(r[m]||0)+v*v;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=T.length,m=o?4:1;--p>-1;)f=T[p],g=b[f],h(g,n,o,u,s[f]),y&&(g.splice(0,m),g.splice(g.length-m,m));return b},c=function(t,e,i){e=e||"soft";var r,s,a,o,h,l,u,c,d,p,f,g={},m="cubic"===e?3:2,v="soft"===e,_=[];if(v&&i&&(t=[i].concat(t)),null==t||m+1>t.length)throw"invalid Bezier data";for(d in t[0])_.push(d);for(l=_.length;--l>-1;){for(d=_[l],g[d]=h=[],p=0,c=t.length,u=0;c>u;u++)r=null==i?t[u][d]:"string"==typeof(f=t[u][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&u>1&&c-1>u&&(h[p++]=(r+h[p-2])/2),h[p++]=r;for(c=p-m+1,p=0,u=0;c>u;u+=m)r=h[u],s=h[u+1],a=h[u+2],o=2===m?0:h[u+3],h[p++]=f=3===m?new n(r,s,a,o):new n(r,(2*s+r)/3,(2*s+a)/3,a);h.length=p}return g},d=function(t,e,i){for(var r,s,n,a,o,h,l,u,c,d,p,f=1/i,g=t.length;--g>-1;)for(d=t[g],n=d.a,a=d.d-n,o=d.c-n,h=d.b-n,r=s=0,u=1;i>=u;u++)l=f*u,c=1-l,r=s-(s=(l*l*a+3*c*(l*o+c*h))*l),p=g*i+u-1,e[p]=(e[p]||0)+r*r},p=function(t,e){e=e>>0||6;var i,r,s,n,a=[],o=[],h=0,l=0,u=e-1,c=[],p=[];for(i in t)d(t[i],a,e);for(s=a.length,r=0;s>r;r++)h+=Math.sqrt(a[r]),n=r%e,p[n]=h,n===u&&(l+=h,n=r/e>>0,c[n]=p,o[n]=l,h=0,p=[]);return{length:l,lengths:o,segments:c}},f=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,s,n,a,o,h=e.values||[],l={},d=h[0],f=e.autoRotate||i.vars.orientToBezier;this._autoRotate=f?f instanceof Array?f:[["x","y","rotation",f===!0?0:Number(f)||0]]:null;for(r in d)this._props.push(r);for(n=this._props.length;--n>-1;)r=this._props[n],this._overwriteProps.push(r),s=this._func[r]="function"==typeof t[r],l[r]=s?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),o||l[r]!==h[0][r]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?u(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):c(h,e.type,l),this._segCount=this._beziers[r].length,this._timeRes){var g=p(this._beziers,this._timeRes);this._length=g.length,this._lengths=g.lengths,this._segments=g.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(f=this._autoRotate)for(this._initialRotations=[],f[0]instanceof Array||(this._autoRotate=f=[f]),n=f.length;--n>-1;){for(a=0;3>a;a++)r=f[n][a],this._func[r]="function"==typeof t[r]?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]:!1;r=f[n][2],this._initialRotations[n]=this._func[r]?this._func[r].call(this._target):this._target[r]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,r,s,n,a,o,h,l,u,c,d=this._segCount,p=this._func,f=this._target,g=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,s=this._li,e>this._l2&&d-1>s){for(l=d-1;l>s&&e>=(this._l2=u[++s]););this._l1=u[s-1],this._li=s,this._curSeg=c=this._segments[s],this._s2=c[this._s1=this._si=0]}else if(this._l1>e&&s>0){for(;s>0&&(this._l1=u[--s])>=e;);0===s&&this._l1>e?this._l1=0:s++,this._l2=u[s],this._li=s,this._curSeg=c=this._segments[s],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=s,e-=this._l1,s=this._si,e>this._s2&&c.length-1>s){for(l=c.length-1;l>s&&e>=(this._s2=c[++s]););this._s1=c[s-1],this._si=s}else if(this._s1>e&&s>0){for(;s>0&&(this._s1=c[--s])>=e;);0===s&&this._s1>e?this._s1=0:s++,this._s2=c[s],this._si=s}o=(s+(e-this._s1)/(this._s2-this._s1))*this._prec}else i=0>e?0:e>=1?d-1:d*e>>0,o=(e-i*(1/d))*d;for(r=1-o,s=this._props.length;--s>-1;)n=this._props[s],a=this._beziers[n][i],h=(o*o*a.da+3*r*(o*a.ca+r*a.ba))*o+a.a,this._round[n]&&(h=Math.round(h)),p[n]?f[n](h):f[n]=h;if(this._autoRotate){var m,v,_,y,x,b,T,w=this._autoRotate;for(s=w.length;--s>-1;)n=w[s][2],b=w[s][3]||0,T=w[s][4]===!0?1:t,a=this._beziers[w[s][0]],m=this._beziers[w[s][1]],a&&m&&(a=a[i],m=m[i],v=a.a+(a.b-a.a)*o,y=a.b+(a.c-a.b)*o,v+=(y-v)*o,y+=(a.c+(a.d-a.c)*o-y)*o,_=m.a+(m.b-m.a)*o,x=m.b+(m.c-m.b)*o,_+=(x-_)*o,x+=(m.c+(m.d-m.c)*o-x)*o,h=g?Math.atan2(x-_,y-v)*T+b:this._initialRotations[s],p[n]?f[n](h):f[n]=h)}}}),g=f.prototype;f.bezierThrough=u,f.cubicToQuadratic=o,f._autoCSS=!0,f.quadraticToCubic=function(t,e,i){return new n(t,(2*e+t)/3,(2*e+i)/3,i)},f._cssRegister=function(){var t=_gsScope._gsDefine.globals.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,s=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,n,a,o,h){e instanceof Array&&(e={values:e}),h=new f;var l,u,c,d=e.values,p=d.length-1,g=[],m={};if(0>p)return o;for(l=0;p>=l;l++)c=i(t,d[l],a,o,h,p!==l),g[l]=c.end;for(u in e)m[u]=e[u];return m.values=g,o=new s(t,"bezier",0,0,c.pt,2),o.data=c,o.plugin=h,o.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(l=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x?[["x","y","rotation",l,!1]]:!1),m.autoRotate&&(a._transform||a._enableTransforms(!1),c.autoRotate=a._target._gsTransform),h._onInitTween(c.proxy,m,a._tween),o}})}},g._roundProps=function(t,e){for(var i=this._overwriteProps,r=i.length;--r>-1;)(t[i[r]]||t.bezier||t.bezierThrough)&&(this._round[i[r]]=e)},g._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);return this._super._kill.call(this,t)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,r,s,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o={},h=a.prototype=new t("css");h.constructor=a,a.version="1.13.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var l,u,c,d,p,f,g=/(?:\d|\-\d|\.\d|\-\.\d)+/g,m=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_=/[^\d\-\.]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,x=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,T=/alpha\(opacity *=.+?\)/i,w=/^(rgb|hsl)/,S=/([A-Z])/g,M=/-([a-z])/gi,C=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,P=function(t,e){return e.toUpperCase()},E=/(?:Left|Right|Width)/i,A=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,L=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,R=/,(?=[^\)]*(?:\(|$))/gi,O=Math.PI/180,I=180/Math.PI,j={},k=document,B=k.createElement("div"),F=k.createElement("img"),D=a._internals={_specialProps:o},N=navigator.userAgent,U=function(){var t,e=N.indexOf("Android"),i=k.createElement("div");return c=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===e||Number(N.substr(e+8,1))>3),p=c&&6>Number(N.substr(N.indexOf("Version/")+8,1)),d=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)&&(f=parseFloat(RegExp.$1)),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",t=i.getElementsByTagName("a")[0],t?/^0.55/.test(t.style.opacity):!1}(),G=function(t){return x.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},J=function(t){window.console&&console.log(t)},W="",V="",H=function(t,e){e=e||B;var i,r,s=e.style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===s[i[r]+t];);return r>=0?(V=3===r?"ms":i[r],W="-"+V.toLowerCase()+"-",V+t):null},X=k.defaultView?k.defaultView.getComputedStyle:function(){},$=a.getStyle=function(t,e,i,r,s){var n;return U||"opacity"!==e?(!r&&t.style[e]?n=t.style[e]:(i=i||X(t))?n=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(S,"-$1").toLowerCase()):t.currentStyle&&(n=t.currentStyle[e]),null==s||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:s):G(t)},z=D.convertToPixels=function(t,i,r,s,n){if("px"===s||!s)return r;if("auto"===s||!r)return 0;var o,h,l,u=E.test(i),c=t,d=B.style,p=0>r;if(p&&(r=-r),"%"===s&&-1!==i.indexOf("border"))o=r/100*(u?t.clientWidth:t.clientHeight);else{if(d.cssText="border:0 solid red;position:"+$(t,"position")+";line-height:0;","%"!==s&&c.appendChild)d[u?"borderLeftWidth":"borderTopWidth"]=r+s;else{if(c=t.parentNode||k.body,h=c._gsCache,l=e.ticker.frame,h&&u&&h.time===l)return h.width*r/100;d[u?"width":"height"]=r+s}c.appendChild(B),o=parseFloat(B[u?"offsetWidth":"offsetHeight"]),c.removeChild(B),u&&"%"===s&&a.cacheWidths!==!1&&(h=c._gsCache=c._gsCache||{},h.time=l,h.width=100*(o/r)),0!==o||n||(o=z(t,i,r,s,!0))}return p?-o:o},Y=D.calculateOffset=function(t,e,i){if("absolute"!==$(t,"position",i))return 0;var r="left"===e?"Left":"Top",s=$(t,"margin"+r,i);return t["offset"+r]-(z(t,e,parseFloat(s),s.replace(y,""))||0)},Q=function(t,e){var i,r,s={};if(e=e||X(t,null))if(i=e.length)for(;--i>-1;)s[e[i].replace(M,P)]=e.getPropertyValue(e[i]);else for(i in e)s[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===s[i]&&(s[i.replace(M,P)]=e[i]);return U||(s.opacity=G(t)),r=Se(t,e,!1),s.rotation=r.rotation,s.skewX=r.skewX,s.scaleX=r.scaleX,s.scaleY=r.scaleY,s.x=r.x,s.y=r.y,Te&&(s.z=r.z,s.rotationX=r.rotationX,s.rotationY=r.rotationY,s.scaleZ=r.scaleZ),s.filters&&delete s.filters,s},q=function(t,e,i,r,s){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||s&&s[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(_,"")?n:0:Y(t,a),void 0!==l[a]&&(o=new ce(l,a,l[a],o)));if(r)for(a in r)"className"!==a&&(h[a]=r[a]);return{difs:h,firstMPT:o}},K={width:["Left","Right"],height:["Top","Bottom"]},Z=["marginLeft","marginRight","marginTop","marginBottom"],te=function(t,e,i){var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),s=K[e],n=s.length;for(i=i||X(t,null);--n>-1;)r-=parseFloat($(t,"padding"+s[n],i,!0))||0,r-=parseFloat($(t,"border"+s[n]+"Width",i,!0))||0;return r},ee=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),r=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],s=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==s?s="0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e&&(e.oxp=-1!==r.indexOf("%"),e.oyp=-1!==s.indexOf("%"),e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(_,"")),e.oy=parseFloat(s.replace(_,""))),r+" "+s+(i.length>2?" "+i[2]:"")},ie=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},re=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},se=function(t,e,i,r){var s,n,a,o,h=1e-6;return null==t?o=e:"number"==typeof t?o=t:(s=360,n=t.split("_"),a=Number(n[0].replace(_,""))*(-1===t.indexOf("rad")?1:I)-("="===t.charAt(1)?0:e),n.length&&(r&&(r[i]=e+a),-1!==t.indexOf("short")&&(a%=s,a!==a%(s/2)&&(a=0>a?a+s:a-s)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*s)%s-(0|a/s)*s:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*s)%s-(0|a/s)*s)),o=e+a),h>o&&o>-h&&(o=0),o
},ne={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ae=function(t,e,i){return t=0>t?t+1:t>1?t-1:t,0|255*(1>6*t?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},oe=function(t){var e,i,r,s,n,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ne[t]?ne[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),r=t.charAt(3),t="#"+e+e+i+i+r+r),t=parseInt(t.substr(1),16),[t>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(g),s=Number(t[0])%360/360,n=Number(t[1])/100,a=Number(t[2])/100,i=.5>=a?a*(n+1):a+n-a*n,e=2*a-i,t.length>3&&(t[3]=Number(t[3])),t[0]=ae(s+1/3,e,i),t[1]=ae(s,e,i),t[2]=ae(s-1/3,e,i),t):(t=t.match(g)||ne.transparent,t[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):ne.black},he="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in ne)he+="|"+h+"\\b";he=RegExp(he+")","gi");var le=function(t,e,i,r){if(null==t)return function(t){return t};var s,n=e?(t.match(he)||[""])[0]:"",a=t.split(n).join("").match(v)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",u=a.length,c=u>0?a[0].replace(g,""):"";return u?s=e?function(t){var e,d,p,f;if("number"==typeof t)t+=c;else if(r&&R.test(t)){for(f=t.replace(R,"|").split("|"),p=0;f.length>p;p++)f[p]=s(f[p]);return f.join(",")}if(e=(t.match(he)||[n])[0],d=t.split(e).join("").match(v)||[],p=d.length,u>p--)for(;u>++p;)d[p]=i?d[0|(p-1)/2]:a[p];return o+d.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,d;if("number"==typeof t)t+=c;else if(r&&R.test(t)){for(n=t.replace(R,"|").split("|"),d=0;n.length>d;d++)n[d]=s(n[d]);return n.join(",")}if(e=t.match(v)||[],d=e.length,u>d--)for(;u>++d;)e[d]=i?e[0|(d-1)/2]:a[d];return o+e.join(l)+h}:function(t){return t}},ue=function(t){return t=t.split(","),function(e,i,r,s,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return s.parse(e,o,n,a)}},ce=(D._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,s,n=this.data,a=n.proxy,o=n.firstMPT,h=1e-6;o;)e=a[o.v],o.r?e=Math.round(e):h>e&&e>-h&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if(i=o.t,i.type){if(1===i.type){for(s=i.xs0+i.s+i.xs1,r=1;i.l>r;r++)s+=i["xn"+r]+i["xs"+(r+1)];i.e=s}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,r,s){this.t=t,this.p=e,this.v=i,this.r=s,r&&(r._prev=this,this._next=r)}),de=(D._parseToProxy=function(t,e,i,r,s,n){var a,o,h,l,u,c=r,d={},p={},f=i._transform,g=j;for(i._transform=null,j=e,r=u=i.parse(t,e,r,s),j=g,n&&(i._transform=f,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(1>=r.type&&(o=r.p,p[o]=r.s+r.c,d[o]=r.s,n||(l=new ce(r,"s",o,l,r.r),r.c=0),1===r.type))for(a=r.l;--a>0;)h="xn"+a,o=r.p+"_"+h,p[o]=r.data[h],d[o]=r[h],n||(l=new ce(r,h,o,l,r.rxp[h]));r=r._next}return{proxy:d,end:p,firstMPT:l,pt:u}},D.CSSPropTween=function(t,e,r,s,a,o,h,l,u,c,d){this.t=t,this.p=e,this.s=r,this.c=s,this.n=h||e,t instanceof de||n.push(this.n),this.r=l,this.type=o||0,u&&(this.pr=u,i=!0),this.b=void 0===c?r:c,this.e=void 0===d?r+s:d,a&&(this._next=a,a._prev=this)}),pe=a.parseComplex=function(t,e,i,r,s,n,a,o,h,u){i=i||n||"",a=new de(t,e,0,0,a,u?2:1,null,!1,o,i,r),r+="";var c,d,p,f,v,_,y,x,b,T,S,M,C=i.split(", ").join(",").split(" "),P=r.split(", ").join(",").split(" "),E=C.length,A=l!==!1;for((-1!==r.indexOf(",")||-1!==i.indexOf(","))&&(C=C.join(" ").replace(R,", ").split(" "),P=P.join(" ").replace(R,", ").split(" "),E=C.length),E!==P.length&&(C=(n||"").split(" "),E=C.length),a.plugin=h,a.setRatio=u,c=0;E>c;c++)if(f=C[c],v=P[c],x=parseFloat(f),x||0===x)a.appendXtra("",x,ie(v,x),v.replace(m,""),A&&-1!==v.indexOf("px"),!0);else if(s&&("#"===f.charAt(0)||ne[f]||w.test(f)))M=","===v.charAt(v.length-1)?"),":")",f=oe(f),v=oe(v),b=f.length+v.length>6,b&&!U&&0===v[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(P[c]).join("transparent")):(U||(b=!1),a.appendXtra(b?"rgba(":"rgb(",f[0],v[0]-f[0],",",!0,!0).appendXtra("",f[1],v[1]-f[1],",",!0).appendXtra("",f[2],v[2]-f[2],b?",":M,!0),b&&(f=4>f.length?1:f[3],a.appendXtra("",f,(4>v.length?1:v[3])-f,M,!1)));else if(_=f.match(g)){if(y=v.match(m),!y||y.length!==_.length)return a;for(p=0,d=0;_.length>d;d++)S=_[d],T=f.indexOf(S,p),a.appendXtra(f.substr(p,T-p),Number(S),ie(y[d],S),"",A&&"px"===f.substr(T+S.length,2),0===d),p=T+S.length;a["xs"+a.l]+=f.substr(p)}else a["xs"+a.l]+=a.l?" "+f:f;if(-1!==r.indexOf("=")&&a.data){for(M=a.xs0+a.data.s,c=1;a.l>c;c++)M+=a["xs"+c]+a.data["xn"+c];a.e=M+a["xs"+c]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},fe=9;for(h=de.prototype,h.l=h.pr=0;--fe>0;)h["xn"+fe]=0,h["xs"+fe]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,r,s,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=s,a["xn"+o]=e,a.plugin||(a.xfirst=new de(a,"xn"+o,e,i,a.xfirst||a,0,a.n,s,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=s,a)):(a["xs"+o]+=e+(r||""),a)};var ge=function(t,e){e=e||{},this.p=e.prefix?H(t)||t:t,o[t]=o[this.p]=this,this.format=e.formatter||le(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},me=D._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,s,n=t.split(","),a=e.defaultValue;for(i=i||[a],r=0;n.length>r;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||a,s=new ge(n[r],e)},ve=function(t){if(!o[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";me(t,{parser:function(t,i,r,s,n,a,h){var l=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[e];return l?(l._cssRegister(),o[r].parse(t,i,r,s,n,a,h)):(J("Error: "+e+" js file not loaded."),n)}})}};h=ge.prototype,h.parseComplex=function(t,e,i,r,s,n){var a,o,h,l,u,c,d=this.keyword;if(this.multi&&(R.test(i)||R.test(e)?(o=e.replace(R,"|").split("|"),h=i.replace(R,"|").split("|")):d&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,d&&(u=e.indexOf(d),c=i.indexOf(d),u!==c&&(i=-1===c?h:o,i[a]+=" "+d));e=o.join(", "),i=h.join(", ")}return pe(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,s,n)},h.parse=function(t,e,i,r,n,a){return this.parseComplex(t.style,this.format($(t,this.p,s,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){me(t,{parser:function(t,r,s,n,a,o){var h=new de(t,s,0,0,a,2,s,!1,i);return h.plugin=o,h.setRatio=e(t,r,n._tween,s),h},priority:i})};var _e="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),ye=H("transform"),xe=W+"transform",be=H("transformOrigin"),Te=null!==H("perspective"),we=D.Transform=function(){this.skewY=0},Se=D.getTransform=function(t,e,i,r){if(t._gsTransform&&i&&!r)return t._gsTransform;var s,n,o,h,l,u,c,d,p,f,g,m,v,_=i?t._gsTransform||new we:new we,y=0>_.scaleX,x=2e-5,b=1e5,T=179.99,w=T*O,S=Te?parseFloat($(t,be,e,!1,"0 0 0").split(" ")[2])||_.zOrigin||0:0;if(ye?s=$(t,xe,e,!0):t.currentStyle&&(s=t.currentStyle.filter.match(A),s=s&&4===s.length?[s[0].substr(4),Number(s[2].substr(4)),Number(s[1].substr(4)),s[3].substr(4),_.x||0,_.y||0].join(","):""),s&&"none"!==s&&"matrix(1, 0, 0, 1, 0, 0)"!==s){for(n=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],o=n.length;--o>-1;)h=Number(n[o]),n[o]=(l=h-(h|=0))?(0|l*b+(0>l?-.5:.5))/b+h:h;if(16===n.length){var M=n[8],C=n[9],P=n[10],E=n[12],L=n[13],R=n[14];if(_.zOrigin&&(R=-_.zOrigin,E=M*R-n[12],L=C*R-n[13],R=P*R+_.zOrigin-n[14]),!i||r||null==_.rotationX){var j,k,B,F,D,N,U,G=n[0],J=n[1],W=n[2],V=n[3],H=n[4],X=n[5],z=n[6],Y=n[7],Q=n[11],q=Math.atan2(z,P),K=-w>q||q>w;_.rotationX=q*I,q&&(F=Math.cos(-q),D=Math.sin(-q),j=H*F+M*D,k=X*F+C*D,B=z*F+P*D,M=H*-D+M*F,C=X*-D+C*F,P=z*-D+P*F,Q=Y*-D+Q*F,H=j,X=k,z=B),q=Math.atan2(M,G),_.rotationY=q*I,q&&(N=-w>q||q>w,F=Math.cos(-q),D=Math.sin(-q),j=G*F-M*D,k=J*F-C*D,B=W*F-P*D,C=J*D+C*F,P=W*D+P*F,Q=V*D+Q*F,G=j,J=k,W=B),q=Math.atan2(J,X),_.rotation=q*I,q&&(U=-w>q||q>w,F=Math.cos(-q),D=Math.sin(-q),G=G*F+H*D,k=J*F+X*D,X=J*-D+X*F,z=W*-D+z*F,J=k),U&&K?_.rotation=_.rotationX=0:U&&N?_.rotation=_.rotationY=0:N&&K&&(_.rotationY=_.rotationX=0),_.scaleX=(0|Math.sqrt(G*G+J*J)*b+.5)/b,_.scaleY=(0|Math.sqrt(X*X+C*C)*b+.5)/b,_.scaleZ=(0|Math.sqrt(z*z+P*P)*b+.5)/b,_.skewX=0,_.perspective=Q?1/(0>Q?-Q:Q):0,_.x=E,_.y=L,_.z=R}}else if(!(Te&&!r&&n.length&&_.x===n[4]&&_.y===n[5]&&(_.rotationX||_.rotationY)||void 0!==_.x&&"none"===$(t,"display",e))){var Z=n.length>=6,te=Z?n[0]:1,ee=n[1]||0,ie=n[2]||0,re=Z?n[3]:1;_.x=n[4]||0,_.y=n[5]||0,u=Math.sqrt(te*te+ee*ee),c=Math.sqrt(re*re+ie*ie),d=te||ee?Math.atan2(ee,te)*I:_.rotation||0,p=ie||re?Math.atan2(ie,re)*I+d:_.skewX||0,f=u-Math.abs(_.scaleX||0),g=c-Math.abs(_.scaleY||0),Math.abs(p)>90&&270>Math.abs(p)&&(y?(u*=-1,p+=0>=d?180:-180,d+=0>=d?180:-180):(c*=-1,p+=0>=p?180:-180)),m=(d-_.rotation)%180,v=(p-_.skewX)%180,(void 0===_.skewX||f>x||-x>f||g>x||-x>g||m>-T&&T>m&&!1|m*b||v>-T&&T>v&&!1|v*b)&&(_.scaleX=u,_.scaleY=c,_.rotation=d,_.skewX=p),Te&&(_.rotationX=_.rotationY=_.z=0,_.perspective=parseFloat(a.defaultTransformPerspective)||0,_.scaleZ=1)}_.zOrigin=S;for(o in _)x>_[o]&&_[o]>-x&&(_[o]=0)}else _={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,perspective:0,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return i&&(t._gsTransform=_),_.xPercent=_.yPercent=0,_},Me=function(t){var e,i,r=this.data,s=-r.rotation*O,n=s+r.skewX*O,a=1e5,o=(0|Math.cos(s)*r.scaleX*a)/a,h=(0|Math.sin(s)*r.scaleX*a)/a,l=(0|Math.sin(n)*-r.scaleY*a)/a,u=(0|Math.cos(n)*r.scaleY*a)/a,c=this.t.style,d=this.t.currentStyle;if(d){i=h,h=-l,l=-i,e=d.filter,c.filter="";var p,g,m=this.t.offsetWidth,v=this.t.offsetHeight,_="absolute"!==d.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+u,T=r.x+m*r.xPercent/100,w=r.y+v*r.yPercent/100;if(null!=r.ox&&(p=(r.oxp?.01*m*r.ox:r.ox)-m/2,g=(r.oyp?.01*v*r.oy:r.oy)-v/2,T+=p-(p*o+g*h),w+=g-(p*l+g*u)),_?(p=m/2,g=v/2,b+=", Dx="+(p-(p*o+g*h)+T)+", Dy="+(g-(p*l+g*u)+w)+")"):b+=", sizingMethod='auto expand')",c.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(L,b):b+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===u&&(_&&-1===b.indexOf("Dx=0, Dy=0")||x.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient("&&e.indexOf("Alpha"))&&c.removeAttribute("filter")),!_){var S,M,C,P=8>f?1:-1;for(p=r.ieOffsetX||0,g=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((0>o?-o:o)*m+(0>h?-h:h)*v))/2+T),r.ieOffsetY=Math.round((v-((0>u?-u:u)*v+(0>l?-l:l)*m))/2+w),fe=0;4>fe;fe++)M=Z[fe],S=d[M],i=-1!==S.indexOf("px")?parseFloat(S):z(this.t,M,parseFloat(S),S.replace(y,""))||0,C=i!==r[M]?2>fe?-r.ieOffsetX:-r.ieOffsetY:2>fe?p-r.ieOffsetX:g-r.ieOffsetY,c[M]=(r[M]=Math.round(i-C*(0===fe||2===fe?1:P)))+"px"}}},Ce=D.set3DTransformRatio=function(t){var e,i,r,s,n,a,o,h,l,u,c,p,f,g,m,v,_,y,x,b,T,w,S,M=this.data,C=this.t.style,P=M.rotation*O,E=M.scaleX,A=M.scaleY,L=M.scaleZ,R=M.x,I=M.y,j=M.z,k=M.perspective;if(!(1!==t&&0!==t||"auto"!==M.force3D||M.rotationY||M.rotationX||1!==L||k||j))return Pe.call(this,t),void 0;if(d){var B=1e-4;B>E&&E>-B&&(E=L=2e-5),B>A&&A>-B&&(A=L=2e-5),!k||M.z||M.rotationX||M.rotationY||(k=0)}if(P||M.skewX)y=Math.cos(P),x=Math.sin(P),e=y,n=x,M.skewX&&(P-=M.skewX*O,y=Math.cos(P),x=Math.sin(P),"simple"===M.skewType&&(b=Math.tan(M.skewX*O),b=Math.sqrt(1+b*b),y*=b,x*=b)),i=-x,a=y;else{if(!(M.rotationY||M.rotationX||1!==L||k))return C[ye]=(M.xPercent||M.yPercent?"translate("+M.xPercent+"%,"+M.yPercent+"%) translate3d(":"translate3d(")+R+"px,"+I+"px,"+j+"px)"+(1!==E||1!==A?" scale("+E+","+A+")":""),void 0;e=a=1,i=n=0}c=1,r=s=o=h=l=u=p=f=g=0,m=k?-1/k:0,v=M.zOrigin,_=1e5,P=M.rotationY*O,P&&(y=Math.cos(P),x=Math.sin(P),l=c*-x,f=m*-x,r=e*x,o=n*x,c*=y,m*=y,e*=y,n*=y),P=M.rotationX*O,P&&(y=Math.cos(P),x=Math.sin(P),b=i*y+r*x,T=a*y+o*x,w=u*y+c*x,S=g*y+m*x,r=i*-x+r*y,o=a*-x+o*y,c=u*-x+c*y,m=g*-x+m*y,i=b,a=T,u=w,g=S),1!==L&&(r*=L,o*=L,c*=L,m*=L),1!==A&&(i*=A,a*=A,u*=A,g*=A),1!==E&&(e*=E,n*=E,l*=E,f*=E),v&&(p-=v,s=r*p,h=o*p,p=c*p+v),s=(b=(s+=R)-(s|=0))?(0|b*_+(0>b?-.5:.5))/_+s:s,h=(b=(h+=I)-(h|=0))?(0|b*_+(0>b?-.5:.5))/_+h:h,p=(b=(p+=j)-(p|=0))?(0|b*_+(0>b?-.5:.5))/_+p:p,C[ye]=(M.xPercent||M.yPercent?"translate("+M.xPercent+"%,"+M.yPercent+"%) matrix3d(":"matrix3d(")+[(0|e*_)/_,(0|n*_)/_,(0|l*_)/_,(0|f*_)/_,(0|i*_)/_,(0|a*_)/_,(0|u*_)/_,(0|g*_)/_,(0|r*_)/_,(0|o*_)/_,(0|c*_)/_,(0|m*_)/_,s,h,p,k?1+-p/k:1].join(",")+")"},Pe=D.set2DTransformRatio=function(t){var e,i,r,s,n,a=this.data,o=this.t,h=o.style,l=a.x,u=a.y;return a.rotationX||a.rotationY||a.z||a.force3D===!0||"auto"===a.force3D&&1!==t&&0!==t?(this.setRatio=Ce,Ce.call(this,t),void 0):(a.rotation||a.skewX?(e=a.rotation*O,i=e-a.skewX*O,r=1e5,s=a.scaleX*r,n=a.scaleY*r,h[ye]=(a.xPercent||a.yPercent?"translate("+a.xPercent+"%,"+a.yPercent+"%) matrix(":"matrix(")+(0|Math.cos(e)*s)/r+","+(0|Math.sin(e)*s)/r+","+(0|Math.sin(i)*-n)/r+","+(0|Math.cos(i)*n)/r+","+l+","+u+")"):h[ye]=(a.xPercent||a.yPercent?"translate("+a.xPercent+"%,"+a.yPercent+"%) matrix(":"matrix(")+a.scaleX+",0,0,"+a.scaleY+","+l+","+u+")",void 0)};me("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,i,r,n,o,h){if(r._transform)return n;var l,u,c,d,p,f,g,m=r._transform=Se(t,s,!0,h.parseTransform),v=t.style,_=1e-6,y=_e.length,x=h,b={};if("string"==typeof x.transform&&ye)c=B.style,c[ye]=x.transform,c.display="block",c.position="absolute",k.body.appendChild(B),l=Se(B,null,!1),k.body.removeChild(B);else if("object"==typeof x){if(l={scaleX:re(null!=x.scaleX?x.scaleX:x.scale,m.scaleX),scaleY:re(null!=x.scaleY?x.scaleY:x.scale,m.scaleY),scaleZ:re(x.scaleZ,m.scaleZ),x:re(x.x,m.x),y:re(x.y,m.y),z:re(x.z,m.z),xPercent:re(x.xPercent,m.xPercent),yPercent:re(x.yPercent,m.yPercent),perspective:re(x.transformPerspective,m.perspective)},g=x.directionalRotation,null!=g)if("object"==typeof g)for(c in g)x[c]=g[c];else x.rotation=g;"string"==typeof x.x&&-1!==x.x.indexOf("%")&&(l.x=0,l.xPercent=re(x.x,m.xPercent)),"string"==typeof x.y&&-1!==x.y.indexOf("%")&&(l.y=0,l.yPercent=re(x.y,m.yPercent)),l.rotation=se("rotation"in x?x.rotation:"shortRotation"in x?x.shortRotation+"_short":"rotationZ"in x?x.rotationZ:m.rotation,m.rotation,"rotation",b),Te&&(l.rotationX=se("rotationX"in x?x.rotationX:"shortRotationX"in x?x.shortRotationX+"_short":m.rotationX||0,m.rotationX,"rotationX",b),l.rotationY=se("rotationY"in x?x.rotationY:"shortRotationY"in x?x.shortRotationY+"_short":m.rotationY||0,m.rotationY,"rotationY",b)),l.skewX=null==x.skewX?m.skewX:se(x.skewX,m.skewX),l.skewY=null==x.skewY?m.skewY:se(x.skewY,m.skewY),(u=l.skewY-m.skewY)&&(l.skewX+=u,l.rotation+=u)}for(Te&&null!=x.force3D&&(m.force3D=x.force3D,f=!0),m.skewType=x.skewType||m.skewType||a.defaultSkewType,p=m.force3D||m.z||m.rotationX||m.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,p||null==x.scale||(l.scaleZ=1);--y>-1;)i=_e[y],d=l[i]-m[i],(d>_||-_>d||null!=j[i])&&(f=!0,n=new de(m,i,m[i],d,n),i in b&&(n.e=b[i]),n.xs0=0,n.plugin=o,r._overwriteProps.push(n.n));return d=x.transformOrigin,(d||Te&&p&&m.zOrigin)&&(ye?(f=!0,i=be,d=(d||$(t,i,s,!1,"50% 50%"))+"",n=new de(v,i,0,0,n,-1,"transformOrigin"),n.b=v[i],n.plugin=o,Te?(c=m.zOrigin,d=d.split(" "),m.zOrigin=(d.length>2&&(0===c||"0px"!==d[2])?parseFloat(d[2]):c)||0,n.xs0=n.e=d[0]+" "+(d[1]||"50%")+" 0px",n=new de(m,"zOrigin",0,0,n,-1,n.n),n.b=c,n.xs0=n.e=m.zOrigin):n.xs0=n.e=d):ee(d+"",m)),f&&(r._transformType=p||3===this._transformType?3:2),n},prefix:!0}),me("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),me("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,h,l,u,c,d,p,f,g,m,v,_,y,x,b,T,w=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],S=t.style;for(g=parseFloat(t.offsetWidth),m=parseFloat(t.offsetHeight),o=e.split(" "),h=0;w.length>h;h++)this.p.indexOf("border")&&(w[h]=H(w[h])),c=u=$(t,w[h],s,!1,"0px"),-1!==c.indexOf(" ")&&(u=c.split(" "),c=u[0],u=u[1]),d=l=o[h],p=parseFloat(c),_=c.substr((p+"").length),y="="===d.charAt(1),y?(f=parseInt(d.charAt(0)+"1",10),d=d.substr(2),f*=parseFloat(d),v=d.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(d),v=d.substr((f+"").length)),""===v&&(v=r[i]||_),v!==_&&(x=z(t,"borderLeft",p,_),b=z(t,"borderTop",p,_),"%"===v?(c=100*(x/g)+"%",u=100*(b/m)+"%"):"em"===v?(T=z(t,"borderLeft",1,"em"),c=x/T+"em",u=b/T+"em"):(c=x+"px",u=b+"px"),y&&(d=parseFloat(c)+f+v,l=parseFloat(u)+f+v)),a=pe(S,w[h],c+" "+u,d+" "+l,!1,"0px",a);return a},prefix:!0,formatter:le("0px 0px 0px 0px",!1,!0)}),me("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,n,a){var o,h,l,u,c,d,p="background-position",g=s||X(t,null),m=this.format((g?f?g.getPropertyValue(p+"-x")+" "+g.getPropertyValue(p+"-y"):g.getPropertyValue(p):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==m.indexOf("%")!=(-1!==v.indexOf("%"))&&(d=$(t,"backgroundImage").replace(C,""),d&&"none"!==d)){for(o=m.split(" "),h=v.split(" "),F.setAttribute("src",d),l=2;--l>-1;)m=o[l],u=-1!==m.indexOf("%"),u!==(-1!==h[l].indexOf("%"))&&(c=0===l?t.offsetWidth-F.width:t.offsetHeight-F.height,o[l]=u?parseFloat(m)/100*c+"px":100*(parseFloat(m)/c)+"%");m=o.join(" ")}return this.parseComplex(t.style,m,v,n,a)},formatter:ee}),me("backgroundSize",{defaultValue:"0 0",formatter:ee}),me("perspective",{defaultValue:"0px",prefix:!0}),me("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),me("transformStyle",{prefix:!0}),me("backfaceVisibility",{prefix:!0}),me("userSelect",{prefix:!0}),me("margin",{parser:ue("marginTop,marginRight,marginBottom,marginLeft")}),me("padding",{parser:ue("paddingTop,paddingRight,paddingBottom,paddingLeft")}),me("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,n,a){var o,h,l;return 9>f?(h=t.currentStyle,l=8>f?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format($(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),me("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),me("autoRound,strictUnits",{parser:function(t,e,i,r,s){return s}}),me("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,n,a){return this.parseComplex(t.style,this.format($(t,"borderTopWidth",s,!1,"0px")+" "+$(t,"borderTopStyle",s,!1,"solid")+" "+$(t,"borderTopColor",s,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(he)||["#000"])[0]}}),me("borderWidth",{parser:ue("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),me("float,cssFloat,styleFloat",{parser:function(t,e,i,r,s){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new de(n,a,0,0,s,-1,i,!1,0,n[a],e)}});var Ee=function(t){var e,i=this.t,r=i.filter||$(this.data,"filter"),s=0|this.s+this.c*t;100===s&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!$(this.data,"filter")):(i.filter=r.replace(T,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+s+")"),-1===r.indexOf("pacity")?0===s&&this.xn1||(i.filter=r+" alpha(opacity="+s+")"):i.filter=r.replace(x,"opacity="+s))};me("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,n,a){var o=parseFloat($(t,"opacity",s,!1,"1")),h=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===$(t,"visibility",s)&&0!==e&&(o=0),U?n=new de(h,"opacity",o,e-o,n):(n=new de(h,"opacity",100*o,100*(e-o),n),n.xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=Ee),l&&(n=new de(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit"),n.xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var Ae=function(t,e){e&&(t.removeProperty?("ms"===e.substr(0,2)&&(e="M"+e.substr(1)),t.removeProperty(e.replace(S,"-$1").toLowerCase())):t.removeAttribute(e))},Le=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Ae(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};me("className",{parser:function(t,e,r,n,a,o,h){var l,u,c,d,p,f=t.getAttribute("class")||"",g=t.style.cssText;if(a=n._classNamePT=new de(t,r,0,0,a,2),a.setRatio=Le,a.pr=-11,i=!0,a.b=f,u=Q(t,s),c=t._gsClassPT){for(d={},p=c.data;p;)d[p.p]=1,p=p._next;c.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:f.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),n._tween._duration&&(t.setAttribute("class",a.e),l=q(t,u,Q(t),h,d),t.setAttribute("class",f),a.data=l.firstMPT,t.style.cssText=g,a=a.xfirst=n.parse(t,l.difs,a,o)),a}});var Re=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,s,n=this.t.style,a=o.transform.parse;if("all"===this.e)n.cssText="",s=!0;else for(e=this.e.split(","),r=e.length;--r>-1;)i=e[r],o[i]&&(o[i].parse===a?s=!0:i="transformOrigin"===i?be:o[i].p),Ae(n,i);s&&(Ae(n,ye),this.t._gsTransform&&delete this.t._gsTransform)}};for(me("clearProps",{parser:function(t,e,r,s,n){return n=new de(t,r,0,0,n,2),n.setRatio=Re,n.e=e,n.pr=-10,n.data=s._tween,i=!0,n}}),h="bezier,throwProps,physicsProps,physics2D".split(","),fe=h.length;fe--;)ve(h[fe]);h=a.prototype,h._firstPT=null,h._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,l=e.autoRound,i=!1,r=e.suffixMap||a.suffixMap,s=X(t,""),n=this._overwriteProps;var h,d,f,g,m,v,_,y,x,T=t.style;if(u&&""===T.zIndex&&(h=$(t,"zIndex",s),("auto"===h||""===h)&&this._addLazySet(T,"zIndex",0)),"string"==typeof e&&(g=T.cssText,h=Q(t,s),T.cssText=g+";"+e,h=q(t,h,Q(t)).difs,!U&&b.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,T.cssText=g),this._firstPT=d=this.parse(t,e,null),this._transformType){for(x=3===this._transformType,ye?c&&(u=!0,""===T.zIndex&&(_=$(t,"zIndex",s),("auto"===_||""===_)&&this._addLazySet(T,"zIndex",0)),p&&this._addLazySet(T,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(x?"visible":"hidden"))):T.zoom=1,f=d;f&&f._next;)f=f._next;y=new de(t,"transform",0,0,null,2),this._linkCSSP(y,null,f),y.setRatio=x&&Te?Ce:ye?Pe:Me,y.data=this._transform||Se(t,s,!0),n.pop()}if(i){for(;d;){for(v=d._next,f=g;f&&f.pr>d.pr;)f=f._next;(d._prev=f?f._prev:m)?d._prev._next=d:g=d,(d._next=f)?f._prev=d:m=d,d=v}this._firstPT=g}return!0},h.parse=function(t,e,i,n){var a,h,u,c,d,p,f,g,m,v,_=t.style;for(a in e)p=e[a],h=o[a],h?i=h.parse(t,p,a,this,i,n,e):(d=$(t,a,s)+"",m="string"==typeof p,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||m&&w.test(p)?(m||(p=oe(p),p=(p.length>3?"rgba(":"rgb(")+p.join(",")+")"),i=pe(_,a,d,p,!0,"transparent",i,0,n)):!m||-1===p.indexOf(" ")&&-1===p.indexOf(",")?(u=parseFloat(d),f=u||0===u?d.substr((u+"").length):"",(""===d||"auto"===d)&&("width"===a||"height"===a?(u=te(t,a,s),f="px"):"left"===a||"top"===a?(u=Y(t,a,s),f="px"):(u="opacity"!==a?0:1,f="")),v=m&&"="===p.charAt(1),v?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),g=p.replace(y,"")):(c=parseFloat(p),g=m?p.substr((c+"").length)||"":""),""===g&&(g=a in r?r[a]:f),p=c||0===c?(v?c+u:c)+g:e[a],f!==g&&""!==g&&(c||0===c)&&u&&(u=z(t,a,u,f),"%"===g?(u/=z(t,a,100,"%")/100,e.strictUnits!==!0&&(d=u+"%")):"em"===g?u/=z(t,a,1,"em"):"px"!==g&&(c=z(t,a,c,g),g="px"),v&&(c||0===c)&&(p=c+u+g)),v&&(c+=u),!u&&0!==u||!c&&0!==c?void 0!==_[a]&&(p||"NaN"!=p+""&&null!=p)?(i=new de(_,a,c||u||0,0,i,-1,a,!1,0,d,p),i.xs0="none"!==p||"display"!==a&&-1===a.indexOf("Style")?p:d):J("invalid "+a+" tween value: "+e[a]):(i=new de(_,a,u,c-u,i,0,a,l!==!1&&("px"===g||"zIndex"===a),0,d,p),i.xs0=g)):i=pe(_,a,d,p,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},h.setRatio=function(t){var e,i,r,s=this._firstPT,n=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;s;){if(e=s.c*t+s.s,s.r?e=Math.round(e):n>e&&e>-n&&(e=0),s.type)if(1===s.type)if(r=s.l,2===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2;else if(3===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3;else if(4===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4;else if(5===r)s.t[s.p]=s.xs0+e+s.xs1+s.xn1+s.xs2+s.xn2+s.xs3+s.xn3+s.xs4+s.xn4+s.xs5;else{for(i=s.xs0+e+s.xs1,r=1;s.l>r;r++)i+=s["xn"+r]+s["xs"+(r+1)];s.t[s.p]=i}else-1===s.type?s.t[s.p]=s.xs0:s.setRatio&&s.setRatio(t);else s.t[s.p]=e+s.xs0;s=s._next}else for(;s;)2!==s.type?s.t[s.p]=s.b:s.setRatio(t),s=s._next;else for(;s;)2!==s.type?s.t[s.p]=s.e:s.setRatio(t),s=s._next},h._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2,this._transform=this._transform||Se(this._target,s,!0)};var Oe=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(t,e,i){var r=this._firstPT=new de(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=Oe,r.data=this},h._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},h._kill=function(e){var i,r,s,n=e;if(e.autoAlpha||e.alpha){n={};for(r in e)n[r]=e[r];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&(s=i.xfirst,s&&s._prev?this._linkCSSP(s._prev,i._next,s._prev._prev):s===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,s._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Ie=function(t,e,i){var r,s,n,a;if(t.slice)for(s=t.length;--s>-1;)Ie(t[s],e,i);else for(r=t.childNodes,s=r.length;--s>-1;)n=r[s],a=n.type,n.style&&(e.push(Q(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Ie(n,e,i)};return a.cascadeTo=function(t,i,r){var s,n,a,o=e.to(t,i,r),h=[o],l=[],u=[],c=[],d=e._internals.reservedProps;for(t=o._targets||o.target,Ie(t,l,c),o.render(i,!0),Ie(t,u),o.render(0,!0),o._enabled(!0),s=c.length;--s>-1;)if(n=q(c[s],l[s],u[s]),n.firstMPT){n=n.difs;for(a in r)d[a]&&(n[a]=r[a]);h.push(e.to(c[s],i,n))}return h},t.activate([a]),a},!0),function(){var t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=t.prototype;e._onInitAllProps=function(){for(var t,e,i,r=this._tween,s=r.vars.roundProps instanceof Array?r.vars.roundProps:r.vars.roundProps.split(","),n=s.length,a={},o=r._propLookup.roundProps;--n>-1;)a[s[n]]=1;for(n=s.length;--n>-1;)for(t=s[n],e=r._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:r._firstPT===e&&(r._firstPT=i),e._next=e._prev=null,r._propLookup[t]=o),e=i;return!1},e._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,!0),this._overwriteProps.push(e)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(t,e){var i,r,s;if("function"!=typeof t.setAttribute)return!1;this._target=t,this._proxy={},this._start={},this._end={};for(i in e)this._start[i]=this._proxy[i]=r=t.getAttribute(i),s=this._addTween(this._proxy,i,parseFloat(r),e[i],i),this._end[i]=s?s.s+s.c:e[i],this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,r=i.length,s=1===t?this._end:t?this._proxy:this._start;--r>-1;)e=i[r],this._target.setAttribute(e,s[e]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,r,s,n,a,o,h=e.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in e)"useRadians"!==i&&(o=(e[i]+"").split("_"),r=o[0],s=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?s+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,a=n-s,o.length&&(r=o.join("_"),-1!==r.indexOf("short")&&(a%=h,a!==a%(h/2)&&(a=0>a?a+h:a-h)),-1!==r.indexOf("_cw")&&0>a?a=(a+9999999999*h)%h-(0|a/h)*h:-1!==r.indexOf("ccw")&&a>0&&(a=(a-9999999999*h)%h-(0|a/h)*h)),(a>l||-l>a)&&(this._addTween(t,i,s,s+a,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,r,s=_gsScope.GreenSockGlobals||_gsScope,n=s.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var r=h("easing."+e,function(){},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,r},u=t.register||function(){},c=function(t,e,i,r){var s=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return u(s,t),s},d=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(e,i){var r=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=i,s.config=function(t){return new r(t)},r},f=c("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),m=g.prototype=new t;return m.constructor=g,m.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),m.config=g.config=function(t,e,i){return new g(t,e,i)},e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),m=e.prototype=new t,m.constructor=e,m.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},m.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){e=e||{};for(var i,r,s,n,a,o,h=e.taper||"none",l=[],u=0,c=0|(e.points||20),p=c,f=e.randomize!==!1,g=e.clamp===!0,m=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=f?Math.random():1/c*p,r=m?m.getRatio(i):i,"none"===h?s=v:"out"===h?(n=1-i,s=n*n*v):"in"===h?s=i*i*v:.5>i?(n=2*i,s=.5*n*n*v):(n=2*(1-i),s=.5*n*n*v),f?r+=Math.random()*s-.5*s:p%2?r+=.5*s:r-=.5*s,g&&(r>1?r=1:0>r&&(r=0)),l[u++]={x:i,y:r};for(l.sort(function(t,e){return t.x-e.x}),o=new d(1,1,null),p=c;--p>-1;)a=l[p],o=new d(a.x,a.y,o);this._prev=new d(0,0,0!==o.t?o:o.next)},!0),m=i.prototype=new t,m.constructor=i,m.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},m.config=function(t){return new i(t)},i.ease=new i,c("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375
}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=e?1-2*t:2*t-1,t=1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),c("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,i,r){var s=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||r,this._p3=this._p2/a*(Math.asin(1/this._p1)||0)},!0),n=s.prototype=new t;return n.constructor=s,n.getRatio=i,n.config=function(t,e){return new s(t,e)},s},c("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*a/this._p2)+1},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2))},.3),r("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*a/this._p2)+1},.45)),c("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),c("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return-Math.cos(t*o)+1}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),u(s.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(e,"SteppedEase","ease,"),f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t,e){"use strict";var i=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!i.TweenLite){var r,s,n,a,o,h=function(t){var e,r=t.split("."),s=i;for(e=0;r.length>e;e++)s[r[e]]=s=s[r[e]]||{};return s},l=h("com.greensock"),u=1e-10,c=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},d=function(){},p=function(){var t=Object.prototype.toString,e=t.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&t.call(i)===e)}}(),f={},g=function(r,s,n,a){this.sc=f[r]?f[r].sc:[],f[r]=this,this.gsClass=null,this.func=n;var o=[];this.check=function(l){for(var u,c,d,p,m=s.length,v=m;--m>-1;)(u=f[s[m]]||new g(s[m],[])).gsClass?(o[m]=u.gsClass,v--):l&&u.sc.push(this);if(0===v&&n)for(c=("com.greensock."+r).split("."),d=c.pop(),p=h(c.join("."))[d]=this.gsClass=n.apply(n,o),a&&(i[d]=p,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return p}):r===e&&"undefined"!=typeof module&&module.exports&&(module.exports=p)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},m=t._gsDefine=function(t,e,i,r){return new g(t,e,i,r)},v=l._class=function(t,e,i){return e=e||function(){},m(t,[],function(){return e},i),e};m.globals=i;var _=[0,0,1,1],y=[],x=v("easing.Ease",function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?_.concat(e):_},!0),b=x.map={},T=x.register=function(t,e,i,r){for(var s,n,a,o,h=e.split(","),u=h.length,c=(i||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(n=h[u],s=r?v("easing."+n,null,!0):l.easing[n]||{},a=c.length;--a>-1;)o=c[a],b[n+"."+o]=b[o+n]=s[o]=t.getRatio?t:t[o]||new t};for(n=x.prototype,n._calcEnd=!1,n.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:.5>t?r/2:1-r/2},r=["Linear","Quad","Cubic","Quart","Quint,Strong"],s=r.length;--s>-1;)n=r[s]+",Power"+s,T(new x(null,null,1,s),n,"easeOut",!0),T(new x(null,null,2,s),n,"easeIn"+(0===s?",easeNone":"")),T(new x(null,null,3,s),n,"easeInOut");b.linear=l.easing.Linear.easeIn,b.swing=l.easing.Quad.easeInOut;var w=v("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});n=w.prototype,n.addEventListener=function(t,e,i,r,s){s=s||0;var n,h,l=this._listeners[t],u=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)n=l[h],n.c===e&&n.s===i?l.splice(h,1):0===u&&s>n.pr&&(u=h+1);l.splice(u,0,{c:e,s:i,up:r,pr:s}),this!==a||o||a.wake()},n.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return r.splice(i,1),void 0},n.dispatchEvent=function(t){var e,i,r,s=this._listeners[t];if(s)for(e=s.length,i=this._eventTarget;--e>-1;)r=s[e],r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i)};var S=t.requestAnimationFrame,M=t.cancelAnimationFrame,C=Date.now||function(){return(new Date).getTime()},P=C();for(r=["ms","moz","webkit","o"],s=r.length;--s>-1&&!S;)S=t[r[s]+"RequestAnimationFrame"],M=t[r[s]+"CancelAnimationFrame"]||t[r[s]+"CancelRequestAnimationFrame"];v("Ticker",function(t,e){var i,r,s,n,h,l=this,c=C(),p=e!==!1&&S,f=500,g=33,m=function(t){var e,a,o=C()-P;o>f&&(c+=o-g),P+=o,l.time=(P-c)/1e3,e=l.time-h,(!i||e>0||t===!0)&&(l.frame++,h+=e+(e>=n?.004:n-e),a=!0),t!==!0&&(s=r(m)),a&&l.dispatchEvent("tick")};w.call(l),l.time=l.frame=0,l.tick=function(){m(!0)},l.lagSmoothing=function(t,e){f=t||1/u,g=Math.min(e,f,0)},l.sleep=function(){null!=s&&(p&&M?M(s):clearTimeout(s),r=d,s=null,l===a&&(o=!1))},l.wake=function(){null!==s?l.sleep():l.frame>10&&(P=C()-f+5),r=0===i?d:p&&S?S:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===a&&(o=!0),m(2)},l.fps=function(t){return arguments.length?(i=t,n=1/(i||60),h=this.time+n,l.wake(),void 0):i},l.useRAF=function(t){return arguments.length?(l.sleep(),p=t,l.fps(i),void 0):p},l.fps(t),setTimeout(function(){p&&(!s||5>l.frame)&&l.useRAF(!1)},1500)}),n=l.Ticker.prototype=new l.events.EventDispatcher,n.constructor=l.Ticker;var E=v("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,W){o||a.wake();var i=this.vars.useFrames?J:W;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});a=E.ticker=new l.Ticker,n=E.prototype,n._dirty=n._gc=n._initted=n._paused=!1,n._totalTime=n._time=0,n._rawPrevTime=-1,n._next=n._last=n._onUpdate=n._timeline=n.timeline=null,n._paused=!1;var A=function(){o&&C()-P>2e3&&a.wake(),setTimeout(A,2e3)};A(),n.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},n.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},n.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},n.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},n.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},n.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},n.render=function(){},n.invalidate=function(){return this},n.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},n._enabled=function(t,e){return o||a.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},n._kill=function(){return this._enabled(!1,!1)},n.kill=function(t,e){return this._kill(t,e),this},n._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},n._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},n.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var s=this.vars;if(1===arguments.length)return s[t];null==e?delete s[t]:(s[t]=e,s[t+"Params"]=p(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,s[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},n.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},n.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},n.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},n.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},n.totalTime=function(t,e,i){if(o||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,s=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:s._time)-(this._reversed?r-t:t)/this._timeScale,s._dirty||this._uncache(!1),s._timeline)for(;s._timeline;)s._timeline._time!==(s._startTime+s._totalTime)/s._timeScale&&s.totalTime(s._totalTime,!0),s=s._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),j.length&&V())}return this},n.progress=n.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},n.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},n.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||u,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},n.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},n.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){o||t||a.wake();var e=this._timeline,i=e.rawTime(),r=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==r&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var L=v("core.SimpleTimeline",function(t){E.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});n=L.prototype=new E,n.constructor=L,n.kill()._gc=!1,n._first=n._last=null,n._sortChildren=!1,n.add=n.insert=function(t,e){var i,r;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(r=t._startTime;i&&i._startTime>r;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._timeline&&this._uncache(!0),this},n._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,this._timeline&&this._uncache(!0)),this},n.render=function(t,e,i){var r,s=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;s;)r=s._next,(s._active||t>=s._startTime&&!s._paused)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=r},n.rawTime=function(){return o||a.wake(),this._totalTime};var R=v("TweenLite",function(e,i,r){if(E.call(this,i,r),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var s,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?G[R.defaultOverwrite]:"number"==typeof h?h>>0:G[h],(o||e instanceof Array||e.push&&p(e))&&"number"!=typeof e[0])for(this._targets=a=c(e),this._propLookup=[],this._siblings=[],s=0;a.length>s;s++)n=a[s],n?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(s--,1),this._targets=a=a.concat(c(n))):(this._siblings[s]=H(n,this,!1),1===h&&this._siblings[s].length>1&&X(n,this,null,1,this._siblings[s])):(n=a[s--]=R.selector(n),"string"==typeof n&&a.splice(s+1,1)):a.splice(s--,1);else this._propLookup={},this._siblings=H(e,this,!1),1===h&&this._siblings.length>1&&X(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-u,this.render(-this._delay))},!0),O=function(e){return e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},I=function(t,e){var i,r={};for(i in t)U[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!F[i]||F[i]&&F[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r};n=R.prototype=new E,n.constructor=R,n.kill()._gc=!1,n.ratio=0,n._firstPT=n._targets=n._overwrittenProps=n._startAt=null,n._notifyPluginsOfEnabled=n._lazy=!1,R.version="1.13.1",R.defaultEase=n._ease=new x(null,null,1,1),R.defaultOverwrite="auto",R.ticker=a,R.autoSleep=!0,R.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},R.selector=t.$||t.jQuery||function(e){var i=t.$||t.jQuery;return i?(R.selector=i,i(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var j=[],k={},B=R._internals={isArray:p,isSelector:O,lazyTweens:j},F=R._plugins={},D=B.tweenLookup={},N=0,U=B.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},G={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},J=E._rootFramesTimeline=new L,W=E._rootTimeline=new L,V=B.lazyRender=function(){var t=j.length;for(k={};--t>-1;)r=j[t],r&&r._lazy!==!1&&(r.render(r._lazy,!1,!0),r._lazy=!1);j.length=0};W._startTime=a.time,J._startTime=a.frame,W._active=J._active=!0,setTimeout(V,1),E._updateRoot=R.render=function(){var t,e,i;if(j.length&&V(),W.render((a.time-W._startTime)*W._timeScale,!1,!1),J.render((a.frame-J._startTime)*J._timeScale,!1,!1),j.length&&V(),!(a.frame%120)){for(i in D){for(e=D[i].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete D[i]}if(i=W._first,(!i||i._paused)&&R.autoSleep&&!J._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",E._updateRoot);var H=function(t,e,i){var r,s,n=t._gsTweenID;if(D[n||(t._gsTweenID=n="t"+N++)]||(D[n]={target:t,tweens:[]}),e&&(r=D[n].tweens,r[s=r.length]=e,i))for(;--s>-1;)r[s]===e&&r.splice(s,1);return D[n].tweens},X=function(t,e,i,r,s){var n,a,o,h;if(1===r||r>=4){for(h=s.length,n=0;h>n;n++)if((o=s[n])!==e)o._gc||o._enabled(!1,!1)&&(a=!0);else if(5===r)break;return a}var l,c=e._startTime+u,d=[],p=0,f=0===e._duration;for(n=s.length;--n>-1;)(o=s[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||$(e,0,f),0===$(o,l,f)&&(d[p++]=o)):c>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale>c&&((f||!o._initted)&&2e-10>=c-o._startTime||(d[p++]=o)));for(n=p;--n>-1;)o=d[n],2===r&&o._kill(i,t)&&(a=!0),(2!==r||!o._firstPT&&o._initted)&&o._enabled(!1,!1)&&(a=!0);return a},$=function(t,e,i){for(var r=t._timeline,s=r._timeScale,n=t._startTime;r._timeline;){if(n+=r._startTime,s*=r._timeScale,r._paused)return-100;r=r._timeline}return n/=s,n>e?n-e:i&&n===e||!t._initted&&2*u>n-e?u:(n+=t.totalDuration()/t._timeScale/s)>e+u?0:n-e-u};n._init=function(){var t,e,i,r,s,n=this.vars,a=this._overwrittenProps,o=this._duration,h=!!n.immediateRender,l=n.ease;if(n.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),s={};for(r in n.startAt)s[r]=n.startAt[r];if(s.overwrite=!1,s.immediateRender=!0,s.lazy=h&&n.lazy!==!1,s.startAt=s.delay=null,this._startAt=R.to(this.target,0,s),h)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(n.runBackwards&&0!==o)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{i={};for(r in n)U[r]&&"autoCSS"!==r||(i[r]=n[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&n.lazy!==!1,i.immediateRender=h,this._startAt=R.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1)}if(this._ease=l=l?l instanceof x?l:"function"==typeof l?new x(l,n.easeParams):b[l]||R.defaultEase:R.defaultEase,n.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,n.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a);if(e&&R._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),n.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=n.onUpdate,this._initted=!0},n._initProps=function(e,i,r,s){var n,a,o,h,l,u;if(null==e)return!1;k[e._gsTweenID]&&V(),this.vars.css||e.style&&e!==t&&e.nodeType&&F.css&&this.vars.autoCSS!==!1&&I(this.vars,e);for(n in this.vars){if(u=this.vars[n],U[n])u&&(u instanceof Array||u.push&&p(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[n]=u=this._swapSelfInParams(u,this));else if(F[n]&&(h=new F[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof u&&"="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*Number(u.substr(2)):Number(u)-l.s||0;l&&l._next&&(l._next._prev=l)}return s&&this._kill(s,e)?this._initProps(e,i,r,s):this._overwrite>1&&this._firstPT&&r.length>1&&X(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,s)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(k[e._gsTweenID]=!0),o)},n.render=function(t,e,i){var r,s,n,a,o=this._time,h=this._duration,l=this._rawPrevTime;if(t>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,s="onComplete"),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||0>l||l===u)&&l!==t&&(i=!0,l>u&&(s="onReverseComplete")),this._rawPrevTime=a=!e||t||l===t?t:u);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==o||0===h&&l>0&&l!==u)&&(s="onReverseComplete",r=this._reversed),0>t?(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(i=!0),this._rawPrevTime=a=!e||t||l===t?t:u)):this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var c=t/h,d=this._easeType,p=this._easePower;(1===d||3===d&&c>=.5)&&(c=1-c),3===d&&(c*=2),1===p?c*=c:2===p?c*=c*c:3===p?c*=c*c*c:4===p&&(c*=c*c*c*c),this.ratio=1===d?1-c:2===d?c:.5>t/h?c/2:1-c/2}else this.ratio=this._ease.getRatio(t/h);if(this._time!==o||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=o,this._rawPrevTime=l,j.push(this),this._lazy=t,void 0;this._time&&!r?this.ratio=this._ease.getRatio(this._time/h):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==o&&t>=0&&(this._active=!0),0===o&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):s||(s="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||y))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._time!==o||r)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||y)),s&&(!this._gc||i)&&(0>t&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||y),0===h&&this._rawPrevTime===u&&a!==u&&(this._rawPrevTime=0))}},n._kill=function(t,e){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var i,r,s,n,a,o,h,l;if((p(e)||O(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i])&&(o=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){h=t||a,l=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill);for(s in h)(n=a[s])&&(n.pg&&n.t._kill(h)&&(o=!0),n.pg&&0!==n.t._overwriteProps.length||(n._prev?n._prev._next=n._next:n===this._firstPT&&(this._firstPT=n._next),n._next&&(n._next._prev=n._prev),n._next=n._prev=null),delete a[s]),l&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return o},n.invalidate=function(){return this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=this._lazy=!1,this._propLookup=this._targets?{}:[],this},n._enabled=function(t,e){if(o||a.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=H(r[i],this,!0);else this._siblings=H(this.target,this,!0)}return E.prototype._enabled.call(this,t,e),this._notifyPluginsOfEnabled&&this._firstPT?R._onPluginEvent(t?"_onEnable":"_onDisable",this):!1},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new R(t,e,r)},R.delayedCall=function(t,e,i,r,s){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:r,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:r,immediateRender:!1,useFrames:s,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:R.selector(t)||t;var i,r,s,n;if((p(t)||O(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(R.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(n=r[i],s=i;--s>-1;)n===r[s]&&r.splice(i,1)}else for(r=H(t).concat(),i=r.length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=R.getTweensOf(t,e),s=r.length;--s>-1;)r[s]._kill(i,t)};var z=v("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=z.prototype},!0);if(n=z.prototype,z.version="1.10.1",z.API=2,n._firstPT=null,n._addTween=function(t,e,i,r,s,n){var a,o;return null!=r&&(a="number"==typeof r||"="!==r.charAt(1)?Number(r)-i:parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:s||e,r:n},o._next&&(o._next._prev=o),o):void 0},n.setRatio=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.c*t+i.s,i.r?e=Math.round(e):r>e&&e>-r&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},n._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},n._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},R._onPluginEvent=function(t,e){var i,r,s,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,r=s;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:n)?o._prev._next=o:s=o,(o._next=r)?r._prev=o:n=o,o=a}o=e._firstPT=s}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},z.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===z.API&&(F[(new t[e])._propName]=t[e]);return!0},m.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,s=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=v("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){z.call(this,i,r),this._overwriteProps=s||[]},t.global===!0),o=a.prototype=new z(i);o.constructor=a,a.API=t.API;for(e in n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,z.activate([a]),a},r=t._gsQueue){for(s=0;r.length>s;s++)r[s]();for(n in f)f[n].func||t.console.log("GSAP encountered missing dependency: com.greensock."+n)}o=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var t=document.documentElement,e=window,i=function(i,r){var s="x"===r?"Width":"Height",n="scroll"+s,a="client"+s,o=document.body;return i===e||i===t||i===o?Math.max(t[n],o[n])-(e["inner"+s]||Math.max(t[a],o[a])):i[n]-i["offset"+s]},r=_gsScope._gsDefine.plugin({propName:"scrollTo",API:2,version:"1.7.4",init:function(t,r,s){return this._wdw=t===e,this._target=t,this._tween=s,"object"!=typeof r&&(r={y:r}),this.vars=r,this._autoKill=r.autoKill!==!1,this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=r.x?(this._addTween(this,"x",this.x,"max"===r.x?i(t,"x"):r.x,"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=r.y?(this._addTween(this,"y",this.y,"max"===r.y?i(t,"y"):r.y,"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(t){this._super.setRatio.call(this,t);var r=this._wdw||!this.skipX?this.getX():this.xPrev,s=this._wdw||!this.skipY?this.getY():this.yPrev,n=s-this.yPrev,a=r-this.xPrev;this._autoKill&&(!this.skipX&&(a>7||-7>a)&&i(this._target,"x")>r&&(this.skipX=!0),!this.skipY&&(n>7||-7>n)&&i(this._target,"y")>s&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?e.scrollTo(this.skipX?r:this.x,this.skipY?s:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),s=r.prototype;r.max=i,s.getX=function(){return this._wdw?null!=e.pageXOffset?e.pageXOffset:null!=t.scrollLeft?t.scrollLeft:document.body.scrollLeft:this._target.scrollLeft},s.getY=function(){return this._wdw?null!=e.pageYOffset?e.pageYOffset:null!=t.scrollTop?t.scrollTop:document.body.scrollTop:this._target.scrollTop},s._kill=function(t){return t.scrollTo_x&&(this.skipX=!0),t.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,t)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(t){function e(t,e,i,r,s){this._listener=e,this._isOnce=i,this.context=r,this._signal=t,this._priority=s||0}function i(t,e){if("function"!=typeof t)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function r(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){r.prototype.dispatch.apply(t,arguments)}}e.prototype={active:!0,params:null,execute:function(t){var e;return this.active&&this._listener&&(t=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,t),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,i,r,s){var n=this._indexOfListener(t,r);if(-1!==n){if(t=this._bindings[n],t.isOnce()!==i)throw Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.")}else t=new e(this,t,i,r,s),this._addBinding(t);return this.memorize&&this._prevParams&&t.execute(this._prevParams),t},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,r=this._bindings.length;r--;)if(i=this._bindings[r],i._listener===t&&i.context===e)return r;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,r){return i(t,"add"),this._registerListener(t,!1,e,r)},addOnce:function(t,e,r){return i(t,"addOnce"),this._registerListener(t,!0,e,r)},remove:function(t,e){i(t,"remove");var r=this._indexOfListener(t,e);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=e),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=r;s.Signal=r,"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:t.signals=s}(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];
return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,r,s,n,a,o=gap,h=e[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(e,t,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(h)){for(n=h.length,i=0;n>i;i+=1)a[i]=str(i,h)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;n>i;i+=1)"string"==typeof rep[i]&&(r=rep[i],s=str(r,h),s&&a.push(quote(r)+(gap?": ":":")+s));else for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(s=str(r,h),s&&a.push(quote(r)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;i>r;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,r,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r=walk(s,i),void 0!==r?s[i]=r:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var i=t.History=t.History||{};if("undefined"!=typeof i.Adapter)throw new Error("History.js Adapter has already been loaded...");i.Adapter={handlers:{},_uid:1,uid:function(t){return t._uid||(t._uid=i.Adapter._uid++)},bind:function(t,e,r){var s=i.Adapter.uid(t);i.Adapter.handlers[s]=i.Adapter.handlers[s]||{},i.Adapter.handlers[s][e]=i.Adapter.handlers[s][e]||[],i.Adapter.handlers[s][e].push(r),t["on"+e]=function(t,e){return function(r){i.Adapter.trigger(t,e,r)}}(t,e)},trigger:function(t,e,r){r=r||{};var s,n,a=i.Adapter.uid(t);for(i.Adapter.handlers[a]=i.Adapter.handlers[a]||{},i.Adapter.handlers[a][e]=i.Adapter.handlers[a][e]||[],s=0,n=i.Adapter.handlers[a][e].length;n>s;++s)i.Adapter.handlers[a][e][s].apply(this,[r])},extractEventData:function(t,i){var r=i&&i[t]||e;return r},onDomLoad:function(e){var i=t.setTimeout(function(){e()},2e3);t.onload=function(){clearTimeout(i),e()}}},"undefined"!=typeof i.init&&i.init()}(window),function(t){"use strict";var e=t.document,i=t.setTimeout||i,r=t.clearTimeout||r,s=t.setInterval||s,n=t.History=t.History||{};if("undefined"!=typeof n.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");n.initHtml4=function(){return"undefined"!=typeof n.initHtml4.initialized?!1:(n.initHtml4.initialized=!0,n.enabled=!0,n.savedHashes=[],n.isLastHash=function(t){var e,i=n.getHashByIndex();return e=t===i},n.isHashEqual=function(t,e){return t=encodeURIComponent(t).replace(/%25/g,"%"),e=encodeURIComponent(e).replace(/%25/g,"%"),t===e},n.saveHash=function(t){return n.isLastHash(t)?!1:(n.savedHashes.push(t),!0)},n.getHashByIndex=function(t){var e=null;return e="undefined"==typeof t?n.savedHashes[n.savedHashes.length-1]:0>t?n.savedHashes[n.savedHashes.length+t]:n.savedHashes[t]},n.discardedHashes={},n.discardedStates={},n.discardState=function(t,e,i){var r,s=n.getHashByState(t);return r={discardedState:t,backState:i,forwardState:e},n.discardedStates[s]=r,!0},n.discardHash=function(t,e,i){var r={discardedHash:t,backState:i,forwardState:e};return n.discardedHashes[t]=r,!0},n.discardedState=function(t){var e,i=n.getHashByState(t);return e=n.discardedStates[i]||!1},n.discardedHash=function(t){var e=n.discardedHashes[t]||!1;return e},n.recycleState=function(t){var e=n.getHashByState(t);return n.discardedState(t)&&delete n.discardedStates[e],!0},n.emulated.hashChange&&(n.hashChangeInit=function(){n.checkerFunction=null;var i,r,a,o,h="",l=Boolean(n.getHash());return n.isInternetExplorer()?(i="historyjs-iframe",r=e.createElement("iframe"),r.setAttribute("id",i),r.setAttribute("src","#"),r.style.display="none",e.body.appendChild(r),r.contentWindow.document.open(),r.contentWindow.document.close(),a="",o=!1,n.checkerFunction=function(){if(o)return!1;o=!0;var e=n.getHash(),i=n.getHash(r.contentWindow.document);return e!==h?(h=e,i!==e&&(a=i=e,r.contentWindow.document.open(),r.contentWindow.document.close(),r.contentWindow.document.location.hash=n.escapeHash(e)),n.Adapter.trigger(t,"hashchange")):i!==a&&(a=i,l&&""===i?n.back():n.setHash(i,!1)),o=!1,!0}):n.checkerFunction=function(){var e=n.getHash()||"";return e!==h&&(h=e,n.Adapter.trigger(t,"hashchange")),!0},n.intervalList.push(s(n.checkerFunction,n.options.hashChangeInterval)),!0},n.Adapter.onDomLoad(n.hashChangeInit)),n.emulated.pushState&&(n.onHashChange=function(e){var i,r=e&&e.newURL||n.getLocationHref(),s=n.getHashByUrl(r),a=null,o=null;return n.isLastHash(s)?(n.busy(!1),!1):(n.doubleCheckComplete(),n.saveHash(s),s&&n.isTraditionalAnchor(s)?(n.Adapter.trigger(t,"anchorchange"),n.busy(!1),!1):(a=n.extractState(n.getFullUrl(s||n.getLocationHref()),!0),n.isLastSavedState(a)?(n.busy(!1),!1):(o=n.getHashByState(a),i=n.discardedState(a),i?(n.getHashByIndex(-2)===n.getHashByState(i.forwardState)?n.back(!1):n.forward(!1),!1):(n.pushState(a.data,a.title,encodeURI(a.url),!1),!0))))},n.Adapter.bind(t,"hashchange",n.onHashChange),n.pushState=function(e,i,r,s){if(r=encodeURI(r).replace(/%25/g,"%"),n.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(s!==!1&&n.busy())return n.pushQueue({scope:n,callback:n.pushState,args:arguments,queue:s}),!1;n.busy(!0);var a=n.createStateObject(e,i,r),o=n.getHashByState(a),h=n.getState(!1),l=n.getHashByState(h),u=n.getHash(),c=n.expectedStateId==a.id;return n.storeState(a),n.expectedStateId=a.id,n.recycleState(a),n.setTitle(a),o===l?(n.busy(!1),!1):(n.saveState(a),c||n.Adapter.trigger(t,"statechange"),!n.isHashEqual(o,u)&&!n.isHashEqual(o,n.getShortUrl(n.getLocationHref()))&&n.setHash(o,!1),n.busy(!1),!0)},n.replaceState=function(e,i,r,s){if(r=encodeURI(r).replace(/%25/g,"%"),n.getHashByUrl(r))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(s!==!1&&n.busy())return n.pushQueue({scope:n,callback:n.replaceState,args:arguments,queue:s}),!1;n.busy(!0);var a=n.createStateObject(e,i,r),o=n.getHashByState(a),h=n.getState(!1),l=n.getHashByState(h),u=n.getStateByIndex(-2);return n.discardState(h,a,u),o===l?(n.storeState(a),n.expectedStateId=a.id,n.recycleState(a),n.setTitle(a),n.saveState(a),n.Adapter.trigger(t,"statechange"),n.busy(!1)):n.pushState(a.data,a.title,a.url,!1),!0}),n.emulated.pushState&&n.getHash()&&!n.emulated.hashChange&&n.Adapter.onDomLoad(function(){n.Adapter.trigger(t,"hashchange")}),void 0)},"undefined"!=typeof n.init&&n.init()}(window),function(t,e){"use strict";var i=t.console||e,r=t.document,s=t.navigator,n=!1,a=t.setTimeout,o=t.clearTimeout,h=t.setInterval,l=t.clearInterval,u=t.JSON,c=t.alert,d=t.History=t.History||{},p=t.history;try{n=t.sessionStorage,n.setItem("TEST","1"),n.removeItem("TEST")}catch(f){n=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,"undefined"!=typeof d.init)throw new Error("History.js Core has already been loaded...");d.init=function(){return"undefined"==typeof d.Adapter?!1:("undefined"!=typeof d.initCore&&d.initCore(),"undefined"!=typeof d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(){if("undefined"!=typeof d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.disableSuid=d.options.disableSuid||!1,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||r.title,d.options.html4Mode=d.options.html4Mode||!1,d.options.delayInit=d.options.delayInit||!1,d.intervalList=[],d.clearAllIntervals=function(){var t,e=d.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)l(e[t]);d.intervalList=null}},d.debug=function(){(d.options.debug||!1)&&d.log.apply(d,arguments)},d.log=function(){var t,e,s,n,a,o="undefined"!=typeof i&&"undefined"!=typeof i.log&&"undefined"!=typeof i.log.apply,h=r.getElementById("log");for(o?(n=Array.prototype.slice.call(arguments),t=n.shift(),"undefined"!=typeof i.debug?i.debug.apply(i,[t,n]):i.log.apply(i,[t,n])):t="\n"+arguments[0]+"\n",e=1,s=arguments.length;s>e;++e){if(a=arguments[e],"object"==typeof a&&"undefined"!=typeof u)try{a=u.stringify(a)}catch(l){}t+="\n"+a+"\n"}return h?(h.value+=t+"\n-----\n",h.scrollTop=h.scrollHeight-h.clientHeight):o||c(t),!0},d.getInternetExplorerMajorVersion=function(){var t=d.getInternetExplorerMajorVersion.cached="undefined"!=typeof d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=r.createElement("div"),i=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&i[0];);return t>4?t:!1}();return t},d.isInternetExplorer=function(){var t=d.isInternetExplorer.cached="undefined"!=typeof d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion());return t},d.emulated=d.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(s.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(s.userAgent)),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in r)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===s.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===s.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},d.cloneObject=function(t){var e,i;return t?(e=u.stringify(t),i=u.parse(e)):i={},i},d.getRootUrl=function(){var t=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(t+=":"+r.location.port),t+="/"},d.getBaseHref=function(){var t=r.getElementsByTagName("base"),e=null,i="";return 1===t.length&&(e=t[0],i=e.href.replace(/[^\/]+$/,"")),i=i.replace(/\/+$/,""),i&&(i+="/"),i},d.getBaseUrl=function(){var t=d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl();return t},d.getPageUrl=function(){var t,e=d.getState(!1,!1),i=(e||{}).url||d.getLocationHref();return t=i.replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},d.getBasePageUrl=function(){var t=d.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},d.getFullUrl=function(t,e){var i=t,r=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(i="/"===r?d.getRootUrl()+t.replace(/^\/+/,""):"#"===r?d.getPageUrl().replace(/#.*/,"")+t:"?"===r?d.getPageUrl().replace(/[\?#].*/,"")+t:e?d.getBaseUrl()+t.replace(/^(\.\/)+/,""):d.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},d.getShortUrl=function(t){var e=t,i=d.getBaseUrl(),r=d.getRootUrl();return d.emulated.pushState&&(e=e.replace(i,"")),e=e.replace(r,"/"),d.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.getLocationHref=function(t){return t=t||r,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},d.store={},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.normalizeStore=function(){d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{}},d.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var i=d.getLastSavedState();return!i&&e&&(i=d.createStateObject()),t&&(i=d.cloneObject(i),i.url=i.cleanUrl||i.url),i},d.getIdByState=function(t){var e,i=d.extractId(t.url);if(!i)if(e=d.getStateString(t),"undefined"!=typeof d.stateToId[e])i=d.stateToId[e];else if("undefined"!=typeof d.store.stateToId[e])i=d.store.stateToId[e];else{for(;i=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof d.idToState[i]||"undefined"!=typeof d.store.idToState[i];);d.stateToId[e]=i,d.idToState[i]=t}return i},d.normalizeState=function(t){var e,i;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=d.getFullUrl(t.url?t.url:d.getLocationHref()),e.hash=d.getShortUrl(e.url),e.data=d.cloneObject(t.data),e.id=d.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,i=!d.isEmptyObject(e.data),(e.title||i)&&d.options.disableSuid!==!0&&(e.hash=d.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=d.getFullUrl(e.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},d.createStateObject=function(t,e,i){var r={data:t,title:e,url:i};return r=d.normalizeState(r)},d.getStateById=function(t){t=String(t);var i=d.idToState[t]||d.store.idToState[t]||e;return i},d.getStateString=function(t){var e,i,r;return e=d.normalizeState(t),i={data:e.data,title:t.title,url:t.url},r=u.stringify(i)},d.getStateId=function(t){var e,i;return e=d.normalizeState(t),i=e.id},d.getHashByState=function(t){var e,i;return e=d.normalizeState(t),i=e.hash},d.extractId=function(t){var e,i,r,s;return s=-1!=t.indexOf("#")?t.split("#")[0]:t,i=/(.*)\&_suid=([0-9]+)$/.exec(s),r=i?i[1]||t:t,e=i?String(i[2]||""):"",e||!1},d.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},d.extractState=function(t,e){var i,r,s=null;return e=e||!1,i=d.extractId(t),i&&(s=d.getStateById(i)),s||(r=d.getFullUrl(t),i=d.getIdByUrl(r)||!1,i&&(s=d.getStateById(i)),!s&&e&&!d.isTraditionalAnchor(t)&&(s=d.createStateObject(null,null,r))),s},d.getIdByUrl=function(t){var i=d.urlToId[t]||d.store.urlToId[t]||e;return i},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||e},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||e},d.hasUrlDuplicate=function(t){var e,i=!1;return e=d.extractState(t.url),i=e&&e.id!==t.id},d.storeState=function(t){return d.urlToId[t.url]=t.id,d.storedStates.push(d.cloneObject(t)),t},d.isLastSavedState=function(t){var e,i,r,s=!1;return d.savedStates.length&&(e=t.id,i=d.getLastSavedState(),r=i.id,s=e===r),s},d.saveState=function(t){return d.isLastSavedState(t)?!1:(d.savedStates.push(d.cloneObject(t)),!0)},d.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?d.savedStates[d.savedStates.length-1]:0>t?d.savedStates[d.savedStates.length+t]:d.savedStates[t]},d.getCurrentIndex=function(){var t=null;return t=d.savedStates.length<1?0:d.savedStates.length-1},d.getHash=function(t){var e,i=d.getLocationHref(t);return e=d.getHashByUrl(i)},d.unescapeHash=function(t){var e=d.normalizeHash(t);return e=decodeURIComponent(e)},d.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},d.setHash=function(t,e){var i,s;return e!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:e}),!1):(d.busy(!0),i=d.extractState(t,!0),i&&!d.emulated.pushState?d.pushState(i.data,i.title,i.url,!1):d.getHash()!==t&&(d.bugs.setHash?(s=d.getPageUrl(),d.pushState(null,null,s+"#"+t,!1)):r.location.hash=t),d)},d.escapeHash=function(e){var i=d.normalizeHash(e);return i=t.encodeURIComponent(i),d.bugs.hashEscape||(i=i.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),i},d.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=d.unescapeHash(e)},d.setTitle=function(t){var e,i=t.title;i||(e=d.getStateByIndex(0),e&&e.url===t.url&&(i=e.title||d.options.initialTitle));try{r.getElementsByTagName("title")[0].innerHTML=i.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(s){}return r.title=i,d},d.queues=[],d.busy=function(t){if("undefined"!=typeof t?d.busy.flag=t:"undefined"==typeof d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){o(d.busy.timeout);var e=function(){var t,i,r;if(!d.busy.flag)for(t=d.queues.length-1;t>=0;--t)i=d.queues[t],0!==i.length&&(r=i.shift(),d.fireQueueItem(r),d.busy.timeout=a(e,d.options.busyDelay))};d.busy.timeout=a(e,d.options.busyDelay)}return d.busy.flag},d.busy.flag=!1,d.fireQueueItem=function(t){return t.callback.apply(t.scope||d,t.args||[])},d.pushQueue=function(t){return d.queues[t.queue||0]=d.queues[t.queue||0]||[],d.queues[t.queue||0].push(t),d},d.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),d.busy()?d.pushQueue(t):d.fireQueueItem(t),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(o(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(t){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=a(function(){return d.doubleCheckClear(),d.stateChanged||t(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var e,i=d.extractState(d.getLocationHref());return d.isLastSavedState(i)?void 0:(e=i,e||(e=d.createStateObject()),d.Adapter.trigger(t,"popstate"),d)},d.back=function(t){return t!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),p.go(-1),!0)},d.forward=function(t){return t!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),p.go(1),!0)},d.go=function(t,e){var i;if(t>0)for(i=1;t>=i;++i)d.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(i=-1;i>=t;--i)d.back(e)}return d},d.emulated.pushState){var f=function(){};d.pushState=d.pushState||f,d.replaceState=d.replaceState||f}else d.onPopState=function(e,i){var r,s,n=!1,a=!1;return d.doubleCheckComplete(),r=d.getHash(),r?(s=d.extractState(r||d.getLocationHref(),!0),s?d.replaceState(s.data,s.title,s.url,!1):(d.Adapter.trigger(t,"anchorchange"),d.busy(!1)),d.expectedStateId=!1,!1):(n=d.Adapter.extractEventData("state",e,i)||!1,a=n?d.getStateById(n):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(d.getLocationHref()),a||(a=d.createStateObject(null,null,d.getLocationHref())),d.expectedStateId=!1,d.isLastSavedState(a)?(d.busy(!1),!1):(d.storeState(a),d.saveState(a),d.setTitle(a),d.Adapter.trigger(t,"statechange"),d.busy(!1),!0))},d.Adapter.bind(t,"popstate",d.onPopState),d.pushState=function(e,i,r,s){if(d.getHashByUrl(r)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(s!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:s}),!1;d.busy(!0);var n=d.createStateObject(e,i,r);return d.isLastSavedState(n)?d.busy(!1):(d.storeState(n),d.expectedStateId=n.id,p.pushState(n.id,n.title,n.url),d.Adapter.trigger(t,"popstate")),!0},d.replaceState=function(e,i,r,s){if(d.getHashByUrl(r)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(s!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:s}),!1;d.busy(!0);var n=d.createStateObject(e,i,r);return d.isLastSavedState(n)?d.busy(!1):(d.storeState(n),d.expectedStateId=n.id,p.replaceState(n.id,n.title,n.url),d.Adapter.trigger(t,"popstate")),!0};if(n){try{d.store=u.parse(n.getItem("History.store"))||{}}catch(g){d.store={}}d.normalizeStore()}else d.store={},d.normalizeStore();d.Adapter.bind(t,"unload",d.clearAllIntervals),d.saveState(d.storeState(d.extractState(d.getLocationHref(),!0))),n&&(d.onUnload=function(){var t,e,i;try{t=u.parse(n.getItem("History.store"))||{}}catch(r){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in d.idToState)d.idToState.hasOwnProperty(e)&&(t.idToState[e]=d.idToState[e]);for(e in d.urlToId)d.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=d.urlToId[e]);for(e in d.stateToId)d.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=d.stateToId[e]);d.store=t,d.normalizeStore(),i=u.stringify(t);try{n.setItem("History.store",i)}catch(s){if(s.code!==DOMException.QUOTA_EXCEEDED_ERR)throw s;n.length&&(n.removeItem("History.store"),n.setItem("History.store",i))}},d.intervalList.push(h(d.onUnload,d.options.storeInterval)),d.Adapter.bind(t,"beforeunload",d.onUnload),d.Adapter.bind(t,"unload",d.onUnload)),d.emulated.pushState||(d.bugs.safariPoll&&d.intervalList.push(h(d.safariStatePoll,d.options.safariPollInterval)),("Apple Computer, Inc."===s.vendor||"Mozilla"===(s.appCodeName||""))&&(d.Adapter.bind(t,"hashchange",function(){d.Adapter.trigger(t,"popstate")}),d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(t,"hashchange")})))},(!d.options||!d.options.delayInit)&&d.init()}(window),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.4.1",t.buildDate="Thu, 12 Dec 2013 23:33:38 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype;e.type=null,e.target=null,e.currentTarget=null,e.eventPhase=0,e.bubbles=!1,e.cancelable=!1,e.timeStamp=0,e.defaultPrevented=!1,e.propagationStopped=!1,e.immediatePropagationStopped=!1,e.removed=!1,e.initialize=function(t,e,i){this.type=t,this.bubbles=e,this.cancelable=i,this.timeStamp=(new Date).getTime()},e.preventDefault=function(){this.defaultPrevented=!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e._listeners=null,e._captureListeners=null,e.initialize=function(){},e.addEventListener=function(t,e,i){var r;r=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var s=r[t];return s&&this.removeEventListener(t,e,i),s=r[t],s?s.push(e):r[t]=[e],e},e.on=function(t,e,i,r,s,n){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,s),r&&t.remove()},n)},e.removeEventListener=function(t,e,i){var r=i?this._captureListeners:this._listeners;if(r){var s=r[t];if(s)for(var n=0,a=s.length;a>n;n++)if(s[n]==e){1==a?delete r[t]:s.splice(n,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e){if("string"==typeof t){var i=this._listeners;if(!i||!i[t])return!1;t=new createjs.Event(t)}if(t.target=e||this,t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var n,a=s.length;for(n=a-1;n>=0&&!t.propagationStopped;n--)s[n]._dispatchEvent(t,1+(0==n));for(n=1;a>n&&!t.propagationStopped;n++)s[n]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,r=1==e?this._captureListeners:this._listeners;if(t&&r){var s=r[t.type];if(!s||!(i=s.length))return;t.currentTarget=this,t.eventPhase=e,t.removed=!1,s=s.slice();for(var n=0;i>n&&!t.immediatePropagationStopped;n++){var a=s[n];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(t,e){for(var i=0,r=t.length;r>i;i++)if(e===t[i])return i;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.init()};t.prototype=new createjs.EventDispatcher;var e=t.prototype,i=t;i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?)|(.{0,2}\/{1}))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.PATH_PATTERN=/^(?:(\w+:)\/{2})|(.{0,2}\/{1})?([\/.]*?(?:[^?]+)?\/?)?$/,e.loaded=!1,e.canceled=!1,e.progress=0,e._item=null,e.getItem=function(){return this._item},e.init=function(){},e.load=function(){},e.close=function(){},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.Event("progress"),e.loaded=this.progress,e.total=1):(e=t,this.progress=t.loaded/t.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),e.progress=this.progress,this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){this._isCanceled()||this.dispatchEvent("complete")},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.Event("error")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e._parseURI=function(t){return t?t.match(i.FILE_PATTERN):null},e._parsePath=function(t){return t?t.match(i.PATH_PATTERN):null},e._formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var r in t)i.push(r+"="+escape(t[r]));return e&&(i=i.concat(e)),i.join("&")},e.buildPath=function(t,e){if(null==e)return t;var i=[],r=t.indexOf("?");if(-1!=r){var s=t.slice(r+1);i=i.concat(s.split("&"))}return-1!=r?t.slice(0,r)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},e._isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var r=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return r},e._isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.init(t,e,i)},e=t.prototype=new createjs.AbstractLoader,i=t;i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.SVG="svg",i.TEXT="text",i.XML="xml",i.POST="POST",i.GET="GET",e._basePath=null,e._crossOrigin="",e.useXHR=!0,e.stopOnError=!1,e.maintainScriptOrder=!0,e.next=null,e._typeCallbacks=null,e._extensionCallbacks=null,e._loadStartWasDispatched=!1,e._maxConnections=1,e._currentlyLoadingScript=null,e._currentLoads=null,e._loadQueue=null,e._loadQueueBackup=null,e._loadItemsById=null,e._loadItemsBySrc=null,e._loadedResults=null,e._loadedRawResults=null,e._numItems=0,e._numItemsLoaded=0,e._scriptOrder=null,e._loadedScripts=null,e.init=function(t,e,i){this._numItems=this._numItemsLoaded=0,this._paused=!1,this._loadStartWasDispatched=!1,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._scriptOrder=[],this._loadedScripts=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._typeCallbacks={},this._extensionCallbacks={},this._basePath=e,this.setUseXHR(t),this._crossOrigin=i===!0?"Anonymous":i===!1||null==i?"":i},e.setUseXHR=function(t){return this.useXHR=0!=t&&null!=window.XMLHttpRequest,this.useXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var r=e.pop(),s=this.getResult(r);for(n=this._loadQueue.length-1;n>=0;n--)if(a=this._loadQueue[n].getItem(),a.id==r||a.src==r){this._loadQueue.splice(n,1)[0].cancel();break}for(n=this._loadQueueBackup.length-1;n>=0;n--)if(a=this._loadQueueBackup[n].getItem(),a.id==r||a.src==r){this._loadQueueBackup.splice(n,1)[0].cancel();break}if(s)delete this._loadItemsById[s.id],delete this._loadItemsBySrc[s.src],this._disposeItem(s);else for(var n=this._currentLoads.length-1;n>=0;n--){var a=this._currentLoads[n].getItem();if(a.id==r||a.src==r){this._currentLoads.splice(n,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var o in this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.useXHR)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,r=this._loadQueueBackup.length;r>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},i.isBinary=function(t){switch(t){case createjs.LoadQueue.IMAGE:case createjs.LoadQueue.BINARY:return!0;default:return!1}},i.isText=function(t){switch(t){case createjs.LoadQueue.TEXT:case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.XML:case createjs.LoadQueue.HTML:case createjs.LoadQueue.CSS:case createjs.LoadQueue.SVG:case createjs.LoadQueue.JAVASCRIPT:return!0;default:return!1}},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,r=e.types.length;r>i;i++)this._typeCallbacks[e.types[i]]=e;
if(null!=e.extensions)for(i=0,r=e.extensions.length;r>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var r=new createjs.Event("error");return r.text="PRELOAD_NO_FILE",this._sendError(r),void 0}this._addItem(t,null,i),e!==!1?this.setPaused(!1):this.setPaused(!0)},e.loadManifest=function(t,e,r){var s=null,n=null;if(t instanceof Array){if(0==t.length){var a=new createjs.Event("error");return a.text="PRELOAD_MANIFEST_EMPTY",this._sendError(a),void 0}s=t}else if("string"==typeof t)s=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){var a=new createjs.Event("error");return a.text="PRELOAD_MANIFEST_NULL",this._sendError(a),void 0}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var a=new createjs.Event("error");a.text="PRELOAD_MANIFEST_ERROR",this._sendError(a)}s=[t]}else void 0!==t.manifest&&(s=t.manifest,n=t.path)}for(var o=0,h=s.length;h>o;o++)this._addItem(s[o],n,r);e!==!1?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var r=i.id;return e&&this._loadedRawResults[r]?this._loadedRawResults[r]:this._loadedResults[r]},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1},e._addItem=function(t,e,i){var r=this._createLoadItem(t,e,i);if(null!=r){var s=this._createLoader(r);null!=s&&(this._loadQueue.push(s),this._loadQueueBackup.push(s),this._numItems++,this._updateProgress(),this.maintainScriptOrder&&r.type==createjs.LoadQueue.JAVASCRIPT&&s instanceof createjs.XHRLoader&&(this._scriptOrder.push(r),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var r=null;switch(typeof t){case"string":r={src:t};break;case"object":r=window.HTMLAudioElement&&t instanceof window.HTMLAudioElement?{tag:t,src:r.tag.src,type:createjs.LoadQueue.SOUND}:t;break;default:return null}var s=this._parseURI(r.src);null!=s&&(r.ext=s[6]),null==r.type&&(r.type=this._getTypeByExtension(r.ext));var n="",a=i||this._basePath,o=r.src;if(s&&null==s[1]&&null==s[3])if(e){n=e;var h=this._parsePath(e);o=e+o,null!=a&&h&&null==h[1]&&null==h[2]&&(n=a+n)}else null!=a&&(n=a);if(r.src=n+r.src,r.path=n,(r.type==createjs.LoadQueue.JSON||r.type==createjs.LoadQueue.MANIFEST)&&(r._loadAsJSONP=null!=r.callback),r.type==createjs.LoadQueue.JSONP&&null==r.callback)throw new Error("callback is required for loading JSONP requests.");(void 0===r.tag||null===r.tag)&&(r.tag=this._createTag(r)),(void 0===r.id||null===r.id||""===r.id)&&(r.id=o);var l=this._typeCallbacks[r.type]||this._extensionCallbacks[r.ext];if(l){var u=l.callback.call(l.scope,r.src,r.type,r.id,r.data,n,this);if(u===!1)return null;u===!0||(null!=u.src&&(r.src=u.src),null!=u.id&&(r.id=u.id),null!=u.tag&&(r.tag=u.tag),null!=u.completeHandler&&(r.completeHandler=u.completeHandler),u.type&&(r.type=u.type),s=this._parseURI(r.src),null!=s&&null!=s[6]&&(r.ext=s[6].toLowerCase()))}return this._loadItemsById[r.id]=r,this._loadItemsBySrc[r.src]=r,r},e._createLoader=function(t){var e=this.useXHR;switch(t.type){case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:e=!t._loadAsJSONP;break;case createjs.LoadQueue.XML:case createjs.LoadQueue.TEXT:e=!0;break;case createjs.LoadQueue.SOUND:case createjs.LoadQueue.JSONP:e=!1;break;case null:return null}return e?new createjs.XHRLoader(t,this._crossOrigin):new createjs.TagLoader(t)},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];if(this.maintainScriptOrder&&e instanceof createjs.TagLoader&&e.getItem().type==createjs.LoadQueue.JAVASCRIPT){if(this._currentlyLoadingScript)continue;this._currentlyLoadingScript=!0}this._loadQueue.splice(t,1),t--,this._loadItem(e)}}},e._loadItem=function(t){t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileError=function(t){var e=t.target;this._numItemsLoaded++,this._updateProgress();var i=new createjs.Event("error");i.text="FILE_LOAD_ERROR",i.item=e.getItem(),this._sendError(i),this.stopOnError||(this._removeLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem();if(this._loadedResults[i.id]=e.getResult(),e instanceof createjs.XHRLoader&&(this._loadedRawResults[i.id]=e.getResult(!0)),this._removeLoadItem(e),this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT){if(!(e instanceof createjs.TagLoader))return this._loadedScripts[createjs.indexOf(this._scriptOrder,i)]=i,this._checkScriptLoadOrder(e),void 0;this._currentlyLoadingScript=!1}if(delete i._loadAsJSONP,i.type==createjs.LoadQueue.MANIFEST){var r=e.getResult();null!=r&&void 0!==r.manifest&&this.loadManifest(r,!0)}this._processFinishedLoad(i,e)},e._processFinishedLoad=function(t,e){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(i!==!0){var r=this._loadedResults[i.id];(document.body||document.getElementsByTagName("body")[0]).appendChild(r),this._processFinishedLoad(i),this._loadedScripts[e]=!0}}},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,r=0,s=this._currentLoads.length;s>r;r++)i+=this._currentLoads[r].progress;t+=i/e*(e/this._numItems)}this._sendProgress(t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._createTag=function(t){var e=null;switch(t.type){case createjs.LoadQueue.IMAGE:return e=document.createElement("img"),""==this._crossOrigin||this._isLocal(t)||(e.crossOrigin=this._crossOrigin),e;case createjs.LoadQueue.SOUND:return e=document.createElement("audio"),e.autoplay=!1,e;case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.JAVASCRIPT:case createjs.LoadQueue.MANIFEST:return e=document.createElement("script"),e.type="text/javascript",e;case createjs.LoadQueue.CSS:return e=this.useXHR?document.createElement("style"):document.createElement("link"),e.rel="stylesheet",e.type="text/css",e;case createjs.LoadQueue.SVG:return this.useXHR?e=document.createElement("svg"):(e=document.createElement("object"),e.type="image/svg+xml"),e}return null},e._getTypeByExtension=function(t){if(null==t)return createjs.LoadQueue.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.LoadQueue.IMAGE;case"ogg":case"mp3":case"wav":return createjs.LoadQueue.SOUND;case"json":return createjs.LoadQueue.JSON;case"xml":return createjs.LoadQueue.XML;case"css":return createjs.LoadQueue.CSS;case"js":return createjs.LoadQueue.JAVASCRIPT;case"svg":return createjs.LoadQueue.SVG;default:return createjs.LoadQueue.TEXT}},e._sendFileProgress=function(t,e){if(this._isCanceled())return this._cleanUp(),void 0;if(this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=t;var r=function(){};r.init=function(){var t=navigator.userAgent;r.isFirefox=t.indexOf("Firefox")>-1,r.isOpera=null!=window.opera,r.isChrome=t.indexOf("Chrome")>-1,r.isIOS=t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1},r.init(),createjs.LoadQueue.BrowserDetect=r}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.init(t)},e=t.prototype=new createjs.AbstractLoader;e._loadTimeout=null,e._tagCompleteProxy=null,e._isAudio=!1,e._tag=null,e._jsonResult=null,e.init=function(t){this._item=t,this._tag=t.tag,this._isAudio=window.HTMLAudioElement&&t.tag instanceof window.HTMLAudioElement,this._tagCompleteProxy=createjs.proxy(this._handleLoad,this)},e.getResult=function(){return this._item.type==createjs.LoadQueue.JSONP||this._item.type==createjs.LoadQueue.MANIFEST?this._jsonResult:this._tag},e.cancel=function(){this.canceled=!0,this._clean()},e.load=function(){var t=this._item,e=this._tag;clearTimeout(this._loadTimeout);var i=createjs.LoadQueue.LOAD_TIMEOUT;0==i&&(i=createjs.LoadQueue.loadTimeout),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),i),this._isAudio&&(e.src=null,e.preload="auto"),e.onerror=createjs.proxy(this._handleError,this),this._isAudio?(e.onstalled=createjs.proxy(this._handleStalled,this),e.addEventListener("canplaythrough",this._tagCompleteProxy,!1)):(e.onload=createjs.proxy(this._handleLoad,this),e.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this));var r=this.buildPath(t.src,t.values);switch(t.type){case createjs.LoadQueue.CSS:e.href=r;break;case createjs.LoadQueue.SVG:e.data=r;break;default:e.src=r}if(t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.MANIFEST){if(null==t.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[t.callback])throw new Error('JSONP callback "'+t.callback+'" already exists on window. You need to specify a different callback. Or re-name the current one.');window[t.callback]=createjs.proxy(this._handleJSONPLoad,this)}(t.type==createjs.LoadQueue.SVG||t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.JSON||t.type==createjs.LoadQueue.MANIFEST||t.type==createjs.LoadQueue.JAVASCRIPT||t.type==createjs.LoadQueue.CSS)&&(this._startTagVisibility=e.style.visibility,e.style.visibility="hidden",(document.body||document.getElementsByTagName("body")[0]).appendChild(e)),null!=e.load&&e.load()},e._handleJSONPLoad=function(t){this._jsonResult=t},e._handleTimeout=function(){this._clean();var t=new createjs.Event("error");t.text="PRELOAD_TIMEOUT",this._sendError(t)},e._handleStalled=function(){},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this.getItem().tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleLoad()},e._handleLoad=function(){if(!this._isCanceled()){var t=this.getItem(),e=t.tag;if(!(this.loaded||this._isAudio&&4!==e.readyState)){switch(this.loaded=!0,t.type){case createjs.LoadQueue.SVG:case createjs.LoadQueue.JSON:case createjs.LoadQueue.JSONP:case createjs.LoadQueue.MANIFEST:case createjs.LoadQueue.CSS:e.style.visibility=this._startTagVisibility,(document.body||document.getElementsByTagName("body")[0]).removeChild(e)}this._clean(),this._sendComplete()}}},e._clean=function(){clearTimeout(this._loadTimeout);var t=this.getItem(),e=t.tag;null!=e&&(e.onload=null,e.removeEventListener&&e.removeEventListener("canplaythrough",this._tagCompleteProxy,!1),e.onstalled=null,e.onprogress=null,e.onerror=null,null!=e.parentNode&&t.type==createjs.LoadQueue.SVG&&t.type==createjs.LoadQueue.JSON&&t.type==createjs.LoadQueue.MANIFEST&&t.type==createjs.LoadQueue.CSS&&t.type==createjs.LoadQueue.JSONP&&e.parentNode.removeChild(e));var t=this.getItem();(t.type==createjs.LoadQueue.JSONP||t.type==createjs.LoadQueue.MANIFEST)&&(window[t.callback]=null)},e.toString=function(){return"[PreloadJS TagLoader]"},createjs.TagLoader=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.init(t,e)},e=t.prototype=new createjs.AbstractLoader;e._request=null,e._loadTimeout=null,e._xhrLevel=1,e._response=null,e._rawResponse=null,e._crossOrigin="",e.init=function(t,e){this._item=t,this._crossOrigin=e,!this._createXHR(t)},e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return this._handleError(),void 0;if(this._request.onloadstart=createjs.proxy(this._handleLoadStart,this),this._request.onprogress=createjs.proxy(this._handleProgress,this),this._request.onabort=createjs.proxy(this._handleAbort,this),this._request.onerror=createjs.proxy(this._handleError,this),this._request.ontimeout=createjs.proxy(this._handleTimeout,this),1==this._xhrLevel){var t=createjs.LoadQueue.LOAD_TIMEOUT;if(0==t)t=createjs.LoadQueue.loadTimeout;else try{console.warn("LoadQueue.LOAD_TIMEOUT has been deprecated in favor of LoadQueue.loadTimeout")}catch(e){}this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),t)}this._request.onload=createjs.proxy(this._handleLoad,this),this._request.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);try{this._item.values&&this._item.method!=createjs.LoadQueue.GET?this._item.method==createjs.LoadQueue.POST&&this._request.send(this._formatQueryString(this._item.values)):this._request.send()}catch(i){var r=new createjs.Event("error");r.error=i,this._sendError(r)}},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.Event("progress");e.loaded=t.loaded,e.total=t.total,this._sendProgress(e)}},e._handleLoadStart=function(){clearTimeout(this._loadTimeout),this._sendLoadStart()},e._handleAbort=function(){this._clean();var t=new createjs.Event("error");t.text="XHR_ABORTED",this._sendError(t)},e._handleError=function(){this._clean();var t=new createjs.Event("error");this._sendError(t)},e._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(){if(!this.loaded){if(this.loaded=!0,!this._checkError())return this._handleError(),void 0;this._response=this._getResponse(),this._clean();var t=this._generateTag();t&&this._sendComplete()}},e._handleTimeout=function(t){this._clean();var e=new createjs.Event("error");e.text="PRELOAD_TIMEOUT",this._sendError(t)},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return!1}return!0},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=this._isCrossDomain(t),i=null;if(e&&window.XDomainRequest)i=new XDomainRequest;else if(window.XMLHttpRequest)i=new XMLHttpRequest;else try{i=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(r){try{i=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){return!1}}}createjs.LoadQueue.isText(t.type)&&i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8"),this._xhrLevel="string"==typeof i.responseType?2:1;var s=null;return s=t.method==createjs.LoadQueue.GET?this.buildPath(t.src,t.values):t.src,i.open(t.method||createjs.LoadQueue.GET,s,!0),e&&i instanceof XMLHttpRequest&&1==this._xhrLevel&&i.setRequestHeader("Origin",location.origin),t.values&&t.method==createjs.LoadQueue.POST&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),createjs.LoadQueue.isBinary(t.type)&&(i.responseType="arraybuffer"),this._request=i,!0},e._clean=function(){clearTimeout(this._loadTimeout);var t=this._request;t.onloadstart=null,t.onprogress=null,t.onabort=null,t.onerror=null,t.onload=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null},e._generateTag=function(){var t=this._item.type,e=this._item.tag;switch(t){case createjs.LoadQueue.IMAGE:return e.onload=createjs.proxy(this._handleTagReady,this),""!=this._crossOrigin&&(e.crossOrigin="Anonymous"),e.src=this.buildPath(this._item.src,this._item.values),this._rawResponse=this._response,this._response=e,!1;case createjs.LoadQueue.JAVASCRIPT:return e=document.createElement("script"),e.text=this._response,this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.CSS:var i=document.getElementsByTagName("head")[0];if(i.appendChild(e),e.styleSheet)e.styleSheet.cssText=this._response;else{var r=document.createTextNode(this._response);e.appendChild(r)}return this._rawResponse=this._response,this._response=e,!0;case createjs.LoadQueue.XML:var s=this._parseXML(this._response,"text/xml");return this._rawResponse=this._response,this._response=s,!0;case createjs.LoadQueue.SVG:var s=this._parseXML(this._response,"image/svg+xml");return this._rawResponse=this._response,null!=s.documentElement?(e.appendChild(s.documentElement),this._response=e):this._response=s,!0;case createjs.LoadQueue.JSON:case createjs.LoadQueue.MANIFEST:var n={};try{n=JSON.parse(this._response)}catch(a){n=a}return this._rawResponse=this._response,this._response=n,!0}return!0},e._parseXML=function(t,e){var i=null;try{if(window.DOMParser){var r=new DOMParser;i=r.parseFromString(t,e)}else i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(s){}return i},e._handleTagReady=function(){this._sendComplete()},e.toString=function(){return"[PreloadJS XHRLoader]"},createjs.XHRLoader=t}(),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,r,s,n,a,o=gap,h=e[t];switch(h&&"object"==typeof h&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(e,t,h)),typeof h){case"string":return quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(h)){for(n=h.length,i=0;n>i;i+=1)a[i]=str(i,h)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+o+"]":"["+a.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(n=rep.length,i=0;n>i;i+=1)"string"==typeof rep[i]&&(r=rep[i],s=str(r,h),s&&a.push(quote(r)+(gap?": ":":")+s));else for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(s=str(r,h),s&&a.push(quote(r)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+o+"}":"{"+a.join(",")+"}",gap=o,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var r;if(gap="",indent="","number"==typeof i)for(r=0;i>r;r+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,r,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r=walk(s,i),void 0!==r?s[i]=r:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){var t=this,e=e||{};e.WEBGL_RENDERER=0,e.CANVAS_RENDERER=1,e.VERSION="v1.6.1",e.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},e.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},e._UID=0,"undefined"!=typeof Float32Array?(e.Float32Array=Float32Array,e.Uint16Array=Uint16Array):(e.Float32Array=Array,e.Uint16Array=Array),e.INTERACTION_FREQUENCY=30,e.AUTO_PREVENT_DEFAULT=!0,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.dontSayHello=!0,e.sayHello=function(t){if(!e.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["%c %c %c Pixi.js "+e.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,i)}else window.console&&console.log("Pixi.js "+e.VERSION+" - http://www.pixijs.com/");e.dontSayHello=!0}},e.Point=function(t,e){this.x=t||0,this.y=e||0},e.Point.prototype.clone=function(){return new e.Point(this.x,this.y)},e.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},e.Point.prototype.constructor=e.Point,e.Rectangle=function(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0},e.Rectangle.prototype.clone=function(){return new e.Rectangle(this.x,this.y,this.width,this.height)},e.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},e.Rectangle.prototype.constructor=e.Rectangle,e.EmptyRectangle=new e.Rectangle(0,0,0,0),e.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var i=[],r=0,s=t.length;s>r;r+=2)i.push(new e.Point(t[r],t[r+1]));t=i}this.points=t},e.Polygon.prototype.clone=function(){for(var t=[],i=0;i<this.points.length;i++)t.push(this.points[i].clone());return new e.Polygon(t)},e.Polygon.prototype.contains=function(t,e){for(var i=!1,r=0,s=this.points.length-1;r<this.points.length;s=r++){var n=this.points[r].x,a=this.points[r].y,o=this.points[s].x,h=this.points[s].y,l=a>e!=h>e&&(o-n)*(e-a)/(h-a)+n>t;l&&(i=!i)}return i},e.Polygon.prototype.constructor=e.Polygon,e.Circle=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},e.Circle.prototype.clone=function(){return new e.Circle(this.x,this.y,this.radius)},e.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,r=this.y-e,s=this.radius*this.radius;return i*=i,r*=r,s>=i+r},e.Circle.prototype.getBounds=function(){return new e.Rectangle(this.x-this.radius,this.y-this.radius,this.width,this.height)},e.Circle.prototype.constructor=e.Circle,e.Ellipse=function(t,e,i,r){this.x=t||0,this.y=e||0,this.width=i||0,this.height=r||0},e.Ellipse.prototype.clone=function(){return new e.Ellipse(this.x,this.y,this.width,this.height)},e.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,1>=i+r},e.Ellipse.prototype.getBounds=function(){return new e.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},e.Ellipse.prototype.constructor=e.Ellipse,e.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},e.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},e.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.c,e[2]=0,e[3]=this.b,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.b,e[2]=this.tx,e[3]=this.c,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},e.identityMatrix=new e.Matrix,e.determineMatrixArrayType=function(){return"undefined"!=typeof Float32Array?Float32Array:Array},e.Matrix2=e.determineMatrixArrayType(),e.DisplayObject=function(){this.position=new e.Point,this.scale=new e.Point(1,1),this.pivot=new e.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new e.Matrix,this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new e.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},e.DisplayObject.prototype.constructor=e.DisplayObject,e.DisplayObject.prototype.setInteractive=function(t){this.interactive=t},Object.defineProperty(e.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(e.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(e.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(e.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var r=t[i].passes,s=0;s<r.length;s++)e.push(r[s]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(e.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),e.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.parent.worldTransform,e=this.worldTransform,i=this.pivot.x,r=this.pivot.y,s=this._cr*this.scale.x,n=-this._sr*this.scale.y,a=this._sr*this.scale.x,o=this._cr*this.scale.y,h=this.position.x-s*i-r*n,l=this.position.y-o*r-i*a,u=t.a,c=t.b,d=t.c,p=t.d;e.a=u*s+c*a,e.b=u*n+c*o,e.tx=u*h+c*l+t.tx,e.c=d*s+p*a,e.d=d*n+p*o,e.ty=d*h+p*l+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha},e.DisplayObject.prototype.getBounds=function(t){return t=t,e.EmptyRectangle},e.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(e.identityMatrix)},e.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},e.DisplayObject.prototype.generateTexture=function(t){var i=this.getLocalBounds(),r=new e.RenderTexture(0|i.width,0|i.height,t);return r.render(this,new e.Point(-i.x,-i.y)),r},e.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},e.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?e.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):e.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},e.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var i=new e.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new e.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,this._cachedSprite.texture.render(this,new e.Point(-t.x,-t.y)),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=r,this._cacheAsBitmap=!0},e.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},e.DisplayObject.prototype._renderWebGL=function(t){t=t},e.DisplayObject.prototype._renderCanvas=function(t){t=t},Object.defineProperty(e.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(e.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),e.DisplayObjectContainer=function(){e.DisplayObject.call(this),this.children=[]},e.DisplayObjectContainer.prototype=Object.create(e.DisplayObject.prototype),e.DisplayObjectContainer.prototype.constructor=e.DisplayObjectContainer,Object.defineProperty(e.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/(e/this.scale.x):1,this._width=t}}),Object.defineProperty(e.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/(e/this.scale.y):1,this._height=t}}),e.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},e.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length)},e.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.children.indexOf(t),r=this.children.indexOf(e);if(0>i||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[r]=t}},e.DisplayObjectContainer.prototype.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller")},e.DisplayObjectContainer.prototype.removeChild=function(t){return this.removeChildAt(this.children.indexOf(t))},e.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},e.DisplayObjectContainer.prototype.removeChildren=function(t,e){var i=t||0,r="number"==typeof e?e:this.children.length,s=r-i;if(s>0&&r>=s){for(var n=this.children.splice(i,s),a=0;a<n.length;a++){var o=n[a];this.stage&&o.removeStageReference(),o.parent=void 0}return n}throw new Error("Range Error, numeric values are outside the acceptable range")
},e.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(e.DisplayObject.prototype.updateTransform.call(this),!this._cacheAsBitmap))for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateTransform()},e.DisplayObjectContainer.prototype.getBounds=function(t){if(0===this.children.length)return e.EmptyRectangle;if(t){var i=this.worldTransform;this.worldTransform=t,this.updateTransform(),this.worldTransform=i}for(var r,s,n,a=1/0,o=1/0,h=-1/0,l=-1/0,u=!1,c=0,d=this.children.length;d>c;c++){var p=this.children[c];p.visible&&(u=!0,r=this.children[c].getBounds(t),a=a<r.x?a:r.x,o=o<r.y?o:r.y,s=r.width+r.x,n=r.height+r.y,h=h>s?h:s,l=l>n?l:n)}if(!u)return e.EmptyRectangle;var f=this._bounds;return f.x=a,f.y=o,f.width=h-a,f.height=l-o,f},e.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=e.identityMatrix;for(var i=0,r=this.children.length;r>i;i++)this.children[i].updateTransform();var s=this.getBounds();return this.worldTransform=t,s},e.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,i=this.children.length;i>e;e++){var r=this.children[e];r.setStageReference(t)}},e.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var i=this.children[t];i.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},e.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return this._renderCachedSprite(t),void 0;var e,i;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},e.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return this._renderCachedSprite(t),void 0;this._mask&&t.maskManager.pushMask(this._mask,t.context);for(var e=0,i=this.children.length;i>e;e++){var r=this.children[e];r._renderCanvas(t)}this._mask&&t.maskManager.popMask(t.context)}},e.Sprite=function(t){e.DisplayObjectContainer.call(this),this.anchor=new e.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=e.blendModes.NORMAL,t.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},e.Sprite.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Sprite.prototype.constructor=e.Sprite,Object.defineProperty(e.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(e.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),e.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},e.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},e.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,r=e*(1-this.anchor.x),s=e*-this.anchor.x,n=i*(1-this.anchor.y),a=i*-this.anchor.y,o=t||this.worldTransform,h=o.a,l=o.c,u=o.b,c=o.d,d=o.tx,p=o.ty,f=h*s+u*a+d,g=c*a+l*s+p,m=h*r+u*a+d,v=c*a+l*r+p,_=h*r+u*n+d,y=c*n+l*r+p,x=h*s+u*n+d,b=c*n+l*s+p,T=-1/0,w=-1/0,S=1/0,M=1/0;S=S>f?f:S,S=S>m?m:S,S=S>_?_:S,S=S>x?x:S,M=M>g?g:M,M=M>v?v:M,M=M>y?y:M,M=M>b?b:M,T=f>T?f:T,T=m>T?m:T,T=_>T?_:T,T=x>T?x:T,w=g>w?g:w,w=v>w?v:w,w=y>w?y:w,w=b>w?b:w;var C=this._bounds;return C.x=S,C.width=T-S,C.y=M,C.height=w-M,this._currentBounds=C,C},e.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,i;if(this._mask||this._filters){var r=t.spriteBatch;for(this._filters&&(r.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),t.maskManager.pushMask(this.mask,t),r.start()),r.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);r.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),r.start()}else for(t.spriteBatch.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},e.Sprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t.context),this.texture.valid){t.context.globalAlpha=this.worldAlpha,t.roundPixels?t.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,0|this.worldTransform.tx,0|this.worldTransform.ty):t.context.setTransform(this.worldTransform.a,this.worldTransform.c,this.worldTransform.b,this.worldTransform.d,this.worldTransform.tx,this.worldTransform.ty),t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===e.scaleModes.LINEAR);var i=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,r=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=e.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,i,r,this.texture.crop.width,this.texture.crop.height)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,i,r,this.texture.crop.width,this.texture.crop.height)}for(var s=0,n=this.children.length;n>s;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t.context)}},e.Sprite.fromFrame=function(t){var i=e.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new e.Sprite(i)},e.Sprite.fromImage=function(t,i,r){var s=e.Texture.fromImage(t,i,r);return new e.Sprite(s)},e.SpriteBatch=function(t){e.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},e.SpriteBatch.prototype=Object.create(e.DisplayObjectContainer.prototype),e.SpriteBatch.constructor=e.SpriteBatch,e.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new e.WebGLFastSpriteBatch(t),this.ready=!0},e.SpriteBatch.prototype.updateTransform=function(){e.DisplayObject.prototype.updateTransform.call(this)},e.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},e.SpriteBatch.prototype._renderCanvas=function(t){var i=t.context;i.globalAlpha=this.worldAlpha,e.DisplayObject.prototype.updateTransform.call(this);for(var r=this.worldTransform,s=!0,n=0;n<this.children.length;n++){var a=this.children[n];if(a.visible){var o=a.texture,h=o.frame;if(i.globalAlpha=this.worldAlpha*a.alpha,a.rotation%(2*Math.PI)===0)s&&(i.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty),s=!1),i.drawImage(o.baseTexture.source,h.x,h.y,h.width,h.height,a.anchor.x*-h.width*a.scale.x+a.position.x+.5|0,a.anchor.y*-h.height*a.scale.y+a.position.y+.5|0,h.width*a.scale.x,h.height*a.scale.y);else{s||(s=!0),e.DisplayObject.prototype.updateTransform.call(a);var l=a.worldTransform;t.roundPixels?i.setTransform(l.a,l.c,l.b,l.d,0|l.tx,0|l.ty):i.setTransform(l.a,l.c,l.b,l.d,l.tx,l.ty),i.drawImage(o.baseTexture.source,h.x,h.y,h.width,h.height,a.anchor.x*-h.width+.5|0,a.anchor.y*-h.height+.5|0,h.width,h.height)}}}},e.MovieClip=function(t){e.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},e.MovieClip.prototype=Object.create(e.Sprite.prototype),e.MovieClip.prototype.constructor=e.MovieClip,Object.defineProperty(e.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),e.MovieClip.prototype.stop=function(){this.playing=!1},e.MovieClip.prototype.play=function(){this.playing=!0},e.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},e.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},e.MovieClip.prototype.updateTransform=function(){if(e.Sprite.prototype.updateTransform.call(this),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},e.MovieClip.fromFrames=function(t){for(var i=[],r=0;r<t.length;r++)i.push(new e.Texture.fromFrame(t[r]));return new e.MovieClip(i)},e.MovieClip.fromImages=function(t){for(var i=[],r=0;r<t.length;r++)i.push(new e.Texture.fromImage(t[r]));return new e.MovieClip(i)},e.FilterBlock=function(){this.visible=!0,this.renderable=!0},e.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),e.Sprite.call(this,e.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},e.Text.prototype=Object.create(e.Sprite.prototype),e.Text.prototype.constructor=e.Text,Object.defineProperty(e.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(e.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),e.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},e.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},e.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],r=0,s=0;s<e.length;s++){var n=this.context.measureText(e[s]).width;i[s]=n,r=Math.max(r,n)}var a=r+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=a+this.context.lineWidth;var o=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness,h=o*e.length;this.style.dropShadow&&(h+=this.style.dropShadowDistance),this.canvas.height=h,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top";var l,u;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var c=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,d=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(s=0;s<e.length;s++)l=this.style.strokeThickness/2,u=this.style.strokeThickness/2+s*o,"right"===this.style.align?l+=r-i[s]:"center"===this.style.align&&(l+=(r-i[s])/2),this.style.fill&&this.context.fillText(e[s],l+c,u+d)}for(this.context.fillStyle=this.style.fill,s=0;s<e.length;s++)l=this.style.strokeThickness/2,u=this.style.strokeThickness/2+s*o,"right"===this.style.align?l+=r-i[s]:"center"===this.style.align&&(l+=(r-i[s])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[s],l,u),this.style.fill&&this.context.fillText(e[s],l,u);this.updateTexture()},e.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.requiresUpdate=!0},e.Text.prototype._renderWebGL=function(t){this.requiresUpdate&&(this.requiresUpdate=!1,e.updateWebGLTexture(this.texture.baseTexture,t.gl)),e.Sprite.prototype._renderWebGL.call(this,t)},e.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),e.Sprite.prototype.updateTransform.call(this)},e.Text.prototype.determineFontHeight=function(t){var i=e.Text.heightCache[t];if(!i){var r=document.getElementsByTagName("body")[0],s=document.createElement("div"),n=document.createTextNode("M");s.appendChild(n),s.setAttribute("style",t+";position:absolute;top:0;left:0"),r.appendChild(s),i=s.offsetHeight,e.Text.heightCache[t]=i,r.removeChild(s)}return i},e.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),r=0;r<i.length;r++){for(var s=this.style.wordWrapWidth,n=i[r].split(" "),a=0;a<n.length;a++){var o=this.context.measureText(n[a]).width,h=o+this.context.measureText(" ").width;0===a||h>s?(a>0&&(e+="\n"),e+=n[a],s=this.style.wordWrapWidth-o):(s-=h,e+=" "+n[a])}r<i.length-1&&(e+="\n")}return e},e.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},e.Text.heightCache={},e.BitmapText=function(t,i){e.DisplayObjectContainer.call(this),this._pool=[],this.setText(t),this.setStyle(i),this.updateText(),this.dirty=!1},e.BitmapText.prototype=Object.create(e.DisplayObjectContainer.prototype),e.BitmapText.prototype.constructor=e.BitmapText,e.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},e.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var i=t.font.split(" ");this.fontName=i[i.length-1],this.fontSize=i.length>=2?parseInt(i[i.length-2],10):e.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},e.BitmapText.prototype.updateText=function(){for(var t=e.BitmapText.fonts[this.fontName],i=new e.Point,r=null,s=[],n=0,a=[],o=0,h=this.fontSize/t.size,l=0;l<this.text.length;l++){var u=this.text.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))a.push(i.x),n=Math.max(n,i.x),o++,i.x=0,i.y+=t.lineHeight,r=null;else{var c=t.chars[u];c&&(r&&c[r]&&(i.x+=c.kerning[r]),s.push({texture:c.texture,line:o,charCode:u,position:new e.Point(i.x+c.xOffset,i.y+c.yOffset)}),i.x+=c.xAdvance,r=u)}}a.push(i.x),n=Math.max(n,i.x);var d=[];for(l=0;o>=l;l++){var p=0;"right"===this.style.align?p=n-a[l]:"center"===this.style.align&&(p=(n-a[l])/2),d.push(p)}var f=this.children.length,g=s.length,m=this.tint||16777215;for(l=0;g>l;l++){var v=f>l?this.children[l]:this._pool.pop();v?v.setTexture(s[l].texture):v=new e.Sprite(s[l].texture),v.position.x=(s[l].position.x+d[s[l].line])*h,v.position.y=s[l].position.y*h,v.scale.x=v.scale.y=h,v.tint=m,v.parent||this.addChild(v)}for(;this.children.length>g;){var _=this.getChildAt(this.children.length-1);this._pool.push(_),this.removeChild(_)}this.textWidth=n*h,this.textHeight=(i.y+t.lineHeight)*h},e.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),e.DisplayObjectContainer.prototype.updateTransform.call(this)},e.BitmapText.fonts={},e.InteractionData=function(){this.global=new e.Point,this.target=null,this.originalEvent=null},e.InteractionData.prototype.getLocalPosition=function(t){var i=t.worldTransform,r=this.global,s=i.a,n=i.b,a=i.tx,o=i.c,h=i.d,l=i.ty,u=1/(s*h+n*-o);return new e.Point(h*u*r.x+-n*u*r.y+(l*n-a*h)*u,s*u*r.y+-o*u*r.x+(-l*s+a*o)*u)},e.InteractionData.prototype.constructor=e.InteractionData,e.InteractionManager=function(t){this.stage=t,this.mouse=new e.InteractionData,this.touchs={},this.tempPoint=new e.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1},e.InteractionManager.prototype.constructor=e.InteractionManager,e.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var i=t.children,r=i.length,s=r-1;s>=0;s--){var n=i[s];n._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(n),n.children.length>0&&this.collectInteractiveSprite(n,n)):(n.__iParent=null,n.children.length>0&&this.collectInteractiveSprite(n,e))}},e.InteractionManager.prototype.setTarget=function(t){this.target=t,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},e.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},e.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},e.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),i=t-this.last;if(i=i*e.INTERACTION_FREQUENCY/1e3,!(1>i)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var s=this.interactiveItems.length,n="inherit",a=!1;for(r=0;s>r;r++){var o=this.interactiveItems[r];o.__hit=this.hitTest(o,this.mouse),this.mouse.target=o,o.__hit&&!a?(o.buttonMode&&(n=o.defaultCursor),o.interactiveChildren||(a=!0),o.__isOver||(o.mouseover&&o.mouseover(this.mouse),o.__isOver=!0)):o.__isOver&&(o.mouseout&&o.mouseout(this.mouse),o.__isOver=!1)}this.currentCursorStyle!==n&&(this.currentCursorStyle=n,this.interactionDOMElement.style.cursor=n)}}},e.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},e.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t||window.event;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width),this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height);for(var i=this.interactiveItems.length,r=0;i>r;r++){var s=this.interactiveItems[r];s.mousemove&&s.mousemove(this.mouse)}},e.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t||window.event,e.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var i=this.interactiveItems.length,r=0;i>r;r++){var s=this.interactiveItems[r];if((s.mousedown||s.click)&&(s.__mouseIsDown=!0,s.__hit=this.hitTest(s,this.mouse),s.__hit&&(s.mousedown&&s.mousedown(this.mouse),s.__isDown=!0,!s.interactiveChildren)))break}},e.InteractionManager.prototype.onMouseOut=function(){this.dirty&&this.rebuildInteractiveGraph();var t=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var e=0;t>e;e++){var i=this.interactiveItems[e];i.__isOver&&(this.mouse.target=i,i.mouseout&&i.mouseout(this.mouse),i.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},e.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t||window.event;for(var e=this.interactiveItems.length,i=!1,r=0;e>r;r++){var s=this.interactiveItems[r];s.__hit=this.hitTest(s,this.mouse),s.__hit&&!i?(s.mouseup&&s.mouseup(this.mouse),s.__isDown&&s.click&&s.click(this.mouse),s.interactiveChildren||(i=!0)):s.__isDown&&s.mouseupoutside&&s.mouseupoutside(this.mouse),s.__isDown=!1}},e.InteractionManager.prototype.hitTest=function(t,i){var r=i.global;if(!t.worldVisible)return!1;var s=t instanceof e.Sprite,n=t.worldTransform,a=n.a,o=n.b,h=n.tx,l=n.c,u=n.d,c=n.ty,d=1/(a*u+o*-l),p=u*d*r.x+-o*d*r.y+(c*o-h*u)*d,f=a*d*r.y+-l*d*r.x+(-c*a+h*l)*d;if(i.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(p,f)?(i.target=t,!0):!1;if(s){var g,m=t.texture.frame.width,v=t.texture.frame.height,_=-m*t.anchor.x;if(p>_&&_+m>p&&(g=-v*t.anchor.y,f>g&&g+v>f))return i.target=t,!0}for(var y=t.children.length,x=0;y>x;x++){var b=t.children[x],T=this.hitTest(b,i);if(T)return i.target=t,!0}return!1},e.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,i=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,s=0;for(s=0;s<r.length;s++){var n=r[s];e=this.touchs[n.identifier],e.originalEvent=t||window.event,e.global.x=(n.clientX-i.left)*(this.target.width/i.width),e.global.y=(n.clientY-i.top)*(this.target.height/i.height),navigator.isCocoonJS&&(e.global.x=n.clientX,e.global.y=n.clientY);for(var a=0;a<this.interactiveItems.length;a++){var o=this.interactiveItems[a];o.touchmove&&o.__touchData&&o.__touchData[n.identifier]&&o.touchmove(e)}}},e.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var i=this.interactionDOMElement.getBoundingClientRect();e.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var r=t.changedTouches,s=0;s<r.length;s++){var n=r[s],a=this.pool.pop();a||(a=new e.InteractionData),a.originalEvent=t||window.event,this.touchs[n.identifier]=a,a.global.x=(n.clientX-i.left)*(this.target.width/i.width),a.global.y=(n.clientY-i.top)*(this.target.height/i.height),navigator.isCocoonJS&&(a.global.x=n.clientX,a.global.y=n.clientY);for(var o=this.interactiveItems.length,h=0;o>h;h++){var l=this.interactiveItems[h];if((l.touchstart||l.tap)&&(l.__hit=this.hitTest(l,a),l.__hit&&(l.touchstart&&l.touchstart(a),l.__isDown=!0,l.__touchData=l.__touchData||{},l.__touchData[n.identifier]=a,!l.interactiveChildren)))break}}},e.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,r=0;r<i.length;r++){var s=i[r],n=this.touchs[s.identifier],a=!1;n.global.x=(s.clientX-e.left)*(this.target.width/e.width),n.global.y=(s.clientY-e.top)*(this.target.height/e.height),navigator.isCocoonJS&&(n.global.x=s.clientX,n.global.y=s.clientY);for(var o=this.interactiveItems.length,h=0;o>h;h++){var l=this.interactiveItems[h];l.__touchData&&l.__touchData[s.identifier]&&(l.__hit=this.hitTest(l,l.__touchData[s.identifier]),n.originalEvent=t||window.event,(l.touchend||l.tap)&&(l.__hit&&!a?(l.touchend&&l.touchend(n),l.__isDown&&l.tap&&l.tap(n),l.interactiveChildren||(a=!0)):l.__isDown&&l.touchendoutside&&l.touchendoutside(n),l.__isDown=!1),l.__touchData[s.identifier]=null)}this.pool.push(n),this.touchs[s.identifier]=null}},e.Stage=function(t){e.DisplayObjectContainer.call(this),this.worldTransform=new e.Matrix,this.interactive=!0,this.interactionManager=new e.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new e.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},e.Stage.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Stage.prototype.constructor=e.Stage,e.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},e.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},e.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=e.hex2rgb(this.backgroundColor);var i=this.backgroundColor.toString(16);i="000000".substr(0,6-i.length)+i,this.backgroundColorString="#"+i},e.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var i=0,r=["ms","moz","webkit","o"],s=0;s<r.length&&!window.requestAnimationFrame;++s)window.requestAnimationFrame=window[r[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[s]+"CancelAnimationFrame"]||window[r[s]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),r=Math.max(0,16-(e-i)),s=window.setTimeout(function(){t(e+r)},r);return i=e+r,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.requestAnimFrame=window.requestAnimationFrame,e.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function i(){var n=s.concat(t.call(arguments));r.apply(this instanceof i?this:e,n)}var r=this,s=t.call(arguments,1);if("function"!=typeof r)throw new TypeError;return i.prototype=function n(t){return t&&(n.prototype=t),this instanceof n?void 0:new n}(r.prototype),i}}()),e.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(i){}},e.canUseNewCanvasBlendModes=function(){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},e.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},e.EventTarget=function(){var t={};this.addEventListener=this.on=function(e,i){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].unshift(i)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var i=t[e.type].length-1;i>=0;i--)t[e.type][i](e)},this.removeEventListener=this.off=function(e,i){if(void 0!==t[e]){var r=t[e].indexOf(i);-1!==r&&t[e].splice(r,1)}},this.removeAllEventListeners=function(e){var i=t[e];i&&(i.length=0)}},e.autoDetectRenderer=function(t,i,r,s,n){t||(t=800),i||(i=600);var a=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return a?new e.WebGLRenderer(t,i,r,s,n):new e.CanvasRenderer(t,i,r,s)},e.autoDetectRecommendedRenderer=function(t,i,r,s,n){t||(t=800),i||(i=600);var a=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),o=/Android/i.test(navigator.userAgent);return a&&!o?new e.WebGLRenderer(t,i,r,s,n):new e.CanvasRenderer(t,i,r,s)},e.PolyK={},e.PolyK.Triangulate=function(t){var i=!0,r=t.length>>1;if(3>r)return[];for(var s=[],n=[],a=0;r>a;a++)n.push(a);a=0;for(var o=r;o>3;){var h=n[(a+0)%o],l=n[(a+1)%o],u=n[(a+2)%o],c=t[2*h],d=t[2*h+1],p=t[2*l],f=t[2*l+1],g=t[2*u],m=t[2*u+1],v=!1;if(e.PolyK._convex(c,d,p,f,g,m,i)){v=!0;for(var _=0;o>_;_++){var y=n[_];if(y!==h&&y!==l&&y!==u&&e.PolyK._PointInTriangle(t[2*y],t[2*y+1],c,d,p,f,g,m)){v=!1;break}}}if(v)s.push(h,l,u),n.splice((a+1)%o,1),o--,a=0;else if(a++>3*o){if(!i)return window.console.log("PIXI Warning: shape too complex to fill"),[];for(s=[],n=[],a=0;r>a;a++)n.push(a);a=0,o=r,i=!1}}return s.push(n[0],n[1],n[2]),s},e.PolyK._PointInTriangle=function(t,e,i,r,s,n,a,o){var h=a-i,l=o-r,u=s-i,c=n-r,d=t-i,p=e-r,f=h*h+l*l,g=h*u+l*c,m=h*d+l*p,v=u*u+c*c,_=u*d+c*p,y=1/(f*v-g*g),x=(v*m-g*_)*y,b=(f*_-g*m)*y;return x>=0&&b>=0&&1>x+b},e.PolyK._convex=function(t,e,i,r,s,n,a){return(e-r)*(s-i)+(i-t)*(n-r)>=0===a},e.initDefaultShaders=function(){},e.CompileVertexShader=function(t,i){return e._CompileShader(t,i,t.VERTEX_SHADER)},e.CompileFragmentShader=function(t,i){return e._CompileShader(t,i,t.FRAGMENT_SHADER)},e._CompileShader=function(t,e,i){var r=e.join("\n"),s=t.createShader(i);return t.shaderSource(s,r),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS)?s:(window.console.log(t.getShaderInfoLog(s)),null)},e.compileProgram=function(t,i,r){var s=e.CompileFragmentShader(t,r),n=e.CompileVertexShader(t,i),a=t.createProgram();return t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),a},e.PixiShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.attributes=[],this.init()},e.PixiShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc||e.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.dimensions=t.getUniformLocation(i,"dimensions"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(i,r);this.initUniforms(),this.program=i},e.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms){t=this.uniforms[i];var r=t.type;"sampler2D"===r?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===r||"mat3"===r||"mat4"===r?(t.glMatrix=!0,t.glValueLength=1,"mat2"===r?t.glFunc=e.uniformMatrix2fv:"mat3"===r?t.glFunc=e.uniformMatrix3fv:"mat4"===r&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],t.glValueLength="2f"===r||"2i"===r?2:"3f"===r||"3i"===r?3:"4f"===r||"4i"===r?4:1)
}},e.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var i=t.textureData,r=i.magFilter?i.magFilter:e.LINEAR,s=i.minFilter?i.minFilter:e.LINEAR,n=i.wrapS?i.wrapS:e.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:e.CLAMP_TO_EDGE,o=i.luminance?e.LUMINANCE:e.RGBA;if(i.repeat&&(n=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var h=i.width?i.width:512,l=i.height?i.height:2,u=i.border?i.border:0;e.texImage2D(e.TEXTURE_2D,0,o,h,l,u,o,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,o,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},e.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,i=this.gl;for(var r in this.uniforms)t=this.uniforms[r],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(i,t.uniformLocation,t.transpose,t.value):t.glFunc.call(i,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(i,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(i.activeTexture(i["TEXTURE"+this.textureCount]),i.bindTexture(i.TEXTURE_2D,t.value.baseTexture._glTextures[i.id]||e.createWebGLTexture(t.value.baseTexture,i)),i.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},e.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],e.PixiFastShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},e.PixiFastShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.dimensions=t.getUniformLocation(i,"dimensions"),this.uMatrix=t.getUniformLocation(i,"uMatrix"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(i,"aPositionCoord"),this.aScale=t.getAttribLocation(i,"aScale"),this.aRotation=t.getAttribLocation(i,"aRotation"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=i},e.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},e.StripShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},e.StripShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.uSampler=t.getUniformLocation(i,"uSampler"),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.colorAttribute=t.getAttribLocation(i,"aColor"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(i,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.PrimitiveShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},e.PrimitiveShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.tintColor=t.getUniformLocation(i,"tint"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},e.ComplexPrimitiveShader=function(t){this._UID=e._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},e.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,i=e.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(i),this.projectionVector=t.getUniformLocation(i,"projectionVector"),this.offsetVector=t.getUniformLocation(i,"offsetVector"),this.tintColor=t.getUniformLocation(i,"tint"),this.color=t.getUniformLocation(i,"color"),this.aVertexPosition=t.getAttribLocation(i,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(i,"translationMatrix"),this.alpha=t.getUniformLocation(i,"alpha"),this.program=i},e.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},e.WebGLGraphics=function(){},e.WebGLGraphics.renderGraphics=function(t,i){var r,s=i.gl,n=i.projection,a=i.offset,o=i.shaderManager.primitiveShader;t.dirty&&e.WebGLGraphics.updateGraphics(t,s);for(var h=t._webGL[s.id],l=0;l<h.data.length;l++)1===h.data[l].mode?(r=h.data[l],i.stencilManager.pushStencil(t,r,i),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(r.indices.length-4)),i.stencilManager.popStencil(t,r,i),this.last=r.mode):(r=h.data[l],i.shaderManager.setShader(o),o=i.shaderManager.primitiveShader,s.uniformMatrix3fv(o.translationMatrix,!1,t.worldTransform.toArray(!0)),s.uniform2f(o.projectionVector,n.x,-n.y),s.uniform2f(o.offsetVector,-a.x,-a.y),s.uniform3fv(o.tintColor,e.hex2rgb(t.tint)),s.uniform1f(o.alpha,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,r.buffer),s.vertexAttribPointer(o.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(o.colorAttribute,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,r.indexBuffer),s.drawElements(s.TRIANGLE_STRIP,r.indices.length,s.UNSIGNED_SHORT,0))},e.WebGLGraphics.updateGraphics=function(t,i){var r=t._webGL[i.id];r||(r=t._webGL[i.id]={lastIndex:0,data:[],gl:i}),t.dirty=!1;var s;if(t.clearDirty){for(t.clearDirty=!1,s=0;s<r.data.length;s++){var n=r.data[s];n.reset(),e.WebGLGraphics.graphicsDataPool.push(n)}r.data=[],r.lastIndex=0}var a;for(s=r.lastIndex;s<t.graphicsData.length;s++){var o=t.graphicsData[s];o.type===e.Graphics.POLY?(o.fill&&o.points.length>6&&(o.points.length>10?(a=e.WebGLGraphics.switchMode(r,1),e.WebGLGraphics.buildComplexPoly(o,a)):(a=e.WebGLGraphics.switchMode(r,0),e.WebGLGraphics.buildPoly(o,a))),o.lineWidth>0&&(a=e.WebGLGraphics.switchMode(r,0),e.WebGLGraphics.buildLine(o,a))):(a=e.WebGLGraphics.switchMode(r,0),o.type===e.Graphics.RECT?e.WebGLGraphics.buildRectangle(o,a):o.type===e.Graphics.CIRC||o.type===e.Graphics.ELIP?e.WebGLGraphics.buildCircle(o,a):o.type===e.Graphics.RREC&&e.WebGLGraphics.buildRoundedRectangle(o,a)),r.lastIndex++}for(s=0;s<r.data.length;s++)a=r.data[s],a.dirty&&a.upload()},e.WebGLGraphics.switchMode=function(t,i){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==i||1===i)&&(r=e.WebGLGraphics.graphicsDataPool.pop()||new e.WebGLGraphicsData(t.gl),r.mode=i,t.data.push(r))):(r=e.WebGLGraphics.graphicsDataPool.pop()||new e.WebGLGraphicsData(t.gl),r.mode=i,t.data.push(r)),r.dirty=!0,r},e.WebGLGraphics.buildRectangle=function(t,i){var r=t.points,s=r[0],n=r[1],a=r[2],o=r[3];if(t.fill){var h=e.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,d=h[2]*l,p=i.points,f=i.indices,g=p.length/6;p.push(s,n),p.push(u,c,d,l),p.push(s+a,n),p.push(u,c,d,l),p.push(s,n+o),p.push(u,c,d,l),p.push(s+a,n+o),p.push(u,c,d,l),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var m=t.points;t.points=[s,n,s+a,n,s+a,n+o,s,n+o,s,n],e.WebGLGraphics.buildLine(t,i),t.points=m}},e.WebGLGraphics.buildRoundedRectangle=function(t,i){var r=t.points,s=r[0],n=r[1],a=r[2],o=r[3],h=r[4],l=[];if(l.push(s,n+h),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s,n+o-h,s,n+o,s+h,n+o)),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s+a-h,n+o,s+a,n+o,s+a,n+o-h)),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s+a,n+h,s+a,n,s+a-h,n)),l=l.concat(e.WebGLGraphics.quadraticBezierCurve(s+h,n,s,n,s,n+h)),t.fill){var u=e.hex2rgb(t.fillColor),c=t.fillAlpha,d=u[0]*c,p=u[1]*c,f=u[2]*c,g=i.points,m=i.indices,v=g.length/6,_=e.PolyK.Triangulate(l),y=0;for(y=0;y<_.length;y+=3)m.push(_[y]+v),m.push(_[y]+v),m.push(_[y+1]+v),m.push(_[y+2]+v),m.push(_[y+2]+v);for(y=0;y<l.length;y++)g.push(l[y],l[++y],d,p,f,c)}if(t.lineWidth){var x=t.points;t.points=l,e.WebGLGraphics.buildLine(t,i),t.points=x}},e.WebGLGraphics.quadraticBezierCurve=function(t,e,i,r,s,n){function a(t,e,i){var r=e-t;return t+r*i}for(var o,h,l,u,c,d,p=20,f=[],g=0,m=0;p>=m;m++)g=m/p,o=a(t,i,g),h=a(e,r,g),l=a(i,s,g),u=a(r,n,g),c=a(o,l,g),d=a(h,u,g),f.push(c,d);return f},e.WebGLGraphics.buildCircle=function(t,i){var r=t.points,s=r[0],n=r[1],a=r[2],o=r[3],h=40,l=2*Math.PI/h,u=0;if(t.fill){var c=e.hex2rgb(t.fillColor),d=t.fillAlpha,p=c[0]*d,f=c[1]*d,g=c[2]*d,m=i.points,v=i.indices,_=m.length/6;for(v.push(_),u=0;h+1>u;u++)m.push(s,n,p,f,g,d),m.push(s+Math.sin(l*u)*a,n+Math.cos(l*u)*o,p,f,g,d),v.push(_++,_++);v.push(_-1)}if(t.lineWidth){var y=t.points;for(t.points=[],u=0;h+1>u;u++)t.points.push(s+Math.sin(l*u)*a,n+Math.cos(l*u)*o);e.WebGLGraphics.buildLine(t,i),t.points=y}},e.WebGLGraphics.buildLine=function(t,i){var r=0,s=t.points;if(0!==s.length){if(t.lineWidth%2)for(r=0;r<s.length;r++)s[r]+=.5;var n=new e.Point(s[0],s[1]),a=new e.Point(s[s.length-2],s[s.length-1]);if(n.x===a.x&&n.y===a.y){s=s.slice(),s.pop(),s.pop(),a=new e.Point(s[s.length-2],s[s.length-1]);var o=a.x+.5*(n.x-a.x),h=a.y+.5*(n.y-a.y);s.unshift(o,h),s.push(o,h)}var l,u,c,d,p,f,g,m,v,_,y,x,b,T,w,S,M,C,P,E,A,L,R,O=i.points,I=i.indices,j=s.length/2,k=s.length,B=O.length/6,F=t.lineWidth/2,D=e.hex2rgb(t.lineColor),N=t.lineAlpha,U=D[0]*N,G=D[1]*N,J=D[2]*N;for(c=s[0],d=s[1],p=s[2],f=s[3],v=-(d-f),_=c-p,R=Math.sqrt(v*v+_*_),v/=R,_/=R,v*=F,_*=F,O.push(c-v,d-_,U,G,J,N),O.push(c+v,d+_,U,G,J,N),r=1;j-1>r;r++)c=s[2*(r-1)],d=s[2*(r-1)+1],p=s[2*r],f=s[2*r+1],g=s[2*(r+1)],m=s[2*(r+1)+1],v=-(d-f),_=c-p,R=Math.sqrt(v*v+_*_),v/=R,_/=R,v*=F,_*=F,y=-(f-m),x=p-g,R=Math.sqrt(y*y+x*x),y/=R,x/=R,y*=F,x*=F,w=-_+d-(-_+f),S=-v+p-(-v+c),M=(-v+c)*(-_+f)-(-v+p)*(-_+d),C=-x+m-(-x+f),P=-y+p-(-y+g),E=(-y+g)*(-x+f)-(-y+p)*(-x+m),A=w*P-C*S,Math.abs(A)<.1?(A+=10.1,O.push(p-v,f-_,U,G,J,N),O.push(p+v,f+_,U,G,J,N)):(l=(S*E-P*M)/A,u=(C*M-w*E)/A,L=(l-p)*(l-p)+(u-f)+(u-f),L>19600?(b=v-y,T=_-x,R=Math.sqrt(b*b+T*T),b/=R,T/=R,b*=F,T*=F,O.push(p-b,f-T),O.push(U,G,J,N),O.push(p+b,f+T),O.push(U,G,J,N),O.push(p-b,f-T),O.push(U,G,J,N),k++):(O.push(l,u),O.push(U,G,J,N),O.push(p-(l-p),f-(u-f)),O.push(U,G,J,N)));for(c=s[2*(j-2)],d=s[2*(j-2)+1],p=s[2*(j-1)],f=s[2*(j-1)+1],v=-(d-f),_=c-p,R=Math.sqrt(v*v+_*_),v/=R,_/=R,v*=F,_*=F,O.push(p-v,f-_),O.push(U,G,J,N),O.push(p+v,f+_),O.push(U,G,J,N),I.push(B),r=0;k>r;r++)I.push(B++);I.push(B-1)}},e.WebGLGraphics.buildComplexPoly=function(t,i){var r=t.points.slice();if(!(r.length<6)){var s=i.indices;i.points=r,i.alpha=t.fillAlpha,i.color=e.hex2rgb(t.fillColor);for(var n,a,o=1/0,h=-1/0,l=1/0,u=-1/0,c=0;c<r.length;c+=2)n=r[c],a=r[c+1],o=o>n?n:o,h=n>h?n:h,l=l>a?a:l,u=a>u?a:u;r.push(o,l,h,l,h,u,o,u);var d=r.length/2;for(c=0;d>c;c++)s.push(c)}},e.WebGLGraphics.buildPoly=function(t,i){var r=t.points;if(!(r.length<6)){var s=i.points,n=i.indices,a=r.length/2,o=e.hex2rgb(t.fillColor),h=t.fillAlpha,l=o[0]*h,u=o[1]*h,c=o[2]*h,d=e.PolyK.Triangulate(r),p=s.length/6,f=0;for(f=0;f<d.length;f+=3)n.push(d[f]+p),n.push(d[f]+p),n.push(d[f+1]+p),n.push(d[f+2]+p),n.push(d[f+2]+p);for(f=0;a>f;f++)s.push(r[2*f],r[2*f+1],l,u,c,h)}},e.WebGLGraphics.graphicsDataPool=[],e.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.lastIndex=0,this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},e.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[],this.lastIndex=0},e.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},e.glContexts=[],e.WebGLRenderer=function(t,i,r,s,n,a){e.defaultRenderer||(e.sayHello("webGL"),e.defaultRenderer=this),this.type=e.WEBGL_RENDERER,this.transparent=!!s,this.preserveDrawingBuffer=a,this.width=t||800,this.height=i||600,this.view=r||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.contextLost=this.handleContextLost.bind(this),this.contextRestoredLost=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLost,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1),this.options={alpha:this.transparent,antialias:!!n,premultipliedAlpha:!!s,stencil:!0,preserveDrawingBuffer:a};var o=null;if(["experimental-webgl","webgl"].forEach(function(t){try{o=o||this.view.getContext(t,this.options)}catch(e){}},this),!o)throw new Error("This browser does not support webGL. Try using the canvas renderer"+this);this.gl=o,this.glContextId=o.id=e.WebGLRenderer.glContextId++,e.glContexts[this.glContextId]=o,e.blendModesWebGL||(e.blendModesWebGL=[],e.blendModesWebGL[e.blendModes.NORMAL]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.ADD]=[o.SRC_ALPHA,o.DST_ALPHA],e.blendModesWebGL[e.blendModes.MULTIPLY]=[o.DST_COLOR,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SCREEN]=[o.SRC_ALPHA,o.ONE],e.blendModesWebGL[e.blendModes.OVERLAY]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.DARKEN]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.LIGHTEN]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR_DODGE]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR_BURN]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.HARD_LIGHT]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SOFT_LIGHT]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.DIFFERENCE]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.EXCLUSION]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.HUE]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.SATURATION]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.COLOR]=[o.ONE,o.ONE_MINUS_SRC_ALPHA],e.blendModesWebGL[e.blendModes.LUMINOSITY]=[o.ONE,o.ONE_MINUS_SRC_ALPHA]),this.projection=new e.Point,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.offset=new e.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.shaderManager=new e.WebGLShaderManager(o),this.spriteBatch=new e.WebGLSpriteBatch(o),this.maskManager=new e.WebGLMaskManager(o),this.filterManager=new e.WebGLFilterManager(o,this.transparent),this.stencilManager=new e.WebGLStencilManager(o),this.blendModeManager=new e.WebGLBlendModeManager(o),this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,o.useProgram(this.shaderManager.defaultShader.program),o.disable(o.DEPTH_TEST),o.disable(o.CULL_FACE),o.enable(o.BLEND),o.colorMask(!0,!0,!0,this.transparent)},e.WebGLRenderer.prototype.constructor=e.WebGLRenderer,e.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),e.WebGLRenderer.updateTextures(),t.updateTransform(),t._interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)));var i=this.gl;i.viewport(0,0,this.width,this.height),i.bindFramebuffer(i.FRAMEBUFFER,null),this.transparent?i.clearColor(0,0,0,0):i.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),i.clear(i.COLOR_BUFFER_BIT),this.renderDisplayObject(t,this.projection),t.interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this))}},e.WebGLRenderer.prototype.renderDisplayObject=function(t,i,r){this.renderSession.blendModeManager.setBlendMode(e.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.currentBlendMode=9999,this.renderSession.projection=i,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),t._renderWebGL(this.renderSession),this.spriteBatch.end()},e.WebGLRenderer.updateTextures=function(){var t=0;for(t=0;t<e.Texture.frameUpdates.length;t++)e.WebGLRenderer.updateTextureFrame(e.Texture.frameUpdates[t]);for(t=0;t<e.texturesToDestroy.length;t++)e.WebGLRenderer.destroyTexture(e.texturesToDestroy[t]);e.texturesToUpdate.length=0,e.texturesToDestroy.length=0,e.Texture.frameUpdates.length=0},e.WebGLRenderer.destroyTexture=function(t){for(var i=t._glTextures.length-1;i>=0;i--){var r=t._glTextures[i],s=e.glContexts[i];s&&r&&s.deleteTexture(r)}t._glTextures.length=0},e.WebGLRenderer.updateTextureFrame=function(t){t._updateWebGLuvs()},e.WebGLRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},e.createWebGLTexture=function(t,i){return t.hasLoaded&&(t._glTextures[i.id]=i.createTexture(),i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.source),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),t._powerOf2?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)),i.bindTexture(i.TEXTURE_2D,null),t._dirty[i.id]=!1),t._glTextures[i.id]},e.updateWebGLTexture=function(t,i){t._glTextures[i.id]&&(i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t.source),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t.scaleMode===e.scaleModes.LINEAR?i.LINEAR:i.NEAREST),t._powerOf2?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)),t._dirty[i.id]=!1)},e.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},e.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(t){try{this.gl=this.view.getContext("webgl",this.options)}catch(i){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var r=this.gl;r.id=e.WebGLRenderer.glContextId++,this.shaderManager.setContext(r),this.spriteBatch.setContext(r),this.primitiveBatch.setContext(r),this.maskManager.setContext(r),this.filterManager.setContext(r),this.renderSession.gl=this.gl,r.disable(r.DEPTH_TEST),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.colorMask(!0,!0,!0,this.transparent),this.gl.viewport(0,0,this.width,this.height);for(var s in e.TextureCache){var n=e.TextureCache[s].baseTexture;n._glTextures=[]}this.contextLost=!1},e.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost),this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost),e.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.primitiveBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},e.WebGLRenderer.glContextId=0,e.WebGLBlendModeManager=function(t){this.gl=t,this.currentBlendMode=99999},e.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var i=e.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(i[0],i[1]),!0},e.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},e.WebGLMaskManager=function(t){this.maskStack=[],this.maskPosition=0,this.setContext(t),this.reverse=!1,this.count=0},e.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},e.WebGLMaskManager.prototype.pushMask=function(t,i){var r=i.gl;t.dirty&&e.WebGLGraphics.updateGraphics(t,r),t._webGL[r.id].data.length&&i.stencilManager.pushStencil(t,t._webGL[r.id].data[0],i)},e.WebGLMaskManager.prototype.popMask=function(t,e){var i=this.gl;e.stencilManager.popStencil(t,t._webGL[i.id].data[0],e)},e.WebGLMaskManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},e.WebGLStencilManager=function(t){this.stencilStack=[],this.setContext(t),this.reverse=!0,this.count=0},e.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},e.WebGLStencilManager.prototype.pushStencil=function(t,e,i){var r=this.gl;this.bindGraphics(t,e,i),0===this.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var s=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-s,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?r.stencilFunc(r.EQUAL,255-(s+1),255):r.stencilFunc(r.EQUAL,s+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,s,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-s,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s+1,255):r.stencilFunc(r.EQUAL,255-(s+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},e.WebGLStencilManager.prototype.bindGraphics=function(t,i,r){this._currentGraphics=t;var s,n=this.gl,a=r.projection,o=r.offset;1===i.mode?(s=r.shaderManager.complexPrimativeShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,a.x,-a.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,e.hex2rgb(t.tint)),n.uniform3fv(s.color,i.color),n.uniform1f(s.alpha,t.worldAlpha*i.alpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer)):(s=r.shaderManager.primitiveShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,a.x,-a.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,e.hex2rgb(t.tint)),n.uniform1f(s.alpha,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer))},e.WebGLStencilManager.prototype.popStencil=function(t,e,i){var r=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)r.disable(r.STENCIL_TEST);else{var s=this.count;this.bindGraphics(t,e,i),r.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(s+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s,255):r.stencilFunc(r.EQUAL,255-s,255)):(this.reverse?(r.stencilFunc(r.EQUAL,s+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(s+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,s,255):r.stencilFunc(r.EQUAL,255-s,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},e.WebGLStencilManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},e.WebGLShaderManager=function(t){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[],this.shaderMap=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)},e.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new e.PrimitiveShader(t),this.complexPrimativeShader=new e.ComplexPrimitiveShader(t),this.defaultShader=new e.PixiShader(t),this.fastShader=new e.PixiFastShader(t),this.stripShader=new e.StripShader(t),this.setShader(this.defaultShader)},e.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var i=t[e];this.tempAttribState[i]=!0}var r=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},e.WebGLShaderManager.prototype.setShader=function(t){return this._currentId===t._UID?!1:(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},e.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},e.WebGLSpriteBatch=function(t){this.vertSize=6,this.size=2e3;var e=4*this.size*this.vertSize,i=6*this.size;this.vertices=new Float32Array(e),this.indices=new Uint16Array(i),this.lastIndexCount=0;for(var r=0,s=0;i>r;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.setContext(t),this.dirty=!0,this.textures=[],this.blendModes=[]},e.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},e.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},e.WebGLSpriteBatch.prototype.end=function(){this.flush()},e.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var i=e._uvs;if(i){var r,s,n,a,o=t.worldAlpha,h=t.tint,l=this.vertices,u=t.anchor.x,c=t.anchor.y;
if(e.trim){var d=e.trim;s=d.x-u*d.width,r=s+e.crop.width,a=d.y-c*d.height,n=a+e.crop.height}else r=e.frame.width*(1-u),s=e.frame.width*-u,n=e.frame.height*(1-c),a=e.frame.height*-c;var p=4*this.currentBatchSize*this.vertSize,f=t.worldTransform,g=f.a,m=f.c,v=f.b,_=f.d,y=f.tx,x=f.ty;l[p++]=g*s+v*a+y,l[p++]=_*a+m*s+x,l[p++]=i.x0,l[p++]=i.y0,l[p++]=o,l[p++]=h,l[p++]=g*r+v*a+y,l[p++]=_*a+m*r+x,l[p++]=i.x1,l[p++]=i.y1,l[p++]=o,l[p++]=h,l[p++]=g*r+v*n+y,l[p++]=_*n+m*r+x,l[p++]=i.x2,l[p++]=i.y2,l[p++]=o,l[p++]=h,l[p++]=g*s+v*n+y,l[p++]=_*n+m*s+x,l[p++]=i.x3,l[p++]=i.y3,l[p++]=o,l[p++]=h,this.textures[this.currentBatchSize]=t.texture.baseTexture,this.blendModes[this.currentBatchSize]=t.blendMode,this.currentBatchSize++}},e.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var i=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture),t._uvs||(t._uvs=new e.TextureUvs);var r=t._uvs;t.tilePosition.x%=i.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=i.baseTexture.height*t.tileScaleOffset.y;var s=t.tilePosition.x/(i.baseTexture.width*t.tileScaleOffset.x),n=t.tilePosition.y/(i.baseTexture.height*t.tileScaleOffset.y),a=t.width/i.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),o=t.height/i.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);r.x0=0-s,r.y0=0-n,r.x1=1*a-s,r.y1=0-n,r.x2=1*a-s,r.y2=1*o-n,r.x3=0-s,r.y3=1*o-n;var h=t.worldAlpha,l=t.tint,u=this.vertices,c=t.width,d=t.height,p=t.anchor.x,f=t.anchor.y,g=c*(1-p),m=c*-p,v=d*(1-f),_=d*-f,y=4*this.currentBatchSize*this.vertSize,x=t.worldTransform,b=x.a,T=x.c,w=x.b,S=x.d,M=x.tx,C=x.ty;u[y++]=b*m+w*_+M,u[y++]=S*_+T*m+C,u[y++]=r.x0,u[y++]=r.y0,u[y++]=h,u[y++]=l,u[y++]=b*g+w*_+M,u[y++]=S*_+T*g+C,u[y++]=r.x1,u[y++]=r.y1,u[y++]=h,u[y++]=l,u[y++]=b*g+w*v+M,u[y++]=S*v+T*g+C,u[y++]=r.x2,u[y++]=r.y2,u[y++]=h,u[y++]=l,u[y++]=b*m+w*v+M,u[y++]=S*v+T*m+C,u[y++]=r.x3,u[y++]=r.y3,u[y++]=h,u[y++]=l,this.textures[this.currentBatchSize]=i.baseTexture,this.blendModes[this.currentBatchSize]=t.blendMode,this.currentBatchSize++},e.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.renderSession.shaderManager.setShader(this.renderSession.shaderManager.defaultShader),this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.colorAttribute,2,t.FLOAT,!1,i,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var r=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,r)}for(var s,n,a=0,o=0,h=null,l=this.renderSession.blendModeManager.currentBlendMode,u=0,c=this.currentBatchSize;c>u;u++)s=this.textures[u],n=this.blendModes[u],(h!==s||l!==n)&&(this.renderBatch(h,a,o),o=u,a=0,h=s,l=n,this.renderSession.blendModeManager.setBlendMode(l)),a++;this.renderBatch(h,a,o),this.currentBatchSize=0}},e.WebGLSpriteBatch.prototype.renderBatch=function(t,i,r){if(0!==i){var s=this.gl;s.bindTexture(s.TEXTURE_2D,t._glTextures[s.id]||e.createWebGLTexture(t,s)),t._dirty[s.id]&&e.updateWebGLTexture(this.currentBaseTexture,s),s.drawElements(s.TRIANGLES,6*i,s.UNSIGNED_SHORT,6*r*2),this.renderSession.drawCount++}},e.WebGLSpriteBatch.prototype.stop=function(){this.flush()},e.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},e.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},e.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,i=6*this.maxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(i),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var r=0,s=0;i>r;r+=6,s+=4)this.indices[r+0]=s+0,this.indices[r+1]=s+1,this.indices[r+2]=s+2,this.indices[r+3]=s+0,this.indices[r+4]=s+2,this.indices[r+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},e.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},e.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},e.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},e.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,i=e[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var r=0,s=e.length;s>r;r++)this.renderSprite(e[r]);this.flush()}},e.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,i,r,s,n,a,o,h,l=this.vertices;if(e=t.texture._uvs,i=t.texture.frame.width,r=t.texture.frame.height,t.texture.trim){var u=t.texture.trim;n=u.x-t.anchor.x*u.width,s=n+t.texture.crop.width,o=u.y-t.anchor.y*u.height,a=o+t.texture.crop.height}else s=t.texture.frame.width*(1-t.anchor.x),n=t.texture.frame.width*-t.anchor.x,a=t.texture.frame.height*(1-t.anchor.y),o=t.texture.frame.height*-t.anchor.y;h=4*this.currentBatchSize*this.vertSize,l[h++]=n,l[h++]=o,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x0,l[h++]=e.y1,l[h++]=t.alpha,l[h++]=s,l[h++]=o,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x1,l[h++]=e.y1,l[h++]=t.alpha,l[h++]=s,l[h++]=a,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x2,l[h++]=e.y2,l[h++]=t.alpha,l[h++]=n,l[h++]=a,l[h++]=t.position.x,l[h++]=t.position.y,l[h++]=t.scale.x,l[h++]=t.scale.y,l[h++]=t.rotation,l[h++]=e.x3,l[h++]=e.y3,l[h++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},e.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||e.createWebGLTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var i=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,i)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},e.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},e.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,i,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,i,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,i,36)},e.WebGLFilterManager=function(t,e){this.transparent=e,this.filterStack=[],this.offsetX=0,this.offsetY=0,this.setContext(t)},e.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},e.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=e},e.WebGLFilterManager.prototype.pushFilter=function(t){var i=this.gl,r=this.renderSession.projection,s=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var n=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new e.FilterTexture(this.gl,this.width,this.height),i.bindTexture(i.TEXTURE_2D,a.texture);var o=t._filterArea,h=n.padding;o.x-=h,o.y-=h,o.width+=2*h,o.height+=2*h,o.x<0&&(o.x=0),o.width>this.width&&(o.width=this.width),o.y<0&&(o.y=0),o.height>this.height&&(o.height=this.height),i.bindFramebuffer(i.FRAMEBUFFER,a.frameBuffer),i.viewport(0,0,o.width,o.height),r.x=o.width/2,r.y=-o.height/2,s.x=-o.x,s.y=-o.y,this.renderSession.shaderManager.setShader(this.defaultShader),i.uniform2f(this.defaultShader.projectionVector,o.width/2,-o.height/2),i.uniform2f(this.defaultShader.offsetVector,-o.x,-o.y),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t._glFilterTexture=a},e.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,i=this.filterStack.pop(),r=i._filterArea,s=i._glFilterTexture,n=this.renderSession.projection,a=this.renderSession.offset;if(i.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var o=s,h=this.texturePool.pop();h||(h=new e.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var l=0;l<i.filterPasses.length-1;l++){var u=i.filterPasses[l];t.bindFramebuffer(t.FRAMEBUFFER,h.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o.texture),this.applyFilterPass(u,r,r.width,r.height);var c=o;o=h,h=c}t.enable(t.BLEND),s=o,this.texturePool.push(h)}var d=i.filterPasses[i.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var p=this.width,f=this.height,g=0,m=0,v=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var _=this.filterStack[this.filterStack.length-1];r=_._filterArea,p=r.width,f=r.height,g=r.x,m=r.y,v=_._glFilterTexture.frameBuffer}n.x=p/2,n.y=-f/2,a.x=g,a.y=m,r=i._filterArea;var y=r.x-g,x=r.y-m;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=y,this.vertexArray[1]=x+r.height,this.vertexArray[2]=y+r.width,this.vertexArray[3]=x+r.height,this.vertexArray[4]=y,this.vertexArray[5]=x,this.vertexArray[6]=y+r.width,this.vertexArray[7]=x,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p,f),t.bindFramebuffer(t.FRAMEBUFFER,v),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(d,r,p,f),this.renderSession.shaderManager.setShader(this.defaultShader),t.uniform2f(this.defaultShader.projectionVector,p/2,-f/2),t.uniform2f(this.defaultShader.offsetVector,-g,-m),this.texturePool.push(s),i._glFilterTexture=null},e.WebGLFilterManager.prototype.applyFilterPass=function(t,i,r,s){var n=this.gl,a=t.shaders[n.id];a||(a=new e.PixiShader(n),a.fragmentSrc=t.fragmentSrc,a.uniforms=t.uniforms,a.init(),t.shaders[n.id]=a),this.renderSession.shaderManager.setShader(a),n.uniform2f(a.projectionVector,r/2,-s/2),n.uniform2f(a.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),n.vertexAttribPointer(a.aTextureCoord,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.colorBuffer),n.vertexAttribPointer(a.colorAttribute,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),this.renderSession.drawCount++},e.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},e.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},e.FilterTexture=function(t,i,r,s){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),s=s||e.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s===e.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s===e.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(i,r)},e.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},e.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e)}},e.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},e.CanvasMaskManager=function(){},e.CanvasMaskManager.prototype.pushMask=function(t,i){i.save();var r=t.alpha,s=t.worldTransform;i.setTransform(s.a,s.c,s.b,s.d,s.tx,s.ty),e.CanvasGraphics.renderGraphicsMask(t,i),i.clip(),t.worldAlpha=r},e.CanvasMaskManager.prototype.popMask=function(t){t.restore()},e.CanvasTinter=function(){},e.CanvasTinter.getTintedTexture=function(t,i){var r=t.texture;i=e.CanvasTinter.roundColor(i);var s="#"+("00000"+(0|i).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[s])return r.tintCache[s];var n=e.CanvasTinter.canvas||document.createElement("canvas");if(e.CanvasTinter.tintMethod(r,i,n),e.CanvasTinter.convertTintToImage){var a=new Image;a.src=n.toDataURL(),r.tintCache[s]=a}else r.tintCache[s]=n,e.CanvasTinter.canvas=null;return n},e.CanvasTinter.tintWithMultiply=function(t,e,i){var r=i.getContext("2d"),s=t.frame;i.width=s.width,i.height=s.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},e.CanvasTinter.tintWithOverlay=function(t,e,i){var r=i.getContext("2d"),s=t.frame;i.width=s.width,i.height=s.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,s.width,s.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},e.CanvasTinter.tintWithPerPixel=function(t,i,r){var s=r.getContext("2d"),n=t.frame;r.width=n.width,r.height=n.height,s.globalCompositeOperation="copy",s.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height);for(var a=e.hex2rgb(i),o=a[0],h=a[1],l=a[2],u=s.getImageData(0,0,n.width,n.height),c=u.data,d=0;d<c.length;d+=4)c[d+0]*=o,c[d+1]*=h,c[d+2]*=l;s.putImageData(u,0,0)},e.CanvasTinter.roundColor=function(t){var i=e.CanvasTinter.cacheStepsPerColorChannel,r=e.hex2rgb(t);return r[0]=Math.min(255,r[0]/i*i),r[1]=Math.min(255,r[1]/i*i),r[2]=Math.min(255,r[2]/i*i),e.rgb2hex(r)},e.CanvasTinter.cacheStepsPerColorChannel=8,e.CanvasTinter.convertTintToImage=!1,e.CanvasTinter.canUseMultiply=e.canUseNewCanvasBlendModes(),e.CanvasTinter.tintMethod=e.CanvasTinter.canUseMultiply?e.CanvasTinter.tintWithMultiply:e.CanvasTinter.tintWithPerPixel,e.CanvasRenderer=function(t,i,r,s){e.defaultRenderer||(e.sayHello("Canvas"),e.defaultRenderer=this),this.type=e.CANVAS_RENDERER,this.clearBeforeRender=!0,this.transparent=!!s,e.blendModesCanvas||(e.blendModesCanvas=[],e.canUseNewCanvasBlendModes()?(e.blendModesCanvas[e.blendModes.NORMAL]="source-over",e.blendModesCanvas[e.blendModes.ADD]="lighter",e.blendModesCanvas[e.blendModes.MULTIPLY]="multiply",e.blendModesCanvas[e.blendModes.SCREEN]="screen",e.blendModesCanvas[e.blendModes.OVERLAY]="overlay",e.blendModesCanvas[e.blendModes.DARKEN]="darken",e.blendModesCanvas[e.blendModes.LIGHTEN]="lighten",e.blendModesCanvas[e.blendModes.COLOR_DODGE]="color-dodge",e.blendModesCanvas[e.blendModes.COLOR_BURN]="color-burn",e.blendModesCanvas[e.blendModes.HARD_LIGHT]="hard-light",e.blendModesCanvas[e.blendModes.SOFT_LIGHT]="soft-light",e.blendModesCanvas[e.blendModes.DIFFERENCE]="difference",e.blendModesCanvas[e.blendModes.EXCLUSION]="exclusion",e.blendModesCanvas[e.blendModes.HUE]="hue",e.blendModesCanvas[e.blendModes.SATURATION]="saturation",e.blendModesCanvas[e.blendModes.COLOR]="color",e.blendModesCanvas[e.blendModes.LUMINOSITY]="luminosity"):(e.blendModesCanvas[e.blendModes.NORMAL]="source-over",e.blendModesCanvas[e.blendModes.ADD]="lighter",e.blendModesCanvas[e.blendModes.MULTIPLY]="source-over",e.blendModesCanvas[e.blendModes.SCREEN]="source-over",e.blendModesCanvas[e.blendModes.OVERLAY]="source-over",e.blendModesCanvas[e.blendModes.DARKEN]="source-over",e.blendModesCanvas[e.blendModes.LIGHTEN]="source-over",e.blendModesCanvas[e.blendModes.COLOR_DODGE]="source-over",e.blendModesCanvas[e.blendModes.COLOR_BURN]="source-over",e.blendModesCanvas[e.blendModes.HARD_LIGHT]="source-over",e.blendModesCanvas[e.blendModes.SOFT_LIGHT]="source-over",e.blendModesCanvas[e.blendModes.DIFFERENCE]="source-over",e.blendModesCanvas[e.blendModes.EXCLUSION]="source-over",e.blendModesCanvas[e.blendModes.HUE]="source-over",e.blendModesCanvas[e.blendModes.SATURATION]="source-over",e.blendModesCanvas[e.blendModes.COLOR]="source-over",e.blendModesCanvas[e.blendModes.LUMINOSITY]="source-over")),this.width=t||800,this.height=i||600,this.view=r||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0,this.maskManager=new e.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")},e.CanvasRenderer.prototype.constructor=e.CanvasRenderer,e.CanvasRenderer.prototype.render=function(t){e.texturesToUpdate.length=0,e.texturesToDestroy.length=0,t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),e.Texture.frameUpdates.length>0&&(e.Texture.frameUpdates.length=0)},e.CanvasRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},e.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,t._renderCanvas(this.renderSession)},e.CanvasRenderer.prototype.renderStripFlat=function(t){var e=this.context,i=t.verticies,r=i.length/2;this.count++,e.beginPath();for(var s=1;r-2>s;s++){var n=2*s,a=i[n],o=i[n+2],h=i[n+4],l=i[n+1],u=i[n+3],c=i[n+5];e.moveTo(a,l),e.lineTo(o,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},e.CanvasRenderer.prototype.renderStrip=function(t){var e=this.context,i=t.verticies,r=t.uvs,s=i.length/2;this.count++;for(var n=1;s-2>n;n++){var a=2*n,o=i[a],h=i[a+2],l=i[a+4],u=i[a+1],c=i[a+3],d=i[a+5],p=r[a]*t.texture.width,f=r[a+2]*t.texture.width,g=r[a+4]*t.texture.width,m=r[a+1]*t.texture.height,v=r[a+3]*t.texture.height,_=r[a+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(o,u),e.lineTo(h,c),e.lineTo(l,d),e.closePath(),e.clip();var y=p*v+m*g+f*_-v*g-m*f-p*_,x=o*v+m*l+h*_-v*l-m*h-o*_,b=p*h+o*g+f*l-h*g-o*f-p*l,T=p*v*l+m*h*g+o*f*_-o*v*g-m*f*l-p*h*_,w=u*v+m*d+c*_-v*d-m*c-u*_,S=p*c+u*g+f*d-c*g-u*f-p*d,M=p*v*d+m*c*g+u*f*_-u*v*g-m*f*d-p*c*_;e.transform(x/y,w/y,b/y,S/y,T/y,M/y),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},e.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},e.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},e.CanvasGraphics=function(){},e.CanvasGraphics.renderGraphics=function(t,i){for(var r=t.worldAlpha,s="",n=0;n<t.graphicsData.length;n++){var a=t.graphicsData[n],o=a.points;if(i.strokeStyle=s="#"+("00000"+(0|a.lineColor).toString(16)).substr(-6),i.lineWidth=a.lineWidth,a.type===e.Graphics.POLY){i.beginPath(),i.moveTo(o[0],o[1]);for(var h=1;h<o.length/2;h++)i.lineTo(o[2*h],o[2*h+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke())}else if(a.type===e.Graphics.RECT)(a.fillColor||0===a.fillColor)&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fillRect(o[0],o[1],o[2],o[3])),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeRect(o[0],o[1],o[2],o[3]));else if(a.type===e.Graphics.CIRC)i.beginPath(),i.arc(o[0],o[1],o[2],0,2*Math.PI),i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke());else if(a.type===e.Graphics.ELIP){var l=a.points,u=2*l[2],c=2*l[3],d=l[0]-u/2,p=l[1]-c/2;i.beginPath();var f=.5522848,g=u/2*f,m=c/2*f,v=d+u,_=p+c,y=d+u/2,x=p+c/2;i.moveTo(d,x),i.bezierCurveTo(d,x-m,y-g,p,y,p),i.bezierCurveTo(y+g,p,v,x-m,v,x),i.bezierCurveTo(v,x+m,y+g,_,y,_),i.bezierCurveTo(y-g,_,d,x+m,d,x),i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke())}else if(a.type===e.Graphics.RREC){var b=o[0],T=o[1],w=o[2],S=o[3],M=o[4],C=Math.min(w,S)/2|0;M=M>C?C:M,i.beginPath(),i.moveTo(b,T+M),i.lineTo(b,T+S-M),i.quadraticCurveTo(b,T+S,b+M,T+S),i.lineTo(b+w-M,T+S),i.quadraticCurveTo(b+w,T+S,b+w,T+S-M),i.lineTo(b+w,T+M),i.quadraticCurveTo(b+w,T,b+w-M,T),i.lineTo(b+M,T),i.quadraticCurveTo(b,T,b,T+M),i.closePath(),(a.fillColor||0===a.fillColor)&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle=s="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.stroke())}}},e.CanvasGraphics.renderGraphicsMask=function(t,i){var r=t.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var s=0;1>s;s++){var n=t.graphicsData[s],a=n.points;if(n.type===e.Graphics.POLY){i.beginPath(),i.moveTo(a[0],a[1]);for(var o=1;o<a.length/2;o++)i.lineTo(a[2*o],a[2*o+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&i.closePath()}else if(n.type===e.Graphics.RECT)i.beginPath(),i.rect(a[0],a[1],a[2],a[3]),i.closePath();else if(n.type===e.Graphics.CIRC)i.beginPath(),i.arc(a[0],a[1],a[2],0,2*Math.PI),i.closePath();else if(n.type===e.Graphics.ELIP){var h=n.points,l=2*h[2],u=2*h[3],c=h[0]-l/2,d=h[1]-u/2;i.beginPath();var p=.5522848,f=l/2*p,g=u/2*p,m=c+l,v=d+u,_=c+l/2,y=d+u/2;i.moveTo(c,y),i.bezierCurveTo(c,y-g,_-f,d,_,d),i.bezierCurveTo(_+f,d,m,y-g,m,y),i.bezierCurveTo(m,y+g,_+f,v,_,v),i.bezierCurveTo(_-f,v,c,y+g,c,y),i.closePath()}else if(n.type===e.Graphics.RREC){var x=a[0],b=a[1],T=a[2],w=a[3],S=a[4],M=Math.min(T,w)/2|0;S=S>M?M:S,i.beginPath(),i.moveTo(x,b+S),i.lineTo(x,b+w-S),i.quadraticCurveTo(x,b+w,x+S,b+w),i.lineTo(x+T-S,b+w),i.quadraticCurveTo(x+T,b+w,x+T,b+w-S),i.lineTo(x+T,b+S),i.quadraticCurveTo(x+T,b,x+T-S,b),i.lineTo(x+S,b),i.quadraticCurveTo(x,b,x,b+S),i.closePath()}}}},e.Graphics=function(){e.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.tint=16777215,this.blendMode=e.blendModes.NORMAL,this.currentPath={points:[]},this._webGL=[],this.isMask=!1,this.bounds=null,this.boundsPadding=10,this.dirty=!0},e.Graphics.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Graphics.prototype.constructor=e.Graphics,Object.defineProperty(e.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),e.Graphics.prototype.lineStyle=function(t,i,r){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=i||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:e.Graphics.POLY},this.graphicsData.push(this.currentPath),this},e.Graphics.prototype.moveTo=function(t,i){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:e.Graphics.POLY},this.currentPath.points.push(t,i),this.graphicsData.push(this.currentPath),this},e.Graphics.prototype.lineTo=function(t,e){return this.currentPath.points.push(t,e),this.dirty=!0,this},e.Graphics.prototype.quadraticCurveTo=function(t,e,i,r){0===this.currentPath.points.length&&this.moveTo(0,0);var s,n,a=20,o=this.currentPath.points;0===o.length&&this.moveTo(0,0);for(var h=o[o.length-2],l=o[o.length-1],u=0,c=1;a>=c;c++)u=c/a,s=h+(t-h)*u,n=l+(e-l)*u,o.push(s+(t+(i-t)*u-s)*u,n+(e+(r-e)*u-n)*u);return this.dirty=!0,this},e.Graphics.prototype.bezierCurveTo=function(t,e,i,r,s,n){0===this.currentPath.points.length&&this.moveTo(0,0);for(var a,o,h,l,u,c=20,d=this.currentPath.points,p=d[d.length-2],f=d[d.length-1],g=0,m=1;c>m;m++)g=m/c,a=1-g,o=a*a,h=o*a,l=g*g,u=l*g,d.push(h*p+3*o*g*t+3*a*l*i+u*s,h*f+3*o*g*e+3*a*l*r+u*n);return this.dirty=!0,this},e.Graphics.prototype.arcTo=function(t,e,i,r,s){0===this.currentPath.points.length&&this.moveTo(t,e);var n=this.currentPath.points,a=n[n.length-2],o=n[n.length-1],h=o-e,l=a-t,u=r-e,c=i-t,d=Math.abs(h*c-l*u);if(1e-8>d||0===s)n.push(t,e);else{var p=h*h+l*l,f=u*u+c*c,g=h*u+l*c,m=s*Math.sqrt(p)/d,v=s*Math.sqrt(f)/d,_=m*g/p,y=v*g/f,x=m*c+v*l,b=m*u+v*h,T=l*(v+_),w=h*(v+_),S=c*(m+y),M=u*(m+y),C=Math.atan2(w-b,T-x),P=Math.atan2(M-b,S-x);this.arc(x+t,b+e,s,C,P,l*u>c*h)}return this.dirty=!0,this},e.Graphics.prototype.arc=function(t,e,i,r,s,n){var a=t+Math.cos(r)*i,o=e+Math.sin(r)*i,h=this.currentPath.points;if((0!==h.length&&h[h.length-2]!==a||h[h.length-1]!==o)&&(this.moveTo(a,o),h=this.currentPath.points),r===s)return this;!n&&r>=s?s+=2*Math.PI:n&&s>=r&&(r+=2*Math.PI);var l=n?-1*(r-s):s-r,u=Math.abs(l)/(2*Math.PI)*40;if(0===l)return this;for(var c=l/(2*u),d=2*c,p=Math.cos(c),f=Math.sin(c),g=u-1,m=g%1/g,v=0;g>=v;v++){var _=v+m*v,y=c+r+d*_,x=Math.cos(y),b=-Math.sin(y);h.push((p*x+f*b)*i+t,(p*-b+f*x)*i+e)}return this.dirty=!0,this},e.Graphics.prototype.drawPath=function(t){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:e.Graphics.POLY},this.graphicsData.push(this.currentPath),this.currentPath.points=this.currentPath.points.concat(t),this.dirty=!0,this},e.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=arguments.length<2?1:e,this},e.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.Graphics.prototype.drawRect=function(t,i,r,s){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,i,r,s],type:e.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this},e.Graphics.prototype.drawRoundedRect=function(t,i,r,s,n){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,i,r,s,n],type:e.Graphics.RREC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},e.Graphics.prototype.drawCircle=function(t,i,r){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,i,r,r],type:e.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this
},e.Graphics.prototype.drawEllipse=function(t,i,r,s){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,i,r,s],type:e.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0,this},e.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this},e.Graphics.prototype.generateTexture=function(){var t=this.getBounds(),i=new e.CanvasBuffer(t.width,t.height),r=e.Texture.fromCanvas(i.canvas);return i.context.translate(-t.x,-t.y),e.CanvasGraphics.renderGraphics(this,i.context),r},e.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return this.dirty&&(this._generateCachedSprite(),e.updateWebGLTexture(this._cachedSprite.texture.baseTexture,t.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,e.Sprite.prototype._renderWebGL.call(this._cachedSprite,t),void 0;if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var i=e.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(i[0],i[1])}if(e.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var r=0,s=this.children.length;s>r;r++)this.children[r]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},e.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){var i=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t.context),i.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty),e.CanvasGraphics.renderGraphics(this,i);for(var s=0,n=this.children.length;n>s;s++)this.children[s]._renderCanvas(t);this._mask&&t.maskManager.popMask(t.context)}},e.Graphics.prototype.getBounds=function(t){this.bounds||this.updateBounds();var e=this.bounds.x,i=this.bounds.width+this.bounds.x,r=this.bounds.y,s=this.bounds.height+this.bounds.y,n=t||this.worldTransform,a=n.a,o=n.c,h=n.b,l=n.d,u=n.tx,c=n.ty,d=a*i+h*s+u,p=l*s+o*i+c,f=a*e+h*s+u,g=l*s+o*e+c,m=a*e+h*r+u,v=l*r+o*e+c,_=a*i+h*r+u,y=l*r+o*i+c,x=d,b=p,T=d,w=p;T=T>f?f:T,T=T>m?m:T,T=T>_?_:T,w=w>g?g:w,w=w>v?v:w,w=w>y?y:w,x=f>x?f:x,x=m>x?m:x,x=_>x?_:x,b=g>b?g:b,b=v>b?v:b,b=y>b?y:b;var S=this._bounds;return S.x=T,S.width=x-T,S.y=w,S.height=b-w,S},e.Graphics.prototype.updateBounds=function(){for(var t,i,r,s,n,a=1/0,o=-1/0,h=1/0,l=-1/0,u=0;u<this.graphicsData.length;u++){var c=this.graphicsData[u],d=c.type,p=c.lineWidth;if(t=c.points,d===e.Graphics.RECT)i=t[0]-p/2,r=t[1]-p/2,s=t[2]+p,n=t[3]+p,a=a>i?i:a,o=i+s>o?i+s:o,h=h>r?i:h,l=r+n>l?r+n:l;else if(d===e.Graphics.CIRC||d===e.Graphics.ELIP)i=t[0],r=t[1],s=t[2]+p/2,n=t[3]+p/2,a=a>i-s?i-s:a,o=i+s>o?i+s:o,h=h>r-n?r-n:h,l=r+n>l?r+n:l;else for(var f=0;f<t.length;f+=2)i=t[f],r=t[f+1],a=a>i-p?i-p:a,o=i+p>o?i+p:o,h=h>r-p?r-p:h,l=r+p>l?r+p:l}var g=this.boundsPadding;this.bounds=new e.Rectangle(a-g,h-g,o-a+2*g,l-h+2*g)},e.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var i=new e.CanvasBuffer(t.width,t.height),r=e.Texture.fromCanvas(i.canvas);this._cachedSprite=new e.Sprite(r),this._cachedSprite.buffer=i,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),e.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},e.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},e.Graphics.POLY=0,e.Graphics.RECT=1,e.Graphics.CIRC=2,e.Graphics.ELIP=3,e.Graphics.RREC=4,e.Strip=function(t){e.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new e.Float32Array([0,1,1,1,1,0,0,1]),this.verticies=new e.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new e.Float32Array([1,1,1,1]),this.indices=new e.Uint16Array([0,1,2,3]),this.dirty=!0},e.Strip.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Strip.prototype.constructor=e.Strip,e.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},e.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.verticies,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},e.Strip.prototype._renderStrip=function(t){var i=t.gl,r=t.projection,s=t.offset,n=t.shaderManager.stripShader;i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.uniformMatrix3fv(n.translationMatrix,!1,this.worldTransform.toArray(!0)),i.uniform2f(n.projectionVector,r.x,-r.y),i.uniform2f(n.offsetVector,-s.x,-s.y),i.uniform1f(n.alpha,1),this.dirty?(this.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,this.verticies,i.STATIC_DRAW),i.vertexAttribPointer(n.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._uvBuffer),i.bufferData(i.ARRAY_BUFFER,this.uvs,i.STATIC_DRAW),i.vertexAttribPointer(n.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.texture.baseTexture._glTextures[i.id]||e.createWebGLTexture(this.texture.baseTexture,i)),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.verticies),i.vertexAttribPointer(n.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._uvBuffer),i.vertexAttribPointer(n.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.texture.baseTexture._glTextures[i.id]||e.createWebGLTexture(this.texture.baseTexture,i)),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),i.drawElements(i.TRIANGLE_STRIP,this.indices.length,i.UNSIGNED_SHORT,0)},e.Strip.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.c,i.b,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.c,i.b,i.d,i.tx,i.ty);var r=this,s=r.verticies,n=r.uvs,a=s.length/2;this.count++;for(var o=0;a-2>o;o++){var h=2*o,l=s[h],u=s[h+2],c=s[h+4],d=s[h+1],p=s[h+3],f=s[h+5],g=(l+u+c)/3,m=(d+p+f)/3,v=l-g,_=d-m,y=Math.sqrt(v*v+_*_);l=g+v/y*(y+3),d=m+_/y*(y+3),v=u-g,_=p-m,y=Math.sqrt(v*v+_*_),u=g+v/y*(y+3),p=m+_/y*(y+3),v=c-g,_=f-m,y=Math.sqrt(v*v+_*_),c=g+v/y*(y+3),f=m+_/y*(y+3);var x=n[h]*r.texture.width,b=n[h+2]*r.texture.width,T=n[h+4]*r.texture.width,w=n[h+1]*r.texture.height,S=n[h+3]*r.texture.height,M=n[h+5]*r.texture.height;e.save(),e.beginPath(),e.moveTo(l,d),e.lineTo(u,p),e.lineTo(c,f),e.closePath(),e.clip();var C=x*S+w*T+b*M-S*T-w*b-x*M,P=l*S+w*c+u*M-S*c-w*u-l*M,E=x*u+l*T+b*c-u*T-l*b-x*c,A=x*S*c+w*u*T+l*b*M-l*S*T-w*b*c-x*u*M,L=d*S+w*f+p*M-S*f-w*p-d*M,R=x*p+d*T+b*f-p*T-d*b-x*f,O=x*S*f+w*p*T+d*b*M-d*S*T-w*b*f-x*p*M;e.transform(P/C,L/C,E/C,R/C,A/C,O/C),e.drawImage(r.texture.baseTexture.source,0,0),e.restore()}},e.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},e.Rope=function(t,i){e.Strip.call(this,t),this.points=i,this.verticies=new e.Float32Array(4*i.length),this.uvs=new e.Float32Array(4*i.length),this.colors=new e.Float32Array(2*i.length),this.indices=new e.Uint16Array(2*i.length),this.refresh()},e.Rope.prototype=Object.create(e.Strip.prototype),e.Rope.prototype.constructor=e.Rope,e.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,i=t[0],r=this.indices,s=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,s[0]=1,s[1]=1,r[0]=0,r[1]=1;for(var n,a,o,h=t.length,l=1;h>l;l++)n=t[l],a=4*l,o=l/(h-1),l%2?(e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1):(e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1),a=2*l,s[a]=1,s[a+1]=1,a=2*l,r[a]=a,r[a+1]=a+1,i=n}},e.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var i,r=t[0],s={x:0,y:0};this.count-=.2;for(var n,a,o,h,l,u=this.verticies,c=t.length,d=0;c>d;d++)n=t[d],a=4*d,i=d<t.length-1?t[d+1]:n,s.y=-(i.x-r.x),s.x=i.y-r.y,o=10*(1-d/(c-1)),o>1&&(o=1),h=Math.sqrt(s.x*s.x+s.y*s.y),l=this.texture.height/2,s.x/=h,s.y/=h,s.x*=l,s.y*=l,u[a]=n.x+s.x,u[a+1]=n.y+s.y,u[a+2]=n.x-s.x,u[a+3]=n.y-s.y,r=n;e.DisplayObjectContainer.prototype.updateTransform.call(this)}},e.Rope.prototype.setTexture=function(t){this.texture=t},e.TilingSprite=function(t,i,r){e.Sprite.call(this,t),this._width=i||100,this._height=r||100,this.tileScale=new e.Point(1,1),this.tileScaleOffset=new e.Point(1,1),this.tilePosition=new e.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=e.blendModes.NORMAL},e.TilingSprite.prototype=Object.create(e.Sprite.prototype),e.TilingSprite.prototype.constructor=e.TilingSprite,Object.defineProperty(e.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(e.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),e.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},e.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var i,r;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(e.updateWebGLTexture(this.tilingTexture.baseTexture,t.gl),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),i=0,r=this.children.length;r>i;i++)this.children[i]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),t.spriteBatch.start()}},e.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var i=t.context;this._mask&&t.maskManager.pushMask(this._mask,i),i.globalAlpha=this.worldAlpha;var r,s,n=this.worldTransform;if(i.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=i.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModesCanvas[t.currentBlendMode]);var a=this.tilePosition,o=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,i.scale(o.x,o.y),i.translate(a.x,a.y),i.fillStyle=this.__tilePattern,i.fillRect(-a.x+this.anchor.x*-this._width,-a.y+this.anchor.y*-this._height,this._width/o.x,this._height/o.y),i.scale(1/o.x,1/o.y),i.translate(-a.x,-a.y),this._mask&&t.maskManager.popMask(t.context),r=0,s=this.children.length;s>r;r++)this.children[r]._renderCanvas(t)}},e.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,i=t*(1-this.anchor.x),r=t*-this.anchor.x,s=e*(1-this.anchor.y),n=e*-this.anchor.y,a=this.worldTransform,o=a.a,h=a.c,l=a.b,u=a.d,c=a.tx,d=a.ty,p=o*r+l*n+c,f=u*n+h*r+d,g=o*i+l*n+c,m=u*n+h*i+d,v=o*i+l*s+c,_=u*s+h*i+d,y=o*r+l*s+c,x=u*s+h*r+d,b=-1/0,T=-1/0,w=1/0,S=1/0;w=w>p?p:w,w=w>g?g:w,w=w>v?v:w,w=w>y?y:w,S=S>f?f:S,S=S>m?m:S,S=S>_?_:S,S=S>x?x:S,b=p>b?p:b,b=g>b?g:b,b=v>b?v:b,b=y>b?y:b,T=f>T?f:T,T=m>T?m:T,T=_>T?_:T,T=x>T?x:T;var M=this._bounds;return M.x=w,M.width=b-w,M.y=S,M.height=T-S,this._currentBounds=M,M},e.TilingSprite.prototype.onTextureUpdate=function(){},e.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var i,r,s=this.texture,n=s.frame,a=n.width!==s.baseTexture.width||n.height!==s.baseTexture.height,o=!1;if(t?(i=e.getNextPowerOfTwo(n.width),r=e.getNextPowerOfTwo(n.height),(n.width!==i||n.height!==r)&&(o=!0)):a&&(i=n.width,r=n.height,o=!0),o){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(i,r),this.tilingTexture.baseTexture.width=i,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new e.CanvasBuffer(i,r),this.tilingTexture=e.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(s.baseTexture.source,s.crop.x,s.crop.y,s.crop.width,s.crop.height,0,0,i,r),this.tileScaleOffset.x=n.width/i,this.tileScaleOffset.y=n.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=s;this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}};var n={};n.BoneData=function(t,e){this.name=t,this.parent=e},n.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1},n.SlotData=function(t,e){this.name=t,this.boneData=e},n.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null},n.Bone=function(t,e){this.data=t,this.parent=e,this.setToSetupPose()},n.Bone.yDown=!1,n.Bone.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,updateWorldTransform:function(t,e){var i=this.parent;null!=i?(this.worldX=this.x*i.m00+this.y*i.m01+i.worldX,this.worldY=this.x*i.m10+this.y*i.m11+i.worldY,this.worldScaleX=i.worldScaleX*this.scaleX,this.worldScaleY=i.worldScaleY*this.scaleY,this.worldRotation=i.worldRotation+this.rotation):(this.worldX=this.x,this.worldY=this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotation);var r=this.worldRotation*Math.PI/180,s=Math.cos(r),a=Math.sin(r);this.m00=s*this.worldScaleX,this.m10=a*this.worldScaleX,this.m01=-a*this.worldScaleY,this.m11=s*this.worldScaleY,t&&(this.m00=-this.m00,this.m01=-this.m01),e&&(this.m10=-this.m10,this.m11=-this.m11),n.Bone.yDown&&(this.m10=-this.m10,this.m11=-this.m11)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY}},n.Slot=function(t,e,i){this.data=t,this.skeleton=e,this.bone=i,this.setToSetupPose()},n.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,setAttachment:function(t){this.attachment=t,this._attachmentTime=this.skeleton.time},setAttachmentTime:function(t){this._attachmentTime=this.skeleton.time-t},getAttachmentTime:function(){return this.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.skeleton.data.slots,i=0,r=e.length;r>i;i++)if(e[i]==t){this.setAttachment(t.attachmentName?this.skeleton.getAttachmentBySlotIndex(i,t.attachmentName):null);break}}},n.Skin=function(t){this.name=t,this.attachments={}},n.Skin.prototype={addAttachment:function(t,e,i){this.attachments[t+":"+e]=i},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var i in e.attachments){var r=i.indexOf(":"),s=parseInt(i.substring(0,r),10),n=i.substring(r+1),a=t.slots[s];if(a.attachment&&a.attachment.name==n){var o=this.getAttachment(s,n);o&&a.setAttachment(o)}}}},n.Animation=function(t,e,i){this.name=t,this.timelines=e,this.duration=i},n.Animation.prototype={apply:function(t,e,i){i&&this.duration&&(e%=this.duration);for(var r=this.timelines,s=0,n=r.length;n>s;s++)r[s].apply(t,e,1)},mix:function(t,e,i,r){i&&this.duration&&(e%=this.duration);for(var s=this.timelines,n=0,a=s.length;a>n;n++)s[n].apply(t,e,r)}},n.binarySearch=function(t,e,i){var r=0,s=Math.floor(t.length/i)-2;if(!s)return i;for(var n=s>>>1;;){if(t[(n+1)*i]<=e?r=n+1:s=n,r==s)return(r+1)*i;n=r+s>>>1}},n.linearSearch=function(t,e,i){for(var r=0,s=t.length-i;s>=r;r+=i)if(t[r]>e)return r;return-1},n.Curves=function(t){this.curves=[],this.curves.length=6*(t-1)},n.Curves.prototype={setLinear:function(t){this.curves[6*t]=0},setStepped:function(t){this.curves[6*t]=-1},setCurve:function(t,e,i,r,s){var n=.1,a=n*n,o=a*n,h=3*n,l=3*a,u=6*a,c=6*o,d=2*-e+r,p=2*-i+s,f=3*(e-r)+1,g=3*(i-s)+1,m=6*t,v=this.curves;v[m]=e*h+d*l+f*o,v[m+1]=i*h+p*l+g*o,v[m+2]=d*u+f*c,v[m+3]=p*u+g*c,v[m+4]=f*c,v[m+5]=g*c},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var i=6*t,r=this.curves,s=r[i];if(!s)return e;if(-1==s)return 0;for(var n=r[i+1],a=r[i+2],o=r[i+3],h=r[i+4],l=r[i+5],u=s,c=n,d=8;;){if(u>=e){var p=u-s,f=c-n;return f+(c-f)*(e-p)/(u-p)}if(!d)break;d--,s+=a,n+=o,a+=h,o+=l,u+=s,c+=n}return c+(1-c)*(e-u)/(1-u)}},n.RotateTimeline=function(t){this.curves=new n.Curves(t),this.frames=[],this.frames.length=2*t},n.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i},apply:function(t,e,i){var r,s=this.frames;if(!(e<s[0])){var a=t.bones[this.boneIndex];if(e>=s[s.length-2]){for(r=a.data.rotation+s[s.length-1]-a.rotation;r>180;)r-=360;for(;-180>r;)r+=360;return a.rotation+=r*i,void 0}var o=n.binarySearch(s,e,2),h=s[o-1],l=s[o],u=1-(e-l)/(s[o-2]-l);for(u=this.curves.getCurvePercent(o/2-1,u),r=s[o+1]-h;r>180;)r-=360;for(;-180>r;)r+=360;for(r=a.data.rotation+(h+r*u)-a.rotation;r>180;)r-=360;for(;-180>r;)r+=360;a.rotation+=r*i}}},n.TranslateTimeline=function(t){this.curves=new n.Curves(t),this.frames=[],this.frames.length=3*t},n.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,i){var r=this.frames;if(!(e<r[0])){var s=t.bones[this.boneIndex];if(e>=r[r.length-3])return s.x+=(s.data.x+r[r.length-2]-s.x)*i,s.y+=(s.data.y+r[r.length-1]-s.y)*i,void 0;var a=n.binarySearch(r,e,3),o=r[a-2],h=r[a-1],l=r[a],u=1-(e-l)/(r[a+-3]-l);u=this.curves.getCurvePercent(a/3-1,u),s.x+=(s.data.x+o+(r[a+1]-o)*u-s.x)*i,s.y+=(s.data.y+h+(r[a+2]-h)*u-s.y)*i}}},n.ScaleTimeline=function(t){this.curves=new n.Curves(t),this.frames=[],this.frames.length=3*t},n.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},apply:function(t,e,i){var r=this.frames;if(!(e<r[0])){var s=t.bones[this.boneIndex];if(e>=r[r.length-3])return s.scaleX+=(s.data.scaleX-1+r[r.length-2]-s.scaleX)*i,s.scaleY+=(s.data.scaleY-1+r[r.length-1]-s.scaleY)*i,void 0;var a=n.binarySearch(r,e,3),o=r[a-2],h=r[a-1],l=r[a],u=1-(e-l)/(r[a+-3]-l);u=this.curves.getCurvePercent(a/3-1,u),s.scaleX+=(s.data.scaleX-1+o+(r[a+1]-o)*u-s.scaleX)*i,s.scaleY+=(s.data.scaleY-1+h+(r[a+2]-h)*u-s.scaleY)*i}}},n.ColorTimeline=function(t){this.curves=new n.Curves(t),this.frames=[],this.frames.length=5*t},n.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,i,r,s,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n},apply:function(t,e,i){var r=this.frames;if(!(e<r[0])){var s=t.slots[this.slotIndex];if(e>=r[r.length-5]){var a=r.length-1;return s.r=r[a-3],s.g=r[a-2],s.b=r[a-1],s.a=r[a],void 0}var o=n.binarySearch(r,e,5),h=r[o-4],l=r[o-3],u=r[o-2],c=r[o-1],d=r[o],p=1-(e-d)/(r[o-5]-d);p=this.curves.getCurvePercent(o/5-1,p);var f=h+(r[o+1]-h)*p,g=l+(r[o+2]-l)*p,m=u+(r[o+3]-u)*p,v=c+(r[o+4]-c)*p;1>i?(s.r+=(f-s.r)*i,s.g+=(g-s.g)*i,s.b+=(m-s.b)*i,s.a+=(v-s.a)*i):(s.r=f,s.g=g,s.b=m,s.a=v)}}},n.AttachmentTimeline=function(t){this.curves=new n.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},n.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},apply:function(t,e){var i=this.frames;if(!(e<i[0])){var r;r=e>=i[i.length-1]?i.length-1:n.binarySearch(i,e,1)-1;var s=this.attachmentNames[r];t.slots[this.slotIndex].setAttachment(s?t.getAttachmentBySlotIndex(this.slotIndex,s):null)}}},n.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.animations=[]},n.SkeletonData.prototype={defaultSkin:null,findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return slot[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].name==t)return i;return-1},findSkin:function(t){for(var e=this.skins,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},findAnimation:function(t){for(var e=this.animations,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null}},n.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,i=t.bones.length;i>e;e++){var r=t.bones[e],s=r.parent?this.bones[t.bones.indexOf(r.parent)]:null;this.bones.push(new n.Bone(r,s))}for(this.slots=[],this.drawOrder=[],e=0,i=t.slots.length;i>e;e++){var a=t.slots[e],o=this.bones[t.bones.indexOf(a.boneData)],h=new n.Slot(a,this,o);this.slots.push(h),this.drawOrder.push(h)}},n.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateWorldTransform:function(){for(var t=this.flipX,e=this.flipY,i=this.bones,r=0,s=i.length;s>r;r++)i[r].updateWorldTransform(t,e)},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,i=t.length;i>e;e++)t[e].setToSetupPose()},setSlotsToSetupPose:function(){for(var t=this.slots,e=0,i=t.length;i>e;e++)t[e].setToSetupPose(e)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findBoneIndex:function(t){for(var e=this.bones,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},findSlot:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return e[i];return null},findSlotIndex:function(t){for(var e=this.slots,i=0,r=e.length;r>i;i++)if(e[i].data.name==t)return i;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){this.skin&&t&&t._attachAll(this,this.skin),this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var i=this.slots,r=0,s=i.size;s>r;r++){var n=i[r];if(n.data.name==t){var a=null;if(e&&(a=this.getAttachment(r,e),null==a))throw"Attachment not found: "+e+", for slot: "+t;return n.setAttachment(a),void 0}}throw"Slot not found: "+t},update:function(t){time+=t}},n.AttachmentType={region:0},n.RegionAttachment=function(){this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},n.RegionAttachment.prototype={x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,i,r,s){var n=this.uvs;s?(n[2]=t,n[3]=r,n[4]=t,n[5]=e,n[6]=i,n[7]=e,n[0]=i,n[1]=r):(n[0]=t,n[1]=r,n[2]=t,n[3]=e,n[4]=i,n[5]=e,n[6]=i,n[7]=r)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.regionOffsetX*t,r=-this.height/2*this.scaleY+this.regionOffsetY*e,s=i+this.regionWidth*t,n=r+this.regionHeight*e,a=this.rotation*Math.PI/180,o=Math.cos(a),h=Math.sin(a),l=i*o+this.x,u=i*h,c=r*o+this.y,d=r*h,p=s*o+this.x,f=s*h,g=n*o+this.y,m=n*h,v=this.offset;v[0]=l-d,v[1]=c+u,v[2]=l-m,v[3]=g+u,v[4]=p-m,v[5]=g+f,v[6]=p-d,v[7]=c+f},computeVertices:function(t,e,i,r){t+=i.worldX,e+=i.worldY;var s=i.m00,n=i.m01,a=i.m10,o=i.m11,h=this.offset;r[0]=h[0]*s+h[1]*n+t,r[1]=h[0]*a+h[1]*o+e,r[2]=h[2]*s+h[3]*n+t,r[3]=h[2]*a+h[3]*o+e,r[4]=h[4]*s+h[5]*n+t,r[5]=h[4]*a+h[5]*o+e,r[6]=h[6]*s+h[7]*n+t,r[7]=h[6]*a+h[7]*o+e}},n.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},n.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,i){var r=this.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;var s=this.skeletonData.findAnimation(e);if(!s)throw"Animation not found: "+e;this.setMix(r,s,i)},setMix:function(t,e,i){this.animationToMixTime[t.name+":"+e.name]=i},getMix:function(t,e){var i=this.animationToMixTime[t.name+":"+e.name];return i?i:this.defaultMix}},n.AnimationState=function(t){this.data=t,this.queue=[]},n.AnimationState.prototype={animationSpeed:1,current:null,previous:null,currentTime:0,previousTime:0,currentLoop:!1,previousLoop:!1,mixTime:0,mixDuration:0,update:function(t){if(this.currentTime+=t*this.animationSpeed,this.previousTime+=t,this.mixTime+=t,this.queue.length>0){var e=this.queue[0];this.currentTime>=e.delay&&(this._setAnimation(e.animation,e.loop),this.queue.shift())}},apply:function(t){if(this.current)if(this.previous){this.previous.apply(t,this.previousTime,this.previousLoop);var e=this.mixTime/this.mixDuration;e>=1&&(e=1,this.previous=null),this.current.mix(t,this.currentTime,this.currentLoop,e)}else this.current.apply(t,this.currentTime,this.currentLoop)},clearAnimation:function(){this.previous=null,this.current=null,this.queue.length=0},_setAnimation:function(t,e){this.previous=null,t&&this.current&&(this.mixDuration=this.data.getMix(this.current,t),this.mixDuration>0&&(this.mixTime=0,this.previous=this.current,this.previousTime=this.currentTime,this.previousLoop=this.currentLoop)),this.current=t,this.currentLoop=e,this.currentTime=0},setAnimationByName:function(t,e){var i=this.data.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;this.setAnimation(i,e)},setAnimation:function(t,e){this.queue.length=0,this._setAnimation(t,e)},addAnimationByName:function(t,e,i){var r=this.data.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;this.addAnimation(r,e,i)},addAnimation:function(t,e,i){var r={};if(r.animation=t,r.loop=e,!i||0>=i){var s=this.queue.length?this.queue[this.queue.length-1].animation:this.current;i=null!=s?s.duration-this.data.getMix(s,t)+(i||0):0}r.delay=i,this.queue.push(r)},isComplete:function(){return!this.current||this.currentTime>=this.current.duration}},n.SkeletonJson=function(t){this.attachmentLoader=t},n.SkeletonJson.prototype={scale:1,readSkeletonData:function(t){for(var e,i=new n.SkeletonData,r=t.bones,s=0,a=r.length;a>s;s++){var o=r[s],h=null;if(o.parent&&(h=i.findBone(o.parent),!h))throw"Parent bone not found: "+o.parent;e=new n.BoneData(o.name,h),e.length=(o.length||0)*this.scale,e.x=(o.x||0)*this.scale,e.y=(o.y||0)*this.scale,e.rotation=o.rotation||0,e.scaleX=o.scaleX||1,e.scaleY=o.scaleY||1,i.bones.push(e)}var l=t.slots;for(s=0,a=l.length;a>s;s++){var u=l[s];if(e=i.findBone(u.bone),!e)throw"Slot bone not found: "+u.bone;var c=new n.SlotData(u.name,e),d=u.color;d&&(c.r=n.SkeletonJson.toColor(d,0),c.g=n.SkeletonJson.toColor(d,1),c.b=n.SkeletonJson.toColor(d,2),c.a=n.SkeletonJson.toColor(d,3)),c.attachmentName=u.attachment,i.slots.push(c)}var p=t.skins;for(var f in p)if(p.hasOwnProperty(f)){var g=p[f],m=new n.Skin(f);for(var v in g)if(g.hasOwnProperty(v)){var _=i.findSlotIndex(v),y=g[v];for(var x in y)if(y.hasOwnProperty(x)){var b=this.readAttachment(m,x,y[x]);null!=b&&m.addAttachment(_,x,b)}}i.skins.push(m),"default"==m.name&&(i.defaultSkin=m)}var T=t.animations;for(var w in T)T.hasOwnProperty(w)&&this.readAnimation(w,T[w],i);return i},readAttachment:function(t,e,i){e=i.name||e;var r=n.AttachmentType[i.type||"region"];if(r==n.AttachmentType.region){var s=new n.RegionAttachment;return s.x=(i.x||0)*this.scale,s.y=(i.y||0)*this.scale,s.scaleX=i.scaleX||1,s.scaleY=i.scaleY||1,s.rotation=i.rotation||0,s.width=(i.width||32)*this.scale,s.height=(i.height||32)*this.scale,s.updateOffset(),s.rendererObject={},s.rendererObject.name=e,s.rendererObject.scale={},s.rendererObject.scale.x=s.scaleX,s.rendererObject.scale.y=s.scaleY,s.rendererObject.rotation=-s.rotation*Math.PI/180,s}throw"Unknown attachment type: "+r},readAnimation:function(t,e,i){var r,s,a,o,h,l,u,c=[],d=0,p=e.bones;for(var f in p)if(p.hasOwnProperty(f)){var g=i.findBoneIndex(f);if(-1==g)throw"Bone not found: "+f;var m=p[f];for(a in m)if(m.hasOwnProperty(a))if(h=m[a],"rotate"==a){for(s=new n.RotateTimeline(h.length),s.boneIndex=g,r=0,l=0,u=h.length;u>l;l++)o=h[l],s.setFrame(r,o.time,o.angle),n.SkeletonJson.readCurve(s,r,o),r++;c.push(s),d=Math.max(d,s.frames[2*s.getFrameCount()-2])}else{if("translate"!=a&&"scale"!=a)throw"Invalid timeline type for a bone: "+a+" ("+f+")";var v=1;for("scale"==a?s=new n.ScaleTimeline(h.length):(s=new n.TranslateTimeline(h.length),v=this.scale),s.boneIndex=g,r=0,l=0,u=h.length;u>l;l++){o=h[l];var _=(o.x||0)*v,y=(o.y||0)*v;s.setFrame(r,o.time,_,y),n.SkeletonJson.readCurve(s,r,o),r++}c.push(s),d=Math.max(d,s.frames[3*s.getFrameCount()-3])}}var x=e.slots;for(var b in x)if(x.hasOwnProperty(b)){var T=x[b],w=i.findSlotIndex(b);for(a in T)if(T.hasOwnProperty(a))if(h=T[a],"color"==a){for(s=new n.ColorTimeline(h.length),s.slotIndex=w,r=0,l=0,u=h.length;u>l;l++){o=h[l];var S=o.color,M=n.SkeletonJson.toColor(S,0),C=n.SkeletonJson.toColor(S,1),P=n.SkeletonJson.toColor(S,2),E=n.SkeletonJson.toColor(S,3);s.setFrame(r,o.time,M,C,P,E),n.SkeletonJson.readCurve(s,r,o),r++}c.push(s),d=Math.max(d,s.frames[5*s.getFrameCount()-5])}else{if("attachment"!=a)throw"Invalid timeline type for a slot: "+a+" ("+b+")";for(s=new n.AttachmentTimeline(h.length),s.slotIndex=w,r=0,l=0,u=h.length;u>l;l++)o=h[l],s.setFrame(r++,o.time,o.name);c.push(s),d=Math.max(d,s.frames[s.getFrameCount()-1])}}i.animations.push(new n.Animation(t,c,d))}},n.SkeletonJson.readCurve=function(t,e,i){var r=i.curve;r&&("stepped"==r?t.curves.setStepped(e):r instanceof Array&&t.curves.setCurve(e,r[0],r[1],r[2],r[3]))},n.SkeletonJson.toColor=function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substr(2*e,2),16)/255},n.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var i=new n.AtlasReader(t),r=[];r.length=4;for(var s=null;;){var a=i.readLine();if(null==a)break;if(a=i.trim(a),a.length)if(s){var o=new n.AtlasRegion;o.name=a,o.page=s,o.rotate="true"==i.readValue(),i.readTuple(r);var h=parseInt(r[0],10),l=parseInt(r[1],10);i.readTuple(r);var u=parseInt(r[0],10),c=parseInt(r[1],10);o.u=h/s.width,o.v=l/s.height,o.rotate?(o.u2=(h+c)/s.width,o.v2=(l+u)/s.height):(o.u2=(h+u)/s.width,o.v2=(l+c)/s.height),o.x=h,o.y=l,o.width=Math.abs(u),o.height=Math.abs(c),4==i.readTuple(r)&&(o.splits=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)],4==i.readTuple(r)&&(o.pads=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)],i.readTuple(r))),o.originalWidth=parseInt(r[0],10),o.originalHeight=parseInt(r[1],10),i.readTuple(r),o.offsetX=parseInt(r[0],10),o.offsetY=parseInt(r[1],10),o.index=parseInt(i.readValue(),10),this.regions.push(o)
}else{s=new n.AtlasPage,s.name=a,s.format=n.Atlas.Format[i.readValue()],i.readTuple(r),s.minFilter=n.Atlas.TextureFilter[r[0]],s.magFilter=n.Atlas.TextureFilter[r[1]];var d=i.readValue();s.uWrap=n.Atlas.TextureWrap.clampToEdge,s.vWrap=n.Atlas.TextureWrap.clampToEdge,"x"==d?s.uWrap=n.Atlas.TextureWrap.repeat:"y"==d?s.vWrap=n.Atlas.TextureWrap.repeat:"xy"==d&&(s.uWrap=s.vWrap=n.Atlas.TextureWrap.repeat),e.load(s,a),this.pages.push(s)}else s=null}},n.Atlas.prototype={findRegion:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++)if(e[i].name==t)return e[i];return null},dispose:function(){for(var t=this.pages,e=0,i=t.length;i>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,i=0,r=e.length;r>i;i++){var s=e[i];s.page==t&&(s.u=s.x/t.width,s.v=s.y/t.height,s.rotate?(s.u2=(s.x+s.height)/t.width,s.v2=(s.y+s.width)/t.height):(s.u2=(s.x+s.width)/t.width,s.v2=(s.y+s.height)/t.height))}}},n.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},n.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},n.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},n.AtlasPage=function(){},n.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},n.AtlasRegion=function(){},n.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},n.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},n.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw"Invalid line: "+e;for(var r=0,s=i+1;3>r;r++){var n=e.indexOf(",",s);if(-1==n){if(!r)throw"Invalid line: "+e;break}t[r]=this.trim(e.substr(s,n-s)),s=n+1}return t[r]=this.trim(e.substring(s)),r+1}},n.AtlasAttachmentLoader=function(t){this.atlas=t},n.AtlasAttachmentLoader.prototype={newAttachment:function(t,e,i){switch(e){case n.AttachmentType.region:var r=this.atlas.findRegion(i);if(!r)throw"Region not found in atlas: "+i+" ("+e+")";var s=new n.RegionAttachment(i);return s.rendererObject=r,s.setUVs(r.u,r.v,r.u2,r.v2,r.rotate),s.regionOffsetX=r.offsetX,s.regionOffsetY=r.offsetY,s.regionWidth=r.width,s.regionHeight=r.height,s.regionOriginalWidth=r.originalWidth,s.regionOriginalHeight=r.originalHeight,s}throw"Unknown attachment type: "+e}},n.Bone.yDown=!0,e.AnimCache={},e.Spine=function(t){if(e.DisplayObjectContainer.call(this),this.spineData=e.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new n.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new n.AnimationStateData(this.spineData),this.state=new n.AnimationState(this.stateData),this.slotContainers=[];for(var i=0,r=this.skeleton.drawOrder.length;r>i;i++){var s=this.skeleton.drawOrder[i],a=s.attachment,o=new e.DisplayObjectContainer;if(this.slotContainers.push(o),this.addChild(o),a instanceof n.RegionAttachment){var h=a.rendererObject.name,l=this.createSprite(s,a.rendererObject);s.currentSprite=l,s.currentSpriteName=h,o.addChild(l)}}},e.Spine.prototype=Object.create(e.DisplayObjectContainer.prototype),e.Spine.prototype.constructor=e.Spine,e.Spine.prototype.updateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var i=this.skeleton.drawOrder,r=0,s=i.length;s>r;r++){var a=i[r],o=a.attachment,h=this.slotContainers[r];if(o instanceof n.RegionAttachment){if(o.rendererObject&&(!a.currentSpriteName||a.currentSpriteName!=o.name)){var l=o.rendererObject.name;if(void 0!==a.currentSprite&&(a.currentSprite.visible=!1),a.sprites=a.sprites||{},void 0!==a.sprites[l])a.sprites[l].visible=!0;else{var u=this.createSprite(a,o.rendererObject);h.addChild(u)}a.currentSprite=a.sprites[l],a.currentSpriteName=l}h.visible=!0;var c=a.bone;h.position.x=c.worldX+o.x*c.m00+o.y*c.m01,h.position.y=c.worldY+o.x*c.m10+o.y*c.m11,h.scale.x=c.worldScaleX,h.scale.y=c.worldScaleY,h.rotation=-(a.bone.worldRotation*Math.PI/180),h.alpha=a.a,a.currentSprite.tint=e.rgb2hex([a.r,a.g,a.b])}else h.visible=!1}e.DisplayObjectContainer.prototype.updateTransform.call(this)},e.Spine.prototype.createSprite=function(t,i){var r=e.TextureCache[i.name]?i.name:i.name+".png",s=new e.Sprite(e.Texture.fromFrame(r));return s.scale=i.scale,s.rotation=i.rotation,s.anchor.x=s.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[i.name]=s,s},e.BaseTextureCache={},e.texturesToUpdate=[],e.texturesToDestroy=[],e.BaseTextureCacheIdGenerator=0,e.BaseTexture=function(t,i){if(e.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=i||e.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this.id=e.BaseTextureCacheIdGenerator++,this.premultipliedAlpha=!0,this._glTextures=[],this._dirty=[],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,e.texturesToUpdate.push(this);else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.width,r.height=r.source.height;for(var t=0;t<r._glTextures.length;t++)r._dirty[t]=!0;r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},e.BaseTexture.prototype.constructor=e.BaseTexture,e.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete e.BaseTextureCache[this.imageUrl],delete e.TextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null):this.source&&this.source._pixiId&&delete e.BaseTextureCache[this.source._pixiId],this.source=null,e.texturesToDestroy.push(this)},e.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},e.BaseTexture.fromImage=function(t,i,r){var s=e.BaseTextureCache[t];if(void 0===i&&-1===t.indexOf("data:")&&(i=!0),!s){var n=new Image;i&&(n.crossOrigin=""),n.src=t,s=new e.BaseTexture(n,r),s.imageUrl=t,e.BaseTextureCache[t]=s}return s},e.BaseTexture.fromCanvas=function(t,i){t._pixiId||(t._pixiId="canvas_"+e.TextureCacheIdGenerator++);var r=e.BaseTextureCache[t._pixiId];return r||(r=new e.BaseTexture(t,i),e.BaseTextureCache[t._pixiId]=r),r},e.TextureCache={},e.FrameCache={},e.TextureCacheIdGenerator=0,e.Texture=function(t,i){if(e.EventTarget.call(this),this.noFrame=!1,i||(this.noFrame=!0,i=new e.Rectangle(0,0,1,1)),t instanceof e.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=i,this.trim=null,this.valid=!1,this.scope=this,this._uvs=null,this.width=0,this.height=0,this.crop=new e.Rectangle(0,0,1,1),t.hasLoaded)this.noFrame&&(i=new e.Rectangle(0,0,t.width,t.height)),this.setFrame(i);else{var r=this;t.addEventListener("loaded",function(){r.onBaseTextureLoaded()})}},e.Texture.prototype.constructor=e.Texture,e.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new e.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.scope.dispatchEvent({type:"update",content:this})},e.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},e.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&e.Texture.frameUpdates.push(this)},e.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new e.TextureUvs);var t=this.crop,i=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/i,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/i,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/i,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/i,this._uvs.y3=(t.y+t.height)/r},e.Texture.fromImage=function(t,i,r){var s=e.TextureCache[t];return s||(s=new e.Texture(e.BaseTexture.fromImage(t,i,r)),e.TextureCache[t]=s),s},e.Texture.fromFrame=function(t){var i=e.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return i},e.Texture.fromCanvas=function(t,i){var r=e.BaseTexture.fromCanvas(t,i);return new e.Texture(r)},e.Texture.addTextureToCache=function(t,i){e.TextureCache[i]=t},e.Texture.removeTextureFromCache=function(t){var i=e.TextureCache[t];return delete e.TextureCache[t],delete e.BaseTextureCache[t],i},e.Texture.frameUpdates=[],e.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},e.RenderTexture=function(t,i,r,s){if(e.EventTarget.call(this),this.width=t||100,this.height=i||100,this.frame=new e.Rectangle(0,0,this.width,this.height),this.crop=new e.Rectangle(0,0,this.width,this.height),this.baseTexture=new e.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=s||e.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=r||e.defaultRenderer,this.renderer.type===e.WEBGL_RENDERER){var n=this.renderer.gl;this.textureBuffer=new e.FilterTexture(n,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[n.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new e.Point(this.width/2,-this.height/2)}else this.render=this.renderCanvas,this.textureBuffer=new e.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,e.Texture.frameUpdates.push(this)},e.RenderTexture.prototype=Object.create(e.Texture.prototype),e.RenderTexture.prototype.constructor=e.RenderTexture,e.RenderTexture.prototype.resize=function(t,i,r){(t!==this.width||i!==this.height)&&(this.width=this.frame.width=this.crop.width=t,this.height=this.frame.height=this.crop.height=i,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===e.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.textureBuffer.resize(this.width,this.height))},e.RenderTexture.prototype.clear=function(){this.renderer.type===e.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear()},e.RenderTexture.prototype.renderWebGL=function(t,i,r){var s=this.renderer.gl;s.colorMask(!0,!0,!0,!0),s.viewport(0,0,this.width,this.height),s.bindFramebuffer(s.FRAMEBUFFER,this.textureBuffer.frameBuffer),r&&this.textureBuffer.clear();var n=t.children,a=t.worldTransform;t.worldTransform=e.RenderTexture.tempMatrix,t.worldTransform.d=-1,t.worldTransform.ty=-2*this.projection.y,i&&(t.worldTransform.tx=i.x,t.worldTransform.ty-=i.y);for(var o=0,h=n.length;h>o;o++)n[o].updateTransform();e.WebGLRenderer.updateTextures(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),t.worldTransform=a,this.renderer.spriteBatch.dirty=!0},e.RenderTexture.prototype.renderCanvas=function(t,i,r){var s=t.children,n=t.worldTransform;t.worldTransform=e.RenderTexture.tempMatrix,i?(t.worldTransform.tx=i.x,t.worldTransform.ty=i.y):(t.worldTransform.tx=0,t.worldTransform.ty=0);for(var a=0,o=s.length;o>a;a++)s[a].updateTransform();r&&this.textureBuffer.clear();var h=this.textureBuffer.context;this.renderer.renderDisplayObject(t,h),h.setTransform(1,0,0,1,0,0),t.worldTransform=n},e.RenderTexture.tempMatrix=new e.Matrix,e.AssetLoader=function(t,i){e.EventTarget.call(this),this.assetURLs=t,this.crossorigin=i,this.loadersByType={jpg:e.ImageLoader,jpeg:e.ImageLoader,png:e.ImageLoader,gif:e.ImageLoader,webp:e.ImageLoader,json:e.JsonLoader,atlas:e.AtlasLoader,anim:e.SpineLoader,xml:e.BitmapFontLoader,fnt:e.BitmapFontLoader}},e.AssetLoader.prototype.constructor=e.AssetLoader,e.AssetLoader.prototype._getDataType=function(t){var e="data:",i=t.slice(0,e.length).toLowerCase();if(i===e){var r=t.slice(e.length),s=r.indexOf(",");if(-1===s)return null;var n=r.slice(0,s).split(";")[0];return n&&"text/plain"!==n.toLowerCase()?n.split("/").pop().toLowerCase():"txt"}return null},e.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.content)}var e=this;this.loadCount=this.assetURLs.length;for(var i=0;i<this.assetURLs.length;i++){var r=this.assetURLs[i],s=this._getDataType(r);s||(s=r.split("?").shift().split(".").pop().toLowerCase());var n=this.loadersByType[s];if(!n)throw new Error(s+" is an unsupported file type");var a=new n(r,this.crossorigin);a.addEventListener("loaded",t),a.load()}},e.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.dispatchEvent({type:"onProgress",content:this,loader:t}),this.onProgress&&this.onProgress(t),this.loadCount||(this.dispatchEvent({type:"onComplete",content:this}),this.onComplete&&this.onComplete())},e.JsonLoader=function(t,i){e.EventTarget.call(this),this.url=t,this.crossorigin=i,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},e.JsonLoader.prototype.constructor=e.JsonLoader,e.JsonLoader.prototype.load=function(){var t=this;window.XDomainRequest&&t.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=function(){t.onError()},this.ajaxRequest.ontimeout=function(){t.onError()},this.ajaxRequest.onprogress=function(){}):this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onload=function(){t.onJSONLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},e.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return this.onError(),void 0;if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames){var t=this,i=this.baseUrl+this.json.meta.image,r=new e.ImageLoader(i,this.crossorigin),s=this.json.frames;this.texture=r.texture.baseTexture,r.addEventListener("loaded",function(){t.onLoaded()});for(var a in s){var o=s[a].frame;if(o&&(e.TextureCache[a]=new e.Texture(this.texture,{x:o.x,y:o.y,width:o.w,height:o.h}),e.TextureCache[a].crop=new e.Rectangle(o.x,o.y,o.w,o.h),s[a].trimmed)){var h=s[a].sourceSize,l=s[a].spriteSourceSize;e.TextureCache[a].trim=new e.Rectangle(l.x,l.y,h.w,h.h)}}r.load()}else if(this.json.bones){var u=new n.SkeletonJson,c=u.readSkeletonData(this.json);e.AnimCache[this.url]=c,this.onLoaded()}else this.onLoaded()},e.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},e.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},e.AtlasLoader=function(t,i){e.EventTarget.call(this),this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=i,this.loaded=!1},e.AtlasLoader.constructor=e.AtlasLoader,e.AtlasLoader.prototype.load=function(){this.ajaxRequest=new e.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},e.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),i=-3,r=0,s=null,n=!1,a=0,o=0,h=this.onLoaded.bind(this);for(a=0;a<t.length;a++)if(t[a]=t[a].replace(/^\s+|\s+$/g,""),""===t[a]&&(n=a+1),t[a].length>0){if(n===a)this.atlas.meta.image.push(t[a]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),i=-3;else if(i>0)if(i%7===1)null!=s&&(this.atlas.frames[r][s.name]=s),s={name:t[a],frame:{}};else{var l=t[a].split(" ");if(i%7===3)s.frame.x=Number(l[1].replace(",","")),s.frame.y=Number(l[2]);else if(i%7===4)s.frame.w=Number(l[1].replace(",","")),s.frame.h=Number(l[2]);else if(i%7===5){var u={x:0,y:0,w:Number(l[1].replace(",","")),h:Number(l[2])};u.w>s.frame.w||u.h>s.frame.h?(s.trimmed=!0,s.realSize=u):s.trimmed=!1}}i++}if(null!=s&&(this.atlas.frames[r][s.name]=s),this.atlas.meta.image.length>0){for(this.images=[],o=0;o<this.atlas.meta.image.length;o++){var c=this.baseUrl+this.atlas.meta.image[o],d=this.atlas.frames[o];this.images.push(new e.ImageLoader(c,this.crossorigin));for(a in d){var p=d[a].frame;p&&(e.TextureCache[a]=new e.Texture(this.images[o].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),d[a].trimmed&&(e.TextureCache[a].realSize=d[a].realSize,e.TextureCache[a].trim.x=0,e.TextureCache[a].trim.y=0))}}for(this.currentImageId=0,o=0;o<this.images.length;o++)this.images[o].addEventListener("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},e.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.dispatchEvent({type:"loaded",content:this}))},e.AtlasLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},e.SpriteSheetLoader=function(t,i){e.EventTarget.call(this),this.url=t,this.crossorigin=i,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},e.SpriteSheetLoader.prototype.constructor=e.SpriteSheetLoader,e.SpriteSheetLoader.prototype.load=function(){var t=this,i=new e.JsonLoader(this.url,this.crossorigin);i.addEventListener("loaded",function(e){t.json=e.content.json,t.onLoaded()}),i.load()},e.SpriteSheetLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},e.ImageLoader=function(t,i){e.EventTarget.call(this),this.texture=e.Texture.fromImage(t,i),this.frames=[]},e.ImageLoader.prototype.constructor=e.ImageLoader,e.ImageLoader.prototype.load=function(){if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var t=this;this.texture.baseTexture.addEventListener("loaded",function(){t.onLoaded()})}},e.ImageLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},e.ImageLoader.prototype.loadFramedSpriteSheet=function(t,i,r){this.frames=[];for(var s=Math.floor(this.texture.width/t),n=Math.floor(this.texture.height/i),a=0,o=0;n>o;o++)for(var h=0;s>h;h++,a++){var l=new e.Texture(this.texture,{x:h*t,y:o*i,width:t,height:i});this.frames.push(l),r&&(e.TextureCache[r+"-"+a]=l)}if(this.texture.baseTexture.hasLoaded)this.onLoaded();else{var u=this;this.texture.baseTexture.addEventListener("loaded",function(){u.onLoaded()})}},e.BitmapFontLoader=function(t,i){e.EventTarget.call(this),this.url=t,this.crossorigin=i,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},e.BitmapFontLoader.prototype.constructor=e.BitmapFontLoader,e.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new e.AjaxRequest;var t=this;this.ajaxRequest.onreadystatechange=function(){t.onXMLLoaded()},this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},e.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var i=new DOMParser;t=i.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,t=r}var s=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),n=new e.ImageLoader(s,this.crossorigin);this.texture=n.texture.baseTexture;var a={},o=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0];a.font=o.getAttribute("face"),a.size=parseInt(o.getAttribute("size"),10),a.lineHeight=parseInt(h.getAttribute("lineHeight"),10),a.chars={};for(var l=t.getElementsByTagName("char"),u=0;u<l.length;u++){var c=parseInt(l[u].getAttribute("id"),10),d=new e.Rectangle(parseInt(l[u].getAttribute("x"),10),parseInt(l[u].getAttribute("y"),10),parseInt(l[u].getAttribute("width"),10),parseInt(l[u].getAttribute("height"),10));a.chars[c]={xOffset:parseInt(l[u].getAttribute("xoffset"),10),yOffset:parseInt(l[u].getAttribute("yoffset"),10),xAdvance:parseInt(l[u].getAttribute("xadvance"),10),kerning:{},texture:e.TextureCache[c]=new e.Texture(this.texture,d)}}var p=t.getElementsByTagName("kerning");for(u=0;u<p.length;u++){var f=parseInt(p[u].getAttribute("first"),10),g=parseInt(p[u].getAttribute("second"),10),m=parseInt(p[u].getAttribute("amount"),10);a.chars[g].kerning[f]=m}e.BitmapText.fonts[a.font]=a;var v=this;n.addEventListener("loaded",function(){v.onLoaded()}),n.load()}},e.BitmapFontLoader.prototype.onLoaded=function(){this.dispatchEvent({type:"loaded",content:this})},e.SpineLoader=function(t,i){e.EventTarget.call(this),this.url=t,this.crossorigin=i,this.loaded=!1},e.SpineLoader.prototype.constructor=e.SpineLoader,e.SpineLoader.prototype.load=function(){var t=this,i=new e.JsonLoader(this.url,this.crossorigin);i.addEventListener("loaded",function(e){t.json=e.content.json,t.onLoaded()}),i.load()},e.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},e.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},e.AlphaMaskFilter=function(t){e.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},e.AlphaMaskFilter.prototype=Object.create(e.AbstractFilter.prototype),e.AlphaMaskFilter.prototype.constructor=e.AlphaMaskFilter,e.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(e.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),e.ColorMatrixFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},e.ColorMatrixFilter.prototype=Object.create(e.AbstractFilter.prototype),e.ColorMatrixFilter.prototype.constructor=e.ColorMatrixFilter,Object.defineProperty(e.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),e.GrayFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},e.GrayFilter.prototype=Object.create(e.AbstractFilter.prototype),e.GrayFilter.prototype.constructor=e.GrayFilter,Object.defineProperty(e.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),e.DisplacementFilter=function(t){e.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},e.DisplacementFilter.prototype=Object.create(e.AbstractFilter.prototype),e.DisplacementFilter.prototype.constructor=e.DisplacementFilter,e.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(e.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(e.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(e.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),e.PixelateFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},e.PixelateFilter.prototype=Object.create(e.AbstractFilter.prototype),e.PixelateFilter.prototype.constructor=e.PixelateFilter,Object.defineProperty(e.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),e.BlurXFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},e.BlurXFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurXFilter.prototype.constructor=e.BlurXFilter,Object.defineProperty(e.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),e.BlurYFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},e.BlurYFilter.prototype=Object.create(e.AbstractFilter.prototype),e.BlurYFilter.prototype.constructor=e.BlurYFilter,Object.defineProperty(e.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.BlurFilter=function(){this.blurXFilter=new e.BlurXFilter,this.blurYFilter=new e.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},Object.defineProperty(e.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(e.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(e.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),e.InvertFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]
},e.InvertFilter.prototype=Object.create(e.AbstractFilter.prototype),e.InvertFilter.prototype.constructor=e.InvertFilter,Object.defineProperty(e.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),e.SepiaFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},e.SepiaFilter.prototype=Object.create(e.AbstractFilter.prototype),e.SepiaFilter.prototype.constructor=e.SepiaFilter,Object.defineProperty(e.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),e.TwistFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},e.TwistFilter.prototype=Object.create(e.AbstractFilter.prototype),e.TwistFilter.prototype.constructor=e.TwistFilter,Object.defineProperty(e.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(e.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(e.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.ColorStepFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},e.ColorStepFilter.prototype=Object.create(e.AbstractFilter.prototype),e.ColorStepFilter.prototype.constructor=e.ColorStepFilter,Object.defineProperty(e.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),e.DotScreenFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},e.DotScreenFilter.prototype=Object.create(e.AbstractFilter.prototype),e.DotScreenFilter.prototype.constructor=e.DotScreenFilter,Object.defineProperty(e.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(e.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),e.CrossHatchFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},e.CrossHatchFilter.prototype=Object.create(e.AbstractFilter.prototype),e.CrossHatchFilter.prototype.constructor=e.BlurYFilter,Object.defineProperty(e.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),e.RGBSplitFilter=function(){e.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},e.RGBSplitFilter.prototype=Object.create(e.AbstractFilter.prototype),e.RGBSplitFilter.prototype.constructor=e.RGBSplitFilter,Object.defineProperty(e.RGBSplitFilter.prototype,"angle",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.PIXI=e):"undefined"!=typeof define&&define.amd?define(e):t.PIXI=e}.call(this);var Stats=function(){var t=Date.now(),e=t,i=0,r=1/0,s=0,n=0,a=1/0,o=0,h=0,l=0,u=document.createElement("div");u.id="stats",u.addEventListener("mousedown",function(t){t.preventDefault(),_(++l%2)},!1),u.style.cssText="width:80px;opacity:0.9;cursor:pointer";var c=document.createElement("div");c.id="fps",c.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",u.appendChild(c);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",c.appendChild(d);var p=document.createElement("div");for(p.id="fpsGraph",p.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",c.appendChild(p);74>p.children.length;){var f=document.createElement("span");f.style.cssText="width:1px;height:30px;float:left;background-color:#113",p.appendChild(f)}var g=document.createElement("div");g.id="ms",g.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",u.appendChild(g);var m=document.createElement("div");m.id="msText",m.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",m.innerHTML="MS",g.appendChild(m);var v=document.createElement("div");for(v.id="msGraph",v.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",g.appendChild(v);74>v.children.length;)f=document.createElement("span"),f.style.cssText="width:1px;height:30px;float:left;background-color:#131",v.appendChild(f);var _=function(t){switch(l=t){case 0:c.style.display="block",g.style.display="none";break;case 1:c.style.display="none",g.style.display="block"}};return{REVISION:11,domElement:u,setMode:_,begin:function(){t=Date.now()},end:function(){var l=Date.now();i=l-t,r=Math.min(r,i),s=Math.max(s,i),m.textContent=i+" MS ("+r+"-"+s+")";var u=Math.min(30,30-30*(i/200));return v.appendChild(v.firstChild).style.height=u+"px",h++,l>e+1e3&&(n=Math.round(1e3*h/(l-e)),a=Math.min(a,n),o=Math.max(o,n),d.textContent=n+" FPS ("+a+"-"+o+")",u=Math.min(30,30-30*(n/100)),p.appendChild(p.firstChild).style.height=u+"px",e=l,h=0),l},update:function(){t=this.end()}}},MJP=MJP||{};MJP.Config=function(){function t(){this.LOCALHOST="1"==LOCALHOST?!0:!1,this.PROD="1"==PROD?!0:!1,this.WEB_ROOT=WEB_ROOT,this.LG=LG,this.REAL_LG=REAL_LG,this.BROWSER=null,this.BROWSER_VERSION=null,this.DEVICE=null,this.IS_IE=null,this.IE_VERSION=null,this.HAS_PUSHSTATE=null,this.HAS_CSS_TRANSITIONS=null}return t.prototype.init=function(){this.BROWSER=Detectizr.browser.name,this.BROWSER_VERSION=Detectizr.browser.version,this.DEVICE=Detectizr.device.type,this.IS_IE="ie"==MJP.Config.BROWSER?!0:!1,this.IE_VERSION=null,this.HAS_PUSHSTATE=Modernizr.history,this.HAS_CSS_TRANSITIONS=Modernizr.csstransitions,MJP.OldBrowser.init()},new t}(window),MJP.OldBrowser=function(){function t(){}t.prototype.init=function(){var t=MJP.Config.BROWSER,r=parseInt(MJP.Config.BROWSER_VERSION);("ie"==t&&9>r||"firefox"==t&&15>r||"opera"==t&&12>r||"safari"==t&&5>r||"chrome"==t&&17>r)&&$.ajax({url:MJP.Config.WEB_ROOT+MJP.Config.REAL_LG+"/old-browser",type:"POST",dataType:"html",success:e.bind(this),error:i.bind(this)})};var e=function(t){MJP.Main.$.mainContainer[0].innerHTML+=t},i=function(){};return new t}(window),MJP.EventDispatcher=function(){function t(){this.events={},this.EVENT={}}return t.prototype.buildEvt=function(t,e){this.events[t]=new signals.Signal,this.events[t].add(e)},t.prototype.destroyEvt=function(t,e){this.events[t].remove(e),delete this.events[t]},t.prototype.dispatch=function(t,e){void 0===e?this.events[t].dispatch():this.events[t].dispatch(e)},t}(window),MJP.RoutesManager=function(t){function e(){MJP.EventDispatcher.call(this),this.prevPage=null,this.currentPage=null,this.nextPage=null,this.viewName=null,this.pageName=null,this.pageUrl=null,this.activeUrl=null,this.isPageChange=!0}e.prototype=Object.create(MJP.EventDispatcher.prototype),e.prototype.constructor=e,e.prototype.init=function(){History.options.disableSuid=!0,i.call(this),r.call(this)},e.prototype.goToPage=function(t){l.call(this,t);var e=c.call(this);History.pushState(null,e,t)},e.prototype.updateGA=function(){var t="accueil"==this.pageUrl?"":this.pageUrl;!MJP.Config.LOCALHOST&&MJP.Config.PROD&&ga("send","pageview","/"+t)};var i=function(){History.Adapter.bind(t,"statechange",s.bind(this))},r=function(){return History.getHash()?(t.location.href=MJP.Config.WEB_ROOT,!1):(l.call(this,null),this.currentPage=u.call(this),this.currentPage.buildEvt(this.currentPage.EVENT.INIT,o.bind(this,!0)),this.currentPage.hidePreloader(),void 0)},s=function(){this.isPageChange||(a.call(this),l.call(this,null),this.nextPage=u.call(this),this.currentPage.buildEvt(this.currentPage.EVENT.HIDDEN,n.bind(this)),this.currentPage.hideContent(),this.nextPage.load(this.pageUrl,this.pageName,this.viewName))},n=function(){this.currentPage.destroyEvt(this.currentPage.EVENT.HIDDEN,n.bind(this)),this.prevPage=this.currentPage,this.currentPage=this.nextPage,this.currentPage.buildEvt(this.currentPage.EVENT.SHOWN,o.bind(this,!1)),this.currentPage.transitionEnded()},a=function(){this.currentPage.showLoader(),this.isPageChange=!0,this.activeUrl=d()},o=function(t){t?(this.currentPage.destroyEvt(this.currentPage.EVENT.INIT,o.bind(this)),this.currentPage.hideLoader(),this.isPageChange=!1,MJP.Main.resize()):(this.currentPage.destroyEvt(this.currentPage.EVENT.SHOWN,o.bind(this)),this.currentPage.hideLoader(),this.isPageChange=!1,MJP.Main.resize(),h.call(this))},h=function(){this.activeUrl!=d()&&s.call(this)},l=function(t){null===t&&(t=d());var e=t.indexOf(MJP.Config.WEB_ROOT)+MJP.Config.WEB_ROOT.length;this.pageUrl=t.substring(e,t.length);var i=this.pageUrl.indexOf("?");i>=0&&(this.pageUrl=this.pageUrl.substring(0,i));var r=this.pageUrl.length-1;"/"==this.pageUrl[r]&&(this.pageUrl=this.pageUrl.substring(0,r)),""===this.pageUrl&&(this.pageUrl="accueil"),this.pageName=this.pageUrl.split("/")[0],this.viewName=MJP.Model.Global.json.pages[this.pageName].file},u=function(){var t=null;return"home"==this.viewName?t=MJP.Views.Page.Home:"about"==this.viewName?t=MJP.Views.Page.About:"project"==this.viewName&&(t=MJP.Views.Page.Project),t},c=function(){var t=MJP.Model.Global.json.pages[this.pageName].title;if("project"==this.viewName)for(var e=0;e<MJP.Model.Global.json.projects.length;e++){var i=MJP.Model.Global.json.projects[e];if(void 0!==i.infos&&i.infos.url==this.pageUrl){t=i.infos.title+t;break}}return t},d=function(){var t=History.getState();return url=t.url};return new e}(window),MJP.Model=MJP.Model||{},MJP.Model.Global=function(){function t(){MJP.EventDispatcher.call(this),this.v={},this.EVENT={INIT:"init"},this.aJsonToLoad=[{id:"pages",src:"json/pages-"+MJP.Config.LG+".json"},{id:"projects",src:"json/projects-"+MJP.Config.LG+".json"}],this.json={}}t.prototype=Object.create(MJP.EventDispatcher.prototype),t.prototype.constructor=t,t.prototype.init=function(){this.jsonLoader=new MJP.Loader(!0,!1),this.jsonLoader.buildEvt(this.jsonLoader.EVENT.FILE_LOAD,e.bind(this)),this.jsonLoader.buildEvt(this.jsonLoader.EVENT.COMPLETE,i.bind(this)),this.jsonLoader.startLoad(this.aJsonToLoad)};var e=function(t){this.json[t.item.id]=t.result},i=function(){this.dispatch(this.EVENT.INIT),this.jsonLoader.destroyEvt(this.jsonLoader.EVENT.FILE_LOAD,e.bind(this)),this.jsonLoader.destroyEvt(this.jsonLoader.EVENT.COMPLETE,i.bind(this)),this.jsonLoader.destroy(),this.jsonLoader=null};return new t}(window),MJP.Model=MJP.Model||{},MJP.Model.Images=function(){function t(){MJP.EventDispatcher.call(this),this.$={},this.v={},this.EVENT={INIT:"init"},this.aImg=[MJP.Config.WEB_ROOT+"img/btns/back_menu.png",MJP.Config.WEB_ROOT+"img/btns/mathilde_jacon_about.png",MJP.Config.WEB_ROOT+"img/btns/plus_more_project.png",MJP.Config.WEB_ROOT+"img/icons/email.png",MJP.Config.WEB_ROOT+"img/icons/linked_in.png",MJP.Config.WEB_ROOT+"img/icons/pinterest.png",MJP.Config.WEB_ROOT+"img/icons/twitter.png",MJP.Config.WEB_ROOT+"img/icons/viadeo.png",MJP.Config.WEB_ROOT+"img/logos/awards/awwwards.png",MJP.Config.WEB_ROOT+"img/logos/awards/css_awards.png",MJP.Config.WEB_ROOT+"img/logos/awards/css_design_awards.png",MJP.Config.WEB_ROOT+"img/logos/awards/css_reel.png",MJP.Config.WEB_ROOT+"img/logos/awards/css_winner.png",MJP.Config.WEB_ROOT+"img/logos/awards/design_licks.png",MJP.Config.WEB_ROOT+"img/logos/awards/french_design_index.png",MJP.Config.WEB_ROOT+"img/logos/awards/fwa.png",MJP.Config.WEB_ROOT+"img/others/about_bg.jpg",MJP.Config.WEB_ROOT+"img/others/project_menu_bar.png"]}t.prototype=Object.create(MJP.EventDispatcher.prototype),t.prototype.constructor=t,t.prototype.init=function(){for(var t=0;t<MJP.Model.Global.json.projects.length;t++){var s=MJP.Model.Global.json.projects[t];null!==s.img&&this.aImg.push(MJP.Config.WEB_ROOT+"img/projects/bgs/"+s.imgName+".jpg")}this.imgLoader=new MJP.Loader(!0,!0),this.imgLoader.buildEvt(this.imgLoader.EVENT.PROGRESS,e.bind(this)),this.imgLoader.buildEvt(this.imgLoader.EVENT.FILE_LOAD,i.bind(this)),this.imgLoader.buildEvt(this.imgLoader.EVENT.COMPLETE,r.bind(this)),this.imgLoader.startLoad(this.aImg)};var e=function(t){var e=Math.round(100*t.loaded);TweenLite.to(MJP.Main.$.progress,1,{width:e+"%",ease:Expo.easeOut})},i=function(){},r=function(){this.dispatch(this.EVENT.INIT),this.imgLoader.destroyEvt(this.imgLoader.EVENT.PROGRESS,e.bind(this)),this.imgLoader.destroyEvt(this.imgLoader.EVENT.FILE_LOAD,i.bind(this)),this.imgLoader.destroyEvt(this.imgLoader.EVENT.COMPLETE,r.bind(this)),this.imgLoader.destroy(),this.imgLoader=null};return new t}(window),MJP.Loader=function(){function t(t,e){MJP.EventDispatcher.call(this),this.p={},this.EVENT={STARTED:"started",FILE_LOAD:"fileload",COMPLETE:"complete",ERROR:"error",SHOWN:"shown",HIDDEN:"hidden"},this.isFileLoadOpt=t,this.isOnProgress=e,this.queue=new createjs.LoadQueue(!0,MJP.Config.WEB_ROOT),this.bindEvents()}return t.prototype=Object.create(MJP.EventDispatcher.prototype),t.prototype.constructor=t,t.prototype.bindEvents=function(){this.p.onLoadStart=$.proxy(this.onLoadStart,this),this.queue.addEventListener("loadstart",this.p.onLoadStart),this.p.onProgress=$.proxy(this.onProgress,this),this.queue.addEventListener("progress",this.p.onProgress),this.p.onFileLoad=$.proxy(this.onFileLoad,this),this.queue.addEventListener("fileload",this.p.onFileLoad),this.p.onComplete=$.proxy(this.onComplete,this),this.queue.addEventListener("complete",this.p.onComplete),this.p.onError=$.proxy(this.onError,this),this.queue.addEventListener("error",this.p.onError)},t.prototype.unbindEvents=function(){this.queue.removeAllEventListeners(),this.p={}},t.prototype.startLoad=function(t){this.queue.loadManifest(t)},t.prototype.onLoadStart=function(){},t.prototype.onProgress=function(t){this.isOnProgress&&this.dispatch(this.EVENT.PROGRESS,t)},t.prototype.onFileLoad=function(t){this.isFileLoadOpt&&this.dispatch(this.EVENT.FILE_LOAD,t)},t.prototype.onComplete=function(){this.dispatch(this.EVENT.COMPLETE)},t.prototype.onError=function(){this.dispatch(this.EVENT.ERROR)},t.prototype.close=function(){this.queue.close()},t.prototype.destroy=function(){this.unbindEvents(),this.queue=null},t}(window),MJP.Utils=MJP.Utils||{},MJP.Utils.Global=function(){this.color={black:"000000",white:"ffffff",gray:"cdcdcd",grayLight:"f2f0f3",green:"99D7C4",blue:"99C2D7",yellow:"F7D930",yellowLight:"F4EFB1",salmon:"F5A494"},this.addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},this.removeClass=function(t,e){if(t.classList)t.classList.remove(e);else{t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi"),"");var i=t.className.length-1;" "==t.className[i]&&(t.className=t.className.substring(0,i))}},this.hasClass=function(t){var e=!1;return t.className.indexOf("hidden")>=0&&(e=!0),e},this.resetStyle=function(t){t.style.cssText=""},this.getImageSize=function(t,e,i,r){var s=t/e,n=i/r,a={x:0,y:0,w:0,h:0};return n>s?(a.w=i,a.h=Math.round(a.w/s),a.y=Math.round(-(a.h-r)/2)):(a.h=r,a.w=Math.round(a.h*s),a.x=Math.round(-(a.w-i)/2)),a},this.degToRad=function(t){return t*Math.PI/180},this.getSupportedPropertyName=function(t){for(var e=["","ms","Webkit","Moz","O"],i=0;i<e.length;i++){var r=e[i];t=""===r?t:t.charAt(0).toUpperCase()+t.substring(1).toLowerCase();var s=r+t;if("undefined"!=typeof document.body.style[s])return s}return null},this.initMailto=function(t){var e="mailto",i=":",r="contact",s="@",n="mathildejacon",a=".",o="com";t.href=e+i+r+s+n+a+o}}(window),MJP.View=function(){function t(){MJP.EventDispatcher.call(this),this.$={},this.p={},this.v={}}return t.prototype=Object.create(MJP.EventDispatcher.prototype),t.prototype.constructor=t,t.prototype.init=function(){this.initElt(),this.bindEvents()},t.prototype.initElt=function(){},t.prototype.bindEvents=function(){},t.prototype.changePage=function(t,e){var i;null===t?i=MJP.Config.WEB_ROOT+e:(t.preventDefault(),i=t.currentTarget.href),MJP.RoutesManager.goToPage(i)},t}(window),MJP.ViewStatic=function(){function t(){MJP.View.call(this)}return t.prototype=Object.create(MJP.View.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){},t.prototype.bindEvents=function(){},t}(window),MJP.ViewArcMenu=function(){function t(){MJP.ViewStatic.call(this),this.isVisible=!0,this.isOver=!1,this.isOpen=!1,this.wasOpen=!1}return t.prototype=Object.create(MJP.ViewStatic.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){},t.prototype.resize=function(){},t.prototype.enableInteractivity=function(){"other-btn"==this.type?(this.arc.interactive=!0,this.arc.buttonMode=!0):(this.mask.interactive=!0,this.mask.buttonMode=!0,this.setHitArea())},t.prototype.disableInteractivity=function(){"other-btn"==this.type?(this.arc.interactive=!1,this.arc.buttonMode=!1):(this.mask.interactive=!1,this.mask.buttonMode=!1,this.setHitArea())},t.prototype.manageVisibility=function(t){this.isVisible=t},t.prototype.setInvisible=function(){"project-btn"==this.type?this.img.visible=!1:"color"==this.type&&(this.circle.visible=!1),this.mask.visible=!1,this.outline.visible=!1},t.prototype.setVisible=function(){"project-btn"==this.type?this.img.visible=!0:"color"==this.type&&(this.circle.visible=!0),this.mask.visible=!0,this.outline.visible=!0},t.prototype.reset=function(t){this.radiusOutO=t,this.radiusInO=this.radiusOutO-50,MJP.Views.Static.MenuCircle.isProjectOpen&&"other-btn"!=this.type?(this.radiusOut=50,this.radiusIn=0):(this.radiusOut=this.radiusOutO,this.radiusIn=this.radiusInO),this.radiusOutO>=MJP.Views.Static.MenuCircle.RADIUS_MIN&&"other-btn"!==this.type?(this.manageVisibility(!0),MJP.Views.Static.MenuCircle.isProjectOpen||(this.setVisible(),"project-btn"==this.type&&this.enableInteractivity())):"other-btn"!==this.type&&(this.manageVisibility(!1),MJP.Views.Static.MenuCircle.isProjectOpen||(this.setInvisible(),"project-btn"==this.type&&this.disableInteractivity()))},t.prototype.draw=function(){this.drawMask(),this.drawOutline(),"project-btn"==this.type&&this.drawMaskImgCircle()},t.prototype.drawMask=function(){var t=this.radiusOut*Math.cos(this.startAngle*Math.PI/180),e=this.radiusOut*Math.sin(this.startAngle*Math.PI/180),i=this.radiusIn*Math.cos(this.endAngle*Math.PI/180),r=this.radiusIn*Math.sin(this.endAngle*Math.PI/180),s=this.radiusIn*Math.cos(this.startAngle*Math.PI/180),n=this.radiusIn*Math.sin(this.startAngle*Math.PI/180);this.mask.clear(),this.mask.beginFill(),this.mask.moveTo(t,e),this.mask.arc(0,0,this.radiusOut,this.startAngle*Math.PI/180,this.endAngle*Math.PI/180,!1),this.mask.lineTo(i,r),this.mask.arc(0,0,this.radiusIn,this.endAngle*Math.PI/180,this.startAngle*Math.PI/180,!0),this.mask.lineTo(s,n),this.mask.endFill()},t.prototype.drawOutline=function(){var t,e,i=this.radiusOut*Math.cos(this.startAngle*Math.PI/180),r=this.radiusOut*Math.sin(this.startAngle*Math.PI/180);this.outline.clear(),this.outline.lineStyle(6,"0x"+color.grayLight,1),this.outline.moveTo(i,r);for(var s=1;s<=this.angle;s+=1)t=this.radiusOut*Math.cos((this.startAngle+s)*Math.PI/180),e=this.radiusOut*Math.sin((this.startAngle+s)*Math.PI/180),this.outline.lineTo(t,e);if(360!=this.angle)for(s=this.angle;s>=0;s-=1)t=this.radiusIn*Math.cos((this.startAngle+s)*Math.PI/180),e=this.radiusIn*Math.sin((this.startAngle+s)*Math.PI/180),this.outline.lineTo(t,e);this.outline.lineTo(i,r),this.outline.endFill()},t.prototype.setOpacity=function(t){"project-btn"==this.type?TweenLite.to(this.img,.8,{alpha:t,ease:Quad.easeOut}):TweenLite.to(this.circle,.8,{alpha:t,ease:Quad.easeOut})},t.prototype.show=function(t,e,i){if("other-btn"==this.type)TweenLite.to(this.container,t,{alpha:1,ease:Quad.easeOut,delay:e}),TweenLite.to(this.container,t,{rotation:degToRad(0),ease:Back.easeOut,delay:e,onComplete:function(){this.enableInteractivity(),this.wasOpen&&this.setNotWasOpen(),"more-projects-btn"==this.name&&i?MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.INIT):"more-projects-btn"!=this.name||i||MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.SHOWN),MJP.Views.Static.Header.showBgLine()}.bind(this)});else{if("center-circle"!=this.name){var r=i?0:500;setTimeout(function(){this.setVisible()}.bind(this),r),TweenLite.to(this,t,{radiusIn:this.radiusInO,ease:Back.easeOut,delay:e})}TweenLite.to(this,t,{radiusOut:this.radiusOutO,ease:Back.easeOut,delay:e,onComplete:function(){"project-btn"==this.type&&this.enableInteractivity()}.bind(this)})}},t.prototype.hide=function(t,e,i){var r="center-circle"==this.name?0:50;"other-btn"==this.type?(this.disableInteractivity(),TweenLite.to(this.container,t,{alpha:0,ease:Quad.easeIn}),TweenLite.to(this.container,t,{rotation:degToRad(-180),ease:Back.easeIn})):("project-btn"==this.type&&this.disableInteractivity(),"center-circle"!=this.name&&TweenLite.to(this,t,{radiusIn:0,ease:Back.easeIn,delay:e}),TweenLite.to(this,t,{radiusOut:r,ease:Back.easeIn,delay:e,onComplete:function(){"center-circle"==this.name||this.isOpen?this.isOpen&&this.setBgMode():this.setInvisible(),"center-circle"!=this.name||i||MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.HIDDEN)}.bind(this)}))},t.prototype.showFullBg=function(t,e){(!this.isVisible||t&&"project-btn"==this.type||e&&"project-btn"==this.type)&&(this.setVisible(),this.setBgMode());var i=this.getTweenInfosMask();"about-btn"==this.name?TweenLite.to(this,i.duration,{bgRadiusOut:i.radius,ease:Quart.easeOut}):(TweenLite.to(this,i.duration,{radiusOut:i.radius,ease:Quart.easeOut}),this.showImgCircle(t,i.duration)),TweenLite.to(this.img,i.duration,{alpha:.1,ease:Quart.easeOut,onComplete:function(){"about-btn"==this.name&&t?MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.INIT):"about-btn"!=this.name||t||MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.SHOWN)}.bind(this)}),MJP.Views.Static.MenuCircle.menuCoverCircle.setInvisible()},t.prototype.hideFullBg=function(){this.setClosed();var t=this.getTweenInfosMask(),e=0;"about-btn"==this.name?TweenLite.to(this,t.duration,{bgRadiusOut:0,ease:Quart.easeIn}):(e=t.duration/4,TweenLite.to(this,t.duration,{radiusOut:0,ease:Quart.easeIn}),this.hideImgCircle(t.duration)),TweenLite.to(this.img,t.duration,{alpha:1,ease:Quart.easeIn,delay:e,onComplete:function(){"project-btn"==this.name&&(this.radiusOut=50),MJP.Views.Static.MenuCircle.menuCoverCircle.setVisible(),MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.HIDDEN)}.bind(this)})},t.prototype.setBgMode=function(){this.outline.visible=!1,this.radiusIn=0,this.radiusOut=0,this.startAngle=0,this.endAngle=360},t.prototype.setBtnMode=function(t){this.setNotWasOpen(),setTimeout(function(){0!==t&&(this.outline.visible=!0),this.radiusOut=50,this.startAngle=this.startAngleO,this.endAngle=this.endAngleO,this.isVisible||this.setInvisible()}.bind(this),t)},t.prototype.getTweenInfosMask=function(){var t={radius:null,duration:null};return t.radius=Math.round(Math.sqrt(MJP.Main.windowW/2*MJP.Main.windowW/2+MJP.Main.windowH/2*MJP.Main.windowH/2)+50),t.duration=Math.round(t.radius/100)/10*1.5,t},t.prototype.setOpened=function(t){MJP.Views.Static.MenuCircle.isProjectOpen=!0,this.isOpen=!0,t&&this.forceMenuLeft()},t.prototype.setClosed=function(){MJP.Views.Static.MenuCircle.isProjectOpen=!1,this.isOpen=!1,this.wasOpen=!0},t.prototype.setNotOver=function(){this.isOver=!1},t.prototype.setNotWasOpen=function(){this.wasOpen=!1},t}(window),MJP.ViewPartial=function(){function t(){MJP.View.call(this)}return t.prototype=Object.create(MJP.View.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){},t.prototype.bindEvents=function(){},t.prototype.unbindEvents=function(){},t.prototype.killTweens=function(){},t.prototype.destroy=function(){this.unbindEvents(),this.killTweens(),this.$={},this.v={}},t}(window),MJP.ViewPage=function(t){function e(){MJP.View.call(this),this.tl={},this.EVENT={LOADED:"loaded",INIT:"init",SHOWN:"shown",HIDDEN:"hidden"}}return e.prototype=Object.create(MJP.View.prototype),e.prototype.constructor=e,e.prototype.load=function(t,e,i){this.v.isAjaxLoaded=!1,this.v.isTransitionHideEnded=!1;var r=t.replace(e,i),s=MJP.Config.WEB_ROOT+"content-desktop/"+r;$.ajax({context:this,url:s,type:"POST",data:{ajax:r},dataType:"html",success:this.loaded,error:this.error})},e.prototype.loaded=function(t){this.v.data=t,this.v.isAjaxLoaded=!0,this.checkInit()},e.prototype.error=function(){t.location.href=MJP.Config.WEB_ROOT+MJP.RoutesManager.pageUrl},e.prototype.transitionEnded=function(){this.v.isTransitionHideEnded=!0,this.checkInit()},e.prototype.checkInit=function(){this.v.isAjaxLoaded&&this.v.isTransitionHideEnded&&(MJP.RoutesManager.updateGA(),MJP.Main.$.pageContainer[0].innerHTML=this.v.data,this.v.data=null,this.v.isAjaxLoaded=!1,this.v.isTransitionHideEnded=!1,this.init(),this.show())},e.prototype.initElt=function(){},e.prototype.bindEvents=function(){},e.prototype.unbindEvents=function(){},e.prototype.killTweens=function(){for(var t in this.tl){var e=this.tl[t];e.stop(),e.kill(),e.clear()}this.tl={}},e.prototype.destroy=function(){this.unbindEvents(),this.killTweens(),this.$={},this.v={}},e.prototype.show=function(){MJP.Views.Static.MenuCircle.manageTransition.call(MJP.Views.Static.MenuCircle,"show",MJP.RoutesManager.currentPage.name,MJP.RoutesManager.nextPage.name)},e.prototype.hideContent=function(){this.hide()},e.prototype.hide=function(){MJP.Views.Static.MenuCircle.manageTransition.call(MJP.Views.Static.MenuCircle,"hide",MJP.RoutesManager.currentPage.name,MJP.RoutesManager.nextPage.name),this.destroy()},e.prototype.showLoader=function(){removeClass(MJP.Main.$.loader[0],"hide")},e.prototype.hidePreloader=function(){TweenLite.to(MJP.Main.$.loader,1,{opacity:0,scale:1.5,ease:Quart.easeOut,delay:.5,onComplete:function(){MJP.Main.$.percentageWrapper[0].innerHTML="",resetStyle(MJP.Main.$.loader[0]),MJP.Views.Static.MenuCircle.initIntro(MJP.RoutesManager.currentPage)}})},e.prototype.hideLoader=function(){addClass(MJP.Main.$.loader[0],"hide")},e}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.Header=function(){function t(){MJP.ViewStatic.call(this)}return t.prototype=Object.create(MJP.ViewStatic.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.$.header=$(document.getElementById("header")),this.$.bgLineWrapper=$(document.getElementById("bg-line-wrapper")),this.$.bgLineLeft=this.$.header.find(".bg-line-left"),this.$.bgLineRight=this.$.header.find(".bg-line-right"),this.$.menuCenter=$(document.getElementById("menu-center"))},t.prototype.bindEvents=function(){},t.prototype.resize=function(){var t=-MJP.Views.Static.MenuCircle.radiusMax;this.$.bgLineLeft[0].style.left=t+"px",this.$.bgLineRight[0].style.right=t+"px"},t.prototype.showCenter=function(){MJP.Config.HAS_CSS_TRANSITIONS||TweenLite.fromTo(this.$.menuCenter,.5,{opacity:0,scale:0},{opacity:1,scale:1,ease:Back.easeOut}),this.$.menuCenter[0].className=""},t.prototype.hideCenter=function(t){MJP.Config.HAS_CSS_TRANSITIONS||TweenLite.to(this.$.menuCenter,.5,{opacity:0,scale:0,delay:t,ease:Back.easeIn}),setTimeout(function(){addClass(this.$.menuCenter[0],"scale")}.bind(this),1e3*t)},t.prototype.showBgLine=function(){removeClass(this.$.bgLineWrapper[0],"hidden")},t.prototype.hideBgLine=function(){addClass(this.$.bgLineWrapper[0],"hidden")},new t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.Footer=function(){function t(){MJP.ViewStatic.call(this)}return t.prototype=Object.create(MJP.ViewStatic.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.$.footer=$(document.getElementById("footer"))},t.prototype.bindEvents=function(){},new t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.MenuCircle=function(){function t(){MJP.ViewStatic.call(this),this.RADIUS_MIN=175,this.radiusMax=null,this.prevRadiusMax=null,this.aArcMenu=[],this.aArcActiveMenu=[],this.isProjectOpen=!1
}t.prototype=Object.create(MJP.ViewStatic.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.aProjects=MJP.Model.Global.json.projects,h.call(this),this.prevRadiusMax=this.radiusMax,r.call(this),s.call(this),TweenLite.ticker.addEventListener("tick",i,this)},t.prototype.bindEvents=function(){},t.prototype.initIntro=function(t){var i,r,s=t.name;if("home"==s)n.call(this,!0),t.init();else if("about"==s){for(e.call(this),this.aboutBtn.setOpened(!1),i=this.aArcMenu.length-1;i>=0;i--)r=this.aArcMenu[i],r.setInvisible();setTimeout(function(){this.aboutBtn.showFullBg(!0,!1),t.init()}.bind(this),3500)}else if("project"==s){e.call(this);var a;for(i=this.aArcMenu.length-1;i>=0;i--)r=this.aArcMenu[i],r.url==MJP.RoutesManager.pageUrl?(r.setOpened(!1),a=r):r.setInvisible();setTimeout(function(){a.showFullBg(!0,!1),t.init()}.bind(this),3500)}},t.prototype.manageOpacity=function(){for(var t=0,e=0;e<this.aArcActiveMenu.length;e++){var i=this.aArcActiveMenu[e];i.isOver?(t++,i.setOpacity(1,"over")):i.setOpacity(.3,"out")}if(0===t)for(e=0;e<this.aArcActiveMenu.length;e++)this.aArcActiveMenu[e].setOpacity(1,"all-out")},t.prototype.manageTransition=function(t,e){var i;if("show"==t&&"home"==e&&n.call(this,!1),"hide"==t&&"home"==e)a.call(this);else if("show"==t&&"about"==e)this.aboutBtn.showFullBg(!1,!1);else if("hide"==t&&"about"==e)this.aboutBtn.hideFullBg();else if("show"==t&&"project"==e)for(i=0;i<this.aArcMenu.length;i++){var r=this.aArcMenu[i];r.wasOpen&&(r.setBtnMode(0),r.setInvisible()),r.url!=MJP.RoutesManager.pageUrl||r.isOpen||r.setOpened(!1),r.isOpen&&r.showFullBg(!1,!0)}else if("hide"==t&&"project"==e)for(i=0;i<this.aArcMenu.length;i++)this.aArcMenu[i].isOpen&&this.aArcMenu[i].hideFullBg()},t.prototype.resize=function(){h.call(this),this.radiusMax!=this.prevRadiusMax&&o.call(this);for(var t=0;t<this.aArcMenu.length;t++)this.aArcMenu[t].resize();this.aboutBtn.resize(),this.moreProjectsBtn.resize(),this.menuCoverCircle.resize(),this.centerCircle.resize(),this.renderer.resize(MJP.Main.windowW,MJP.Main.windowH)};var e=function(){this.centerCircle.show(.5,0,!0),MJP.Views.Static.Header.showCenter(),this.centerCircle.hide(.5,3,!0),MJP.Views.Static.Header.hideCenter(3)},i=function(){MJP.Config.LOCALHOST&&!MJP.Config.PROD&&MJP.Main.stats.begin();for(var t=0;t<this.aArcMenu.length;t++)this.aArcMenu[t].draw();this.aboutBtn.draw(),this.moreProjectsBtn.draw(),this.centerCircle.draw(),this.renderer.render(this.stage),MJP.Config.LOCALHOST&&!MJP.Config.PROD&&MJP.Main.stats.end()},r=function(){this.stage=new PIXI.Stage(16777215),this.renderer=new PIXI.CanvasRenderer(MJP.Main.windowW,MJP.Main.windowH,null,!0),document.getElementById("menu-circle").appendChild(this.renderer.view)},s=function(){for(var t,e,i,r=this.radiusMax,s=0;s<this.aProjects.length;s++)t=this.aProjects[s],e!=t.groupId&&(e=t.groupId,0!==s&&(r-=50)),2==s&&(this.aboutBtn=new MJP.Views.Static.MenuOtherBtn(this.stage,"about-btn","other-btn",r+50,179.6,10),this.moreProjectsBtn=new MJP.Views.Static.MenuOtherBtn(this.stage,"more-projects-btn","other-btn",r+50,-.4,10)),i=null!==t.img?new MJP.Views.Static.MenuProjectBtn(this.stage,t.id,"project-btn",e,r,t.startAngle,t.angle,t.imgName,t.infos.url):new MJP.Views.Static.MenuArcColor(this.stage,t.id,"color",e,r,t.startAngle,t.angle,t.color),this.aArcMenu.push(i),r>=this.RADIUS_MIN?this.aArcActiveMenu.push(i):(i.manageVisibility(!1),i.setInvisible());this.menuCoverCircle=new MJP.Views.Static.MenuCoverCircle(this.stage,"menu-cover-circle"),this.centerCircle=new MJP.Views.Static.MenuCenterCircle(this.stage,"center-circle"),this.resize()},n=function(t){var e,i=475,r=1,s=0;this.centerCircle.show(.5,s,t),MJP.Views.Static.Header.showCenter(),s=t?1.8:.4;for(var n=this.aArcMenu.length-1;n>=0;n--)e=this.aArcMenu[n],e.wasOpen&&e.setBtnMode(300);for(n=0;n<this.aArcActiveMenu.length;n++)e=this.aArcActiveMenu[n],i!=e.radiusOutO&&(s+=.2),e.show(r,s,t),i=e.radiusOutO;this.aboutBtn.show(r,s,t),this.moreProjectsBtn.show(r,s,t)},a=function(){var t,e=this.RADIUS_MIN,i=1,r=0;MJP.Views.Static.Header.hideBgLine();for(var s=this.aArcMenu.length-1;s>=0;s--)t=this.aArcMenu[s],t.url==MJP.RoutesManager.pageUrl&&t.setOpened(!0);for(s=this.aArcActiveMenu.length-1;s>=0;s--)t=this.aArcActiveMenu[s],e!=t.radiusOutO&&(r+=.2),t.hide(i,r,!1),e=t.radiusOutO;this.aboutBtn.url==MJP.RoutesManager.pageUrl&&this.aboutBtn.setOpened(!0),this.aboutBtn.hide(i,r,!1),this.moreProjectsBtn.hide(i,r,!1),r+=.6,this.centerCircle.hide(.5,r,!1),MJP.Views.Static.Header.hideCenter(r,!1)},o=function(){this.prevRadiusMax=this.radiusMax,this.aArcActiveMenu=[];for(var t,e,i=this.radiusMax,r=0;r<this.aArcMenu.length;r++)t=this.aArcMenu[r],e!=t.groupId&&(e=t.groupId,0!==r&&(i-=50)),t.reset(i),i>=this.RADIUS_MIN&&this.aArcActiveMenu.push(t);this.aboutBtn.reset(this.radiusMax),this.moreProjectsBtn.reset(this.radiusMax)},h=function(){var t=MJP.Main.windowW<MJP.Main.windowH?MJP.Main.windowW:MJP.Main.windowH;this.radiusMax=t>=850?425:t>=750?375:t>=650?325:275};return new t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.MenuArcColor=function(){function t(t,e,i,r,s,n,a,o){MJP.ViewArcMenu.call(this),this.stage=t,this.name=e,this.type=i,this.groupId=r,this.radiusOutO=s,this.radiusOut=50,this.radiusInO=this.radiusOutO-50,this.radiusIn=0,this.startAngle=n,this.angle=a,this.endAngle=this.startAngle+this.angle,this.color=o,this.init()}return t.prototype=Object.create(MJP.ViewArcMenu.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.circle=new PIXI.Graphics,this.circle.beginFill("0x"+this.color),this.circle.drawCircle(0,0,475),this.circle.endFill(),this.stage.addChild(this.circle),this.mask=new PIXI.Graphics,this.circle.mask=this.mask,this.stage.addChild(this.mask),this.outline=new PIXI.Graphics,this.stage.addChild(this.outline)},t.prototype.resize=function(){var t=Math.round(MJP.Main.windowW/2),e=Math.round(MJP.Main.windowH/2);this.circle.x=t,this.circle.y=e,this.mask.x=t,this.mask.y=e,this.outline.x=t,this.outline.y=e},t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.MenuProjectBtn=function(){function t(t,e,i,r,s,n,a,o,h){MJP.ViewArcMenu.call(this),this.stage=t,this.name=e,this.type=i,this.groupId=r,this.radiusOutO=s,this.radiusOut=50,this.radiusInO=this.radiusOutO-50,this.radiusIn=0,this.startAngleO=this.startAngle=n,this.angleO=this.angle=a,this.endAngleO=this.endAngle=this.startAngle+this.angle,this.radiusImgCircle=0,this.imgName=o,this.url=h,this.COEFF_RADIUS_IMG_CIRCLE=6,this.COEFF_MASK_IMG_CIRCLE_START_X=4,this.COEFF_MASK_IMG_CIRCLE_START_Y=8,this.COEFF_MASK_IMG_CIRCLE_END_X=18,this.COEFF_MASK_IMG_CIRCLE_END_Y=4,this.init()}t.prototype=Object.create(MJP.ViewArcMenu.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.imgTx=PIXI.Texture.fromImage(MJP.Config.WEB_ROOT+"img/projects/bgs/"+this.imgName+".jpg"),this.img=new PIXI.Sprite(this.imgTx),this.stage.addChild(this.img),this.imgCircle=new PIXI.Sprite(this.imgTx),this.imgCircle.alpha=.3,this.stage.addChild(this.imgCircle),this.mask=new PIXI.Graphics,this.img.mask=this.mask,this.setHitArea(),"desktop"==MJP.Config.DEVICE?(this.mask.mouseover=e.bind(this),this.mask.mouseout=i.bind(this),this.mask.click=r.bind(this)):this.mask.tap=r.bind(this),this.stage.addChild(this.mask),this.maskImgCircle=new PIXI.Graphics,this.imgCircle.mask=this.maskImgCircle,this.stage.addChild(this.maskImgCircle),this.outline=new PIXI.Graphics,this.stage.addChild(this.outline)},t.prototype.resize=function(){var t=Math.round(MJP.Main.windowW/2),e=Math.round(MJP.Main.windowH/2),i=getImageSize(1920,1050,MJP.Main.windowW,MJP.Main.windowH);if(this.img.x=this.imgCircle.x=i.x,this.img.y=this.imgCircle.y=i.y,this.img.width=this.imgCircle.width=i.w,this.img.height=this.imgCircle.height=i.h,this.mask.x=t,this.mask.y=e,this.outline.x=t,this.outline.y=e,this.isOpen){var r=this.getTweenInfosMask();this.radiusOut=r.radius,this.radiusImgCircle=MJP.Main.windowW/this.COEFF_RADIUS_IMG_CIRCLE,this.maskImgCircle.x=t-MJP.Main.windowW/this.COEFF_MASK_IMG_CIRCLE_END_X,this.maskImgCircle.y=MJP.Main.windowH-(this.radiusImgCircle-this.radiusImgCircle/this.COEFF_MASK_IMG_CIRCLE_END_Y)}},t.prototype.setHitArea=function(){for(var t,e,i=new PIXI.Polygon,r=this.radiusOutO*Math.cos(degToRad(this.startAngle)),s=this.radiusOutO*Math.sin(degToRad(this.startAngle)),n=(this.radiusInO*Math.cos(degToRad(this.startAngle)),this.radiusInO*Math.sin(degToRad(this.startAngle)),0);n<=this.angle;n+=1)t=this.radiusOutO*Math.cos(degToRad(this.startAngle+n)),e=this.radiusOutO*Math.sin(degToRad(this.startAngle+n)),i.points.push(new PIXI.Point(t,e));if(360!=this.angle)for(n=this.angle;n>=0;n-=1)t=this.radiusInO*Math.cos(degToRad(this.startAngle+n)),e=this.radiusInO*Math.sin(degToRad(this.startAngle+n)),i.points.push(new PIXI.Point(t,e));i.points.push(new PIXI.Point(r,s)),this.mask.hitArea=i},t.prototype.drawMaskImgCircle=function(){var t,e,i=this.radiusImgCircle*Math.cos(0*Math.PI/180),r=this.radiusImgCircle*Math.sin(0*Math.PI/180);this.maskImgCircle.clear(),this.maskImgCircle.lineStyle(0,"0xffffff",1),this.maskImgCircle.beginFill("0xffffff"),this.maskImgCircle.moveTo(i,r);for(var s=1;360>=s;s+=1)t=this.radiusImgCircle*Math.cos((0+s)*Math.PI/180),e=this.radiusImgCircle*Math.sin((0+s)*Math.PI/180),this.maskImgCircle.lineTo(t,e);this.maskImgCircle.lineTo(i,r),this.maskImgCircle.endFill()},t.prototype.showImgCircle=function(t,e){var i=MJP.Main.windowW/this.COEFF_RADIUS_IMG_CIRCLE,r=Math.round(MJP.Main.windowW/2),s=Math.round(MJP.Main.windowH/2),n=r+MJP.Main.windowW/this.COEFF_MASK_IMG_CIRCLE_START_X,a=s-MJP.Main.windowH/this.COEFF_MASK_IMG_CIRCLE_START_Y,o=r-MJP.Main.windowW/this.COEFF_MASK_IMG_CIRCLE_END_X,h=MJP.Main.windowH-(i-i/this.COEFF_MASK_IMG_CIRCLE_END_Y);this.maskImgCircle.x=n,this.maskImgCircle.y=a,TweenLite.to(this,2*e,{radiusImgCircle:i,ease:Expo.easeOut,delay:e/4}),TweenLite.to(this.maskImgCircle,2*e,{x:o,ease:Back.easeOut,delay:e/4}),TweenLite.to(this.maskImgCircle,2*e,{y:h,ease:Quart.easeInOut,delay:e/4,onComplete:function(){t?MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.INIT):MJP.RoutesManager.currentPage.dispatch(MJP.RoutesManager.currentPage.EVENT.SHOWN)}})},t.prototype.hideImgCircle=function(t){var e=Math.round(MJP.Main.windowW/2),i=Math.round(MJP.Main.windowH/2),r=e+MJP.Main.windowW/this.COEFF_MASK_IMG_CIRCLE_START_X,s=i-MJP.Main.windowH/this.COEFF_MASK_IMG_CIRCLE_START_Y;TweenLite.to(this,t,{radiusImgCircle:0,ease:Expo.easeInOut}),TweenLite.to(this.maskImgCircle,t,{x:r,ease:Back.easeOut}),TweenLite.to(this.maskImgCircle,t,{y:s,ease:Quart.easeInOut})},t.prototype.forceMenuLeft=function(){i.call(this)};var e=function(){this.isOver=!0,MJP.Views.Page.Home.showTitle(this.name),MJP.Views.Static.MenuCircle.manageOpacity.call(MJP.Views.Static.MenuCircle)},i=function(){this.isOver=!1,MJP.Views.Page.Home.hideTitle(this.name),MJP.Views.Static.MenuCircle.manageOpacity.call(MJP.Views.Static.MenuCircle)},r=function(){this.changePage(null,this.url)};return t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.MenuOtherBtn=function(){function t(t,e,i,r,s,n){MJP.ViewArcMenu.call(this),this.stage=t,this.name=e,this.type=i,this.radiusOut=r,this.radiusIn=this.radiusOut-50,this.startAngle=s,this.angle=n,"about-btn"==this.name&&(this.bgRadiusOut=0,this.imgName="about_bg.jpg",this.url="a-propos"),this.init()}t.prototype=Object.create(MJP.ViewArcMenu.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.polygon=new PIXI.Polygon,this.container=new PIXI.DisplayObjectContainer,this.container.alpha=0,this.container.rotation=degToRad(-180),this.stage.addChild(this.container),this.arc=new PIXI.Graphics,this.arc.x=0,this.arc.y=0,this.arc.hitArea=this.polygon,"desktop"==MJP.Config.DEVICE?(this.arc.mouseover=i.bind(this),this.arc.mouseout=r.bind(this),this.arc.click=s.bind(this)):this.arc.tap=s.bind(this),this.container.addChild(this.arc),"about-btn"==this.name?(this.mLogo=new PIXI.DisplayObjectContainer,this.line=new PIXI.Graphics,this.line.x=0,this.line.y=0,this.line.lineStyle(2,"0x"+color.salmon,.8),this.line.moveTo(-8,9),this.line.lineTo(8,9),this.line.endFill(),this.mLogo.addChild(this.line),this.iconTx=PIXI.Texture.fromImage(MJP.Config.WEB_ROOT+"img/btns/mathilde_jacon_about.png"),this.icon=new PIXI.Sprite(this.iconTx),this.icon.x=-8,this.icon.y=-8,this.mLogo.addChild(this.icon),this.container.addChild(this.mLogo),this.imgTx=PIXI.Texture.fromImage(MJP.Config.WEB_ROOT+"img/others/"+this.imgName),this.img=new PIXI.Sprite(this.imgTx),this.stage.addChild(this.img),this.mask=new PIXI.Graphics,this.img.mask=this.mask,this.stage.addChild(this.mask)):"more-projects-btn"==this.name&&(this.plusTx=PIXI.Texture.fromImage(MJP.Config.WEB_ROOT+"img/btns/plus_more_project.png"),this.plus=new PIXI.Sprite(this.plusTx),this.plus.anchor.x=.5,this.plus.anchor.y=.5,this.container.addChild(this.plus)),this.outline=new PIXI.Graphics,this.outline.x=0,this.outline.y=0,this.container.addChild(this.outline),this.draw()},t.prototype.resize=function(){this.draw();var t=Math.round(MJP.Main.windowW/2),e=Math.round(MJP.Main.windowH/2);this.container.x=t,this.container.y=e;var i="about-btn"==this.name?this.mLogo:this.plus;if(i.x=Math.round((this.radiusIn+25)*Math.cos(degToRad(this.startAngle+Math.round(this.angle/2)))),i.y=Math.round((this.radiusIn+25)*Math.sin(degToRad(this.startAngle+Math.round(this.angle/2)))),"about-btn"==this.name){var r=getImageSize(1920,1050,MJP.Main.windowW,MJP.Main.windowH);this.img.x=r.x,this.img.y=r.y,this.img.width=r.w,this.img.height=r.h,this.mask.x=t,this.mask.y=e}if(this.isOpen){var s=this.getTweenInfosMask();this.bgRadiusOut=s.radius}},t.prototype.draw=function(){this.drawArc(),this.drawOutline(),"about-btn"==this.name&&(this.mask.clear(),this.mask.beginFill("0xffffff"),this.mask.drawCircle(0,0,this.bgRadiusOut),this.mask.endFill())},t.prototype.drawArc=function(){e.call(this),this.arc.clear(),this.arc.beginFill("0x"+color.white),this.arc.moveTo(this.polygon.points[0].x,this.polygon.points[0].y);for(var t=1;t<this.polygon.points.length;t++)this.arc.lineTo(this.polygon.points[t].x,this.polygon.points[t].y);this.arc.endFill()},t.prototype.drawOutline=function(){this.outline.clear(),this.outline.lineStyle(6,"0x"+color.grayLight,1),this.outline.moveTo(this.polygon.points[0].x,this.polygon.points[0].y);for(var t=1;t<this.polygon.points.length;t++)this.outline.lineTo(this.polygon.points[t].x,this.polygon.points[t].y);this.outline.endFill()},t.prototype.forceMenuLeft=function(){r.call(this)};var e=function(){this.polygon.points=[];for(var t,e,i=this.radiusOut*Math.cos(degToRad(this.startAngle)),r=this.radiusOut*Math.sin(degToRad(this.startAngle)),s=(this.radiusIn*Math.cos(degToRad(this.startAngle)),this.radiusIn*Math.sin(degToRad(this.startAngle)),0);s<=this.angle;s+=1)t=this.radiusOut*Math.cos(degToRad(this.startAngle+s)),e=this.radiusOut*Math.sin(degToRad(this.startAngle+s)),this.polygon.points.push(new PIXI.Point(t,e));for(s=this.angle;s>=0;s-=1)t=this.radiusIn*Math.cos(degToRad(this.startAngle+s)),e=this.radiusIn*Math.sin(degToRad(this.startAngle+s)),this.polygon.points.push(new PIXI.Point(t,e));this.polygon.points.push(new PIXI.Point(i,r))},i=function(){this.isOver=!0,MJP.Views.Page.Home.showTitle(this.name),"about-btn"==this.name?TweenLite.to(this.line.scale,.8,{x:0,ease:Quart.easeOut}):"more-projects-btn"==this.name&&TweenLite.to(this.plus,.8,{rotation:degToRad(180),ease:Back.easeOut})},r=function(){this.isOver=!1,MJP.Views.Page.Home.hideTitle(this.name),"about-btn"==this.name?TweenLite.to(this.line.scale,.8,{x:1,ease:Quart.easeOut}):"more-projects-btn"==this.name&&TweenLite.to(this.plus,.8,{rotation:degToRad(0),ease:Back.easeOut})},s=function(){"about-btn"==this.name?this.changePage(null,"a-propos"):"more-projects-btn"==this.name&&(r.call(this),MJP.Views.Page.Home.showProjectLink())};return t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.MenuCenterCircle=function(){function t(t,e){MJP.ViewArcMenu.call(this),this.stage=t,this.name=e,this.radiusOutO=125,this.radiusOut=0,this.init()}return t.prototype=Object.create(MJP.ViewArcMenu.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.circle=new PIXI.Graphics,this.circle.interactive=!0,this.circle.hitArea=new PIXI.Circle(0,0,this.radiusOutO+3),this.stage.addChild(this.circle)},t.prototype.resize=function(){var t=Math.round(MJP.Main.windowW/2),e=Math.round(MJP.Main.windowH/2);this.circle.x=t,this.circle.y=e},t.prototype.draw=function(){this.circle.clear(),this.circle.beginFill("0xffffff"),this.circle.lineStyle(6,"0xffffff",1),this.circle.drawCircle(0,0,this.radiusOut),this.circle.endFill()},t}(window),MJP.Views=MJP.Views||{},MJP.Views.Static=MJP.Views.Static||{},MJP.Views.Static.MenuCoverCircle=function(){function t(t,e){MJP.ViewStatic.call(this),this.stage=t,this.name=e,this.RADIUS_OUT=60,this.init()}return t.prototype=Object.create(MJP.ViewStatic.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.circle=new PIXI.Graphics,this.circle.beginFill("0x"+color.grayLight),this.circle.drawCircle(0,0,this.RADIUS_OUT),this.circle.endFill(),this.stage.addChild(this.circle)},t.prototype.resize=function(){var t=Math.round(MJP.Main.windowW/2),e=Math.round(MJP.Main.windowH/2);this.circle.x=t,this.circle.y=e},t.prototype.setInvisible=function(){this.circle.visible=!1},t.prototype.setVisible=function(){this.circle.visible=!0},t}(window),MJP.Views=MJP.Views||{},MJP.Views.Page=MJP.Views.Page||{},MJP.Views.Page.Home=function(){function t(){MJP.ViewPage.call(this),this.name="home",this.v.isLinksShown=!1,this.v.nbProjectsLink=null}t.prototype=Object.create(MJP.ViewPage.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.$.page=$(document.getElementById("page-content")),this.$.projectTitleCenterCont=$(document.getElementById("home-projects-title-center-container")),this.$.projectTitleCenter=this.$.projectTitleCenterCont.find(".home-project-title-center"),this.$.contactCenter=this.$.projectTitleCenterCont.find(".home-project-title-center-contact"),this.$.contactCenterLink=this.$.contactCenter.find(".home-project-title-center-contact-link"),this.$.projectsLinkWrapper=$(document.getElementById("home-projects-link-wrapper")),this.$.projectsLinkBg=this.$.projectsLinkWrapper.find(".home-projects-link-bg"),this.$.projectLink=this.$.projectsLinkWrapper.find(".home-project-link"),this.$.projectRealLink=this.$.projectLink.find(".home-project-real-link"),this.$.close=this.$.projectsLinkWrapper.find(".close"),this.$.projectsLinkCont=this.$.projectsLinkWrapper.find(".home-projects-link-container"),this.v.stoHoverMenu=null,initMailto(this.$.contactCenterLink[0]),this.resize()},t.prototype.bindEvents=function(){this.p.enterMenuCenter=$.proxy(this.showTitle.bind(this,"contact"),this),MJP.Views.Static.Header.$.menuCenter.on("mouseenter",this.p.enterMenuCenter),this.p.enterMenuCenter=$.proxy(this.showTitle.bind(this,"contact"),this),this.$.projectTitleCenter.on("mouseenter",this.p.enterMenuCenter),this.p.leaveContactCenter=$.proxy(this.hideTitle.bind(this,"contact"),this),this.$.contactCenter.on("mouseleave",this.p.leaveContactCenter),"desktop"==MJP.Config.DEVICE&&(this.p.enterProjectLink=$.proxy(e,this),this.$.projectLink.on("mouseenter",this.p.enterProjectLink),this.p.leaveProjectLink=$.proxy(i,this),this.$.projectLink.on("mouseleave",this.p.leaveProjectLink),this.p.mouseMoveProjectsLinkProxy=$.proxy(n,this),this.$.projectsLinkWrapper.on("mousemove",this.p.mouseMoveProjectsLinkProxy)),this.p.clickProjectLink=$.proxy(this.changePage,this),this.$.projectRealLink.on("click",this.p.clickProjectLink),this.p.clickClose=$.proxy(this.hideProjectLink,this),this.$.close.on("click",this.p.clickClose)},t.prototype.unbindEvents=function(){MJP.Views.Static.Header.$.menuCenter.off("mouseenter",this.p.enterMenuCenter),this.$.projectTitleCenter.off("mouseenter",this.p.enterMenuCenter),this.$.contactCenter.off("mouseleave",this.p.leaveContactCenter),"desktop"==MJP.Config.DEVICE&&(this.$.projectLink.off("mouseenter",this.p.enterProjectLink),this.$.projectLink.off("mouseleave",this.p.leaveProjectLink),this.$.projectsLinkWrapper.off("mousemove",this.p.mouseMoveProjectsLinkProxy)),this.$.projectRealLink.off("click",this.p.clickProjectLink),this.$.close.off("click",this.p.clickClose),this.p={},clearTimeout(this.v.stoShowPage),clearTimeout(this.v.stoShowClose),clearTimeout(this.v.stoHoverMenu)},t.prototype.resize=function(){r.call(this),this.v.isLinksShown&&s.call(this)},t.prototype.hideContent=function(){if(this.v.isLinksShown){this.hideProjectLink();var t=1e3*(.2*(this.v.nbProjectsLink-1)+1+.5);setTimeout(function(){this.hide()}.bind(this),t)}else this.hide()},t.prototype.showTitle=function(t){clearTimeout(this.v.stoHoverMenu),addClass(this.$.projectTitleCenterCont.find('.home-project-title-center[data-id="'+t+'"]')[0],"show"),addClass(MJP.Views.Static.Header.$.menuCenter[0],"hover"),addClass(MJP.Views.Static.Header.$.menuCenter[0],"hide")},t.prototype.hideTitle=function(t){removeClass(this.$.projectTitleCenterCont.find('.home-project-title-center[data-id="'+t+'"]')[0],"show");for(var e=MJP.Views.Static.MenuCircle.aArcMenu,i=!0,r=0;r<e.length;r++)if(e[r].isOver){i=!1;break}(MJP.Views.Static.MenuCircle.aboutBtn.isOver||MJP.Views.Static.MenuCircle.moreProjectsBtn.isOver)&&(i=!1),i&&(removeClass(MJP.Views.Static.Header.$.menuCenter[0],"hide"),this.v.stoHoverMenu=setTimeout(function(){removeClass(MJP.Views.Static.Header.$.menuCenter[0],"hover")}.bind(this),800))},t.prototype.showProjectLink=function(){if(this.v.isLinksShown)return!1;this.v.isLinksShown=!0,this.$.projectsLinkWrapper[0].style.display="block",s.call(this),this.v.stoShowPage=setTimeout(function(){removeClass(this.$.close[0],"hidden")}.bind(this),500),this.v.stoShowClose=setTimeout(function(){addClass(this.$.close[0],"shown")}.bind(this),800),this.tl.projectLink=new TimelineLite,this.tl.projectLink.to(this.$.projectsLinkBg,.5,{opacity:1,ease:Quad.easeOut});for(var t,e=1.5,i=0,r=0;r<this.$.projectLink.length;r++)t=this.$.projectLink[r],hasClass(t,"hidden")||(addClass(t,"initShown"),this.tl.projectLink.to(t,e,{x:0,opacity:1,ease:Quart.easeOut},"-="+i),this.tl.projectLink.to($(t).find(".home-project-link-line"),e,{x:"0%",scaleX:1,ease:Quart.easeOut},"-="+e),i=e-.2)},t.prototype.hideProjectLink=function(){if(!this.v.isLinksShown)return!1;this.v.isLinksShown=!1,removeClass(this.$.close[0],"shown"),addClass(this.$.close[0],"hide"),this.tl.projectLink=new TimelineLite;for(var t,e=1,i=0,r=0;r<this.$.projectLink.length;r++)t=this.$.projectLink[r],hasClass(t,"hidden")||(this.tl.projectLink.to(t,e,{x:50,opacity:0,ease:Quart.easeIn},"-= "+i),this.tl.projectLink.to($(t).find(".home-project-link-line"),e,{x:"-50%",scaleX:0,ease:Quart.easeIn},"-= "+e),i=e-.2);this.tl.projectLink.to(this.$.projectsLinkBg,.5,{opacity:0,ease:Quad.easeOut,onComplete:function(){this.$.projectsLinkWrapper[0].style.display="none";for(var t=0;t<this.$.projectLink.length;t++){var e=this.$.projectLink[t];removeClass(e,"initShown"),resetStyle(e)}removeClass(this.$.close[0],"hide"),addClass(this.$.close[0],"hidden")}.bind(this)})};var e=function(t){var e=$(t.currentTarget);this.tl.overLink=new TimelineLite,this.tl.overLink.to(e.find(".home-project-link-txt"),1,{x:120,ease:Quart.easeOut}),this.tl.overLink.to(e.find(".home-project-link-line"),1.2,{x:120,ease:Quart.easeOut},"-= 0.95"),this.tl.overLink.to(e.find(".home-project-link-circle"),1,{opacity:1,scale:1,ease:Quart.easeOut},"-= 1.1"),this.tl.overLink.to(e.find(".home-project-link-circle-img"),1,{scale:1,ease:Quart.easeOut},"-= 1")},i=function(t){var e=$(t.currentTarget);this.tl.overLink&&this.tl.overLink.stop(),this.tl.outLink=new TimelineLite,this.tl.outLink.to(e.find(".home-project-link-circle"),.5,{opacity:0,scale:0,ease:Quart.easeInOut}),this.tl.outLink.to(e.find(".home-project-link-circle-img"),.5,{scale:2,ease:Quart.easeInOut},"-= 0.5"),this.tl.outLink.to(e.find(".home-project-link-txt"),1,{x:0,ease:Quart.easeInOut},"-= 0.7"),this.tl.outLink.to(e.find(".home-project-link-line"),1.2,{x:0,ease:Quart.easeInOut},"-= 0.95")},r=function(){var t,e,i=MJP.Views.Static.MenuCircle.aArcMenu;this.v.nbProjectsLink=0;for(var r=0;r<i.length;r++)t=i[r],"project-btn"===t.type&&(e=this.$.projectsLinkCont.find('.home-project-link[data-id="'+t.name+'"]'),t.isVisible&&"project-btn"==t.type?addClass(e[0],"hidden"):(removeClass(e[0],"hidden"),this.v.nbProjectsLink++))},s=function(){this.v.projectsLinkWrapperH=this.$.projectsLinkWrapper.height(),this.v.projectsLinkContH=this.$.projectsLinkCont.height();var t=Math.round((MJP.Main.windowH-this.v.projectsLinkContH)/2)+7;7>t&&(t=7),this.$.projectsLinkCont[0].style.top=t+"px",TweenLite.to(this.$.projectsLinkCont,1.5,{y:0,ease:Expo.easeOut})},n=function(t){if(this.v.projectsLinkContH<this.v.projectsLinkWrapperH||!this.v.isLinksShown)return!1;var e=t.pageY;100>e&&(e=100),e>this.v.projectsLinkWrapperH-100&&(e=this.v.projectsLinkWrapperH-100);var i=Math.round((-e+100)*((this.v.projectsLinkContH-this.v.projectsLinkWrapperH)/(this.v.projectsLinkWrapperH-200)));TweenLite.to(this.$.projectsLinkCont,1.5,{y:i,ease:Expo.easeOut})};return new t}(window),MJP.Views=MJP.Views||{},MJP.Views.Page=MJP.Views.Page||{},MJP.Views.Page.Project=function(t){function e(){MJP.ViewPage.call(this),this.name="project"}e.prototype=Object.create(MJP.ViewPage.prototype),e.prototype.constructor=e,e.prototype.initElt=function(){this.$.page=$(document.getElementById("page-content")),this.$.close=this.$.page.find(".close"),this.$.overview=this.$.page.find(".project-strip-overview"),this.$.changeProject=this.$.page.find(".project-strip-btn"),this.$.arrow=$(document.getElementById("arrow-down")),this.$.contentWrapper=$(document.getElementById("project-content-wrapper")),this.$.title=this.$.page.find(".project-title-wrapper"),this.$.infosCont=$(document.getElementById("project-infos-container")),this.$.projectInfos=this.$.infosCont.find(".project-infos-wrapper"),this.$.imgCont=$(document.getElementById("project-img-container")),this.$.img=this.$.imgCont.find(".project-img .img"),this.v.isArrowShown=!1,this.v.stoPrevBtn=null,this.v.stoNextBtn=null,this.v.projType=this.$.imgCont[0].getAttribute("data-type"),this.v.prevScrollY=0,this.v.posInfos=0,this.v.posImg=0,this.v.MENUBAR_RATIO=35/1280,this.resize(),r.call(this)},e.prototype.bindEvents=function(){this.p.closeClick=$.proxy(this.changePage,this),this.$.close.on("click",this.p.closeClick),this.p.enterChangeProject=$.proxy(s,this),this.$.changeProject.on("mouseenter",this.p.enterChangeProject),this.p.leaveChangeProject=$.proxy(n,this),this.$.changeProject.on("mouseleave",this.p.leaveChangeProject),this.p.clickChangeProject=$.proxy(this.changePage,this),this.$.changeProject.on("click",this.p.clickChangeProject),this.p.clickArrow=$.proxy(a,this),this.$.arrow.on("click",this.p.clickArrow),"desktop"==MJP.Config.DEVICE&&TweenLite.ticker.addEventListener("tick",o,this)},e.prototype.unbindEvents=function(){this.$.close.off("click",this.p.closeClick),this.$.changeProject.off("mouseenter",this.p.enterChangeProject),this.$.changeProject.off("mouseleave",this.p.leaveChangeProject),this.$.changeProject.off("click",this.p.clickChangeProject),this.$.arrow.off("click",this.p.clickArrow),"desktop"==MJP.Config.DEVICE&&TweenLite.ticker.removeEventListener("tick",o,this),this.p={},clearTimeout(this.v.stoShowPage),clearTimeout(this.v.stoShowClose),clearTimeout(this.v.stoPrevBtn),clearTimeout(this.v.stoNextBtn)},e.prototype.resize=function(){this.v.titleH=MJP.Main.windowH;var t=Math.round(MJP.Main.windowW-80-10*(MJP.Main.windowW-80)/100-300-80);this.$.title[0].style.height=this.v.titleH+"px","desktop"==MJP.Config.DEVICE&&(this.$.imgCont[0].style.paddingTop=this.v.titleH+"px",this.$.imgCont[0].style.width=t+"px"),this.v.infosContH=this.v.titleH+this.$.projectInfos.height(),this.v.posMax=-(this.v.infosContH-MJP.Main.windowH),i.call(this,t),"tablet"==MJP.Config.DEVICE&&(this.$.arrow[0].style.top=this.v.titleH-50+"px")};var i=function(t){var e=0;if("classic"==this.v.projType){for(var i,r,s,n=0,a=t*this.v.MENUBAR_RATIO,o=0,h=0;h<this.$.img.length;h++)i=this.$.img[h],r=i.getAttribute("data-w"),s=i.getAttribute("data-h"),type=i.getAttribute("data-type"),o="png"==type?0:a,n+=o+t*s/r+80;e=Math.round(this.v.titleH+n+80)}else e=this.$.imgCont.height();"desktop"==MJP.Config.DEVICE&&(this.$.page[0].style.height=e+"px")};e.prototype.hideContent=function(){MJP.Config.HAS_CSS_TRANSITIONS||(TweenLite.fromTo(this.$.imgCont,1,{opacity:.2},{opacity:0,ease:Quad.easeInOut}),TweenLite.fromTo(this.$.infosCont,1,{opacity:1},{opacity:0,ease:Quad.easeInOut}),TweenLite.to($(".project-strip-left"),1,{x:"-100%",delay:1,ease:Quart.easeOut}),TweenLite.to($(".project-strip-right"),1,{x:"100%",delay:1,ease:Quart.easeOut})),removeClass(this.$.close[0],"shown"),removeClass(this.$.close[1],"shown"),addClass(this.$.close[0],"hide"),addClass(this.$.close[1],"hide"),addClass(this.$.page[0],"hide"),this.hide()};var r=function(){MJP.Main.$.window[0].scrollTo(0,0),MJP.Config.HAS_CSS_TRANSITIONS||(this.tl.show=new TimelineLite({paused:!0}),this.tl.show.staggerFromTo(this.$.title.find("span"),1.5,{x:100,opacity:0},{x:0,opacity:1,delay:1,ease:Quart.easeOut},.2),this.tl.show.staggerFromTo($(".project-infos, .project-img"),1.5,{opacity:0},{y:0,opacity:1,ease:Quad.easeOut},.2,"-= 1"),this.tl.show.fromTo($(".project-strip-left"),1,{x:"-100%"},{x:"0%",ease:Quart.easeOut},"-= 1.5"),this.tl.show.fromTo($(".project-strip-right"),1,{x:"100%"},{x:"0%",ease:Quart.easeOut},"-= 1"),this.tl.show.fromTo(this.$.close,.5,{opacity:0,scale:0},{opacity:1,scale:1,ease:Quart.easeOut},"-= 0.5"),this.tl.show.restart()),this.v.stoShowPage=setTimeout(function(){removeClass(this.$.page[0],"hidden")}.bind(this),50),this.v.stoShowClose=setTimeout(function(){removeClass(this.$.close[0],"hidden"),removeClass(this.$.close[1],"hidden")}.bind(this),1500),this.v.stoShowClose=setTimeout(function(){addClass(this.$.close[0],"shown"),addClass(this.$.close[1],"shown"),this.v.isArrowShown||h.call(this)}.bind(this),2300)},s=function(t){var e=$(t.currentTarget);if(!MJP.Config.HAS_CSS_TRANSITIONS){var i="left"==e[0].getAttribute("data-side")?30:-30;this.tl.showChangeProject=new TimelineLite({paused:!0}),this.tl.showChangeProject.fromTo([this.$.imgCont,this.$.title,this.$.projectInfos],1,{opacity:1},{opacity:.2,ease:Quart.easeOut}),this.tl.showChangeProject.fromTo(e.next(".project-strip-overview").find(".project-strip-overview-img-circle"),1,{opacity:0,scale:0},{opacity:1,scale:1,ease:Quart.easeOut},"-= 1"),this.tl.showChangeProject.fromTo(e.next(".project-strip-overview").find(".project-strip-overview-img"),1,{scale:2},{scale:1,ease:Quart.easeOut},"-= 1"),this.tl.showChangeProject.staggerFromTo(e.next(".project-strip-overview").find(".project-strip-overview-title span"),1,{x:i,opacity:0},{x:0,opacity:1,ease:Quart.easeOut},.1,"-= 1"),this.tl.showChangeProject.restart()}addClass(this.$.contentWrapper[0],"opacity"),"left"==e[0].getAttribute("data-side")?(clearTimeout(this.v.stoPrevBtn),this.$.overview[0].style.overflow="visible",setTimeout(function(){addClass(this.$.overview[0],"show")}.bind(this),0)):(clearTimeout(this.v.stoNextBtn),this.$.overview[1].style.overflow="visible",setTimeout(function(){addClass(this.$.overview[1],"show")}.bind(this),0))},n=function(t){var e=$(t.currentTarget);if(!MJP.Config.HAS_CSS_TRANSITIONS){var i="left"==e[0].getAttribute("data-side")?30:-30;this.tl.hideChangeProject=new TimelineLite({paused:!0}),this.tl.showChangeProject.to([this.$.imgCont,this.$.title,this.$.projectInfos],1,{opacity:1,ease:Quart.easeOut}),this.tl.hideChangeProject.to(e.next(".project-strip-overview").find(".project-strip-overview-img-circle"),1,{opacity:0,scale:0,ease:Quart.easeInOut},"-= 1"),this.tl.showChangeProject.to(e.next(".project-strip-overview").find(".project-strip-overview-img"),1,{scale:2,ease:Quart.easeInOut},"-= 1"),this.tl.hideChangeProject.staggerTo(e.next(".project-strip-overview").find(".project-strip-overview-title span"),1,{x:i,opacity:0,ease:Quad.easeInOut},.1,"-= 1"),this.tl.hideChangeProject.restart()
}removeClass(this.$.contentWrapper[0],"opacity"),"left"==e[0].getAttribute("data-side")?(removeClass(this.$.overview[0],"show"),this.v.stoPrevBtn=setTimeout(function(){this.$.overview[0].style.overflow="hidden"}.bind(this),1e3)):(removeClass(this.$.overview[1],"show"),this.v.stoNextBtn=setTimeout(function(){this.$.overview[1].style.overflow="hidden"}.bind(this),1e3))},a=function(){TweenLite.to(t,1.5,{scrollTo:{y:this.v.titleH-50,autoKill:!1},ease:Quart.easeInOut})},o=function(){var t=MJP.Main.$.window.scrollTop();return t==this.v.prevScrollY?!1:(this.v.prevScrollY=t,h.call(this),this.v.posInfos=-t>this.v.posMax?-t:this.v.posMax,TweenLite.to(this.$.infosCont[0],2,{y:this.v.posInfos,ease:Quart.easeOut}),this.v.posImg=-t,TweenLite.to(this.$.imgCont[0],1,{y:this.v.posImg,ease:Quart.easeOut}),void 0)},h=function(){this.v.isArrowShown&&scrollY>50?(this.v.isArrowShown=!1,addClass(this.$.arrow[0],"hide")):!this.v.isArrowShown&&50>scrollY&&(this.v.isArrowShown=!0,removeClass(this.$.arrow[0],"hide"))};return new e}(window),MJP.Views=MJP.Views||{},MJP.Views.Page=MJP.Views.Page||{},MJP.Views.Page.About=function(){function t(){MJP.ViewPage.call(this),this.name="about"}t.prototype=Object.create(MJP.ViewPage.prototype),t.prototype.constructor=t,t.prototype.initElt=function(){this.$.page=$(document.getElementById("page-content")),this.$.aboutContent=this.$.page.find(".about-content"),this.$.close=this.$.page.find(".close"),this.$.mailto=this.$.page.find(".about-email"),initMailto(this.$.mailto[0]),e.call(this)},t.prototype.bindEvents=function(){this.p.clickClose=$.proxy(i,this),this.$.close.on("click",this.p.clickClose)},t.prototype.unbindEvents=function(){this.$.close.off("click",this.p.clickClose),this.p={},clearTimeout(this.v.stoShowPage),clearTimeout(this.v.stoShowClose)},t.prototype.resize=function(){},t.prototype.hideContent=function(){MJP.Config.HAS_CSS_TRANSITIONS||TweenLite.to(this.$.aboutContent,1,{opacity:0,scale:.7,ease:Quart.easeOut}),addClass(this.$.aboutContent[0],"hide"),removeClass(this.$.close[0],"shown"),addClass(this.$.close[0],"hide"),this.hide()};var e=function(){MJP.Config.HAS_CSS_TRANSITIONS||(TweenLite.fromTo(this.$.aboutContent,1.5,{opacity:0,scale:.7},{opacity:1,scale:1,delay:.5,ease:Quart.easeOut}),TweenLite.fromTo(this.$.close,.5,{opacity:0,scale:0},{opacity:1,scale:1,delay:1.5,ease:Quart.easeOut})),this.v.stoShowPage=setTimeout(function(){removeClass(this.$.aboutContent[0],"hidden"),removeClass(this.$.close[0],"hidden")}.bind(this),50),this.v.stoShowClose=setTimeout(function(){addClass(this.$.close[0],"shown")}.bind(this),800)},i=function(t){this.changePage(t,null)};return new t}(window),MJP.Main=function(t){function e(){this.$={},this.p={}}e.prototype.onReady=function(){this.$.window=$(t),this.$.body=$(document.body),this.$.mainContainer=$(document.getElementById("main-container")),this.$.pageContainer=$(document.getElementById("page-container")),this.$.loader=$(document.getElementById("loader")),this.$.percentageWrapper=$(document.getElementById("loader-percentage-wrapper")),this.$.progress=$(document.getElementById("loader-progress")),this.windowLoadProxy=$.proxy(i,this),this.$.window.on("load",this.windowLoadProxy)},e.prototype.resize=function(){return a.call(this),MJP.RoutesManager.isPageChange?!1:(MJP.Views.Static.Header.resize(),MJP.Views.Static.MenuCircle.resize(),null!==MJP.RoutesManager.currentPage&&MJP.RoutesManager.currentPage.resize(),void 0)};var i=function(){this.$.window.off("load",this.windowLoadProxy),this.windowLoadProxy=null,removeClass(this.$.mainContainer[0],"preload"),MJP.Model.Global.buildEvt(MJP.Model.Global.EVENT.INIT,r.bind(this)),MJP.Model.Global.init()},r=function(){MJP.Model.Global.destroyEvt(MJP.Model.Global.EVENT.INIT,r.bind(this)),MJP.Model.Images.buildEvt(MJP.Model.Images.EVENT.INIT,s.bind(this)),MJP.Model.Images.init()},s=function(){MJP.Model.Images.destroyEvt(MJP.Model.Images.EVENT.INIT,s.bind(this)),MJP.Config.LOCALHOST&&!MJP.Config.PROD&&o.call(this),a.call(this),MJP.Config.init(),MJP.Views.Static.Header.init(),MJP.Views.Static.MenuCircle.init(),n.call(this),this.resize(),setTimeout(function(){MJP.RoutesManager.init()},0)},n=function(){this.p.resizeWindow=$.proxy(this.resize,this),this.$.window.on("resize",this.p.resizeWindow)},a=function(){this.windowW=this.$.window.width(),this.windowH=this.$.window.height()},o=function(){this.stats=new Stats,this.stats.setMode(0),this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="0px",this.stats.domElement.style.bottom="0px",this.stats.domElement.style.zIndex=88,document.body.appendChild(this.stats.domElement)};return new e}(window),$(MJP.Main.onReady.bind(MJP.Main));